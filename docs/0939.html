<html>
<head>
<title>ASP.NET CORE — Learn CRUD Operations in ADO.NET from Zero to Hero</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ASP.NET核心——从零到英雄学习ADO.NET的CRUD操作</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/asp-net-core-learn-crud-operations-in-ado-net-from-zero-to-hero-a0109ed2f8a4?source=collection_archive---------0-----------------------#2019-02-07">https://medium.com/hackernoon/asp-net-core-learn-crud-operations-in-ado-net-from-zero-to-hero-a0109ed2f8a4?source=collection_archive---------0-----------------------#2019-02-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/ca68f65792b3c94a0ea0e71939bfb83c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*mZVgQ6uHYGUTDwIexpeoGg.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">CRUD Operations in ADO.NET ASP.NET Core</strong></figcaption></figure><p id="7466" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">在这个ASP.NET核心教程中，你将从一开始就学习在ADO.NET做CRUD操作。本教程将帮助您学习doing，以便您可以开始用C#在ASP.NET核心中进行数据库编程。</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="41e8" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><a class="ae ki" href="https://github.com/yogyogi/CRUD-Operations-in-ADO.NET-with-ASP.NET-Core" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hv"> <em class="kj">从GitHub</em></strong></a><strong class="jf hv"><em class="kj"><br/>【_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</em></strong>下载该应用程序的完整源代码</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><h2 id="1edc" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak">观众</strong></h2><p id="57da" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">本教程是为每一个想快速学习ASP.NET核心 和ADO.NET<a class="ae ki" href="http://www.yogihosting.com/category/aspnet-core/" rel="noopener ugc nofollow" target="_blank"><em class="kj">的人制作的。所有的事情都以简单的方式一步一步地解释。你可以下载完整的源代码并在你的电脑上运行。</em></a></p><p id="f0e6" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">在这里，我将对SQL Server数据库中的教师表执行CRUD(创建、读取、更新和删除)操作。</p><blockquote class="lk ll lm"><p id="5ab1" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">我个人认为“学习任何编程语言的最好方法是首先构建CRUD操作”。</p></blockquote><h2 id="238b" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak">本教程分为以下几个部分:</strong></h2><blockquote class="lq"><p id="805b" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">1.创建新的ASP.NET核心Web应用程序</p><p id="4543" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">2.配置ASP.NET核心Web应用程序</p><p id="4c1a" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">3.创建布局，查看导入，查看开始并添加引导</p><p id="015f" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">4.创建数据库</p><p id="527d" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">5.在应用程序中添加数据库的连接字符串</p><p id="1bc1" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">6.为教师添加模型课</p><p id="a171" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">7.添加客户端验证功能</p><p id="8132" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">8.执行创建教师功能</p><p id="18bb" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">9.执行“读取教师”功能</p><p id="5ecd" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">10.执行更新教师功能</p><p id="c62d" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">11.执行删除教师功能</p></blockquote><h2 id="be1d" class="kk kl hu bd km kn ma kp kq kr mb kt ku jo mc kw kx js md kz la jw me lc ld le dt translated"><strong class="ak"> 1。创建新的ASP.NET核心网络应用程序</strong></h2><p id="4d91" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">在Visual Studio中，选择“文件&gt;新建项目”。将会打开一个新窗口，在这里:</p><blockquote class="lk ll lm"><p id="0a8b" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">a.在左侧，选择“<code class="eh mf mg mh mi b">Installed &gt; Visual C# &gt; Web</code>”。</p><p id="34b0" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">b.在中间部分，选择“<code class="eh mf mg mh mi b">ASP.NET Core Web Application</code>”。</p><p id="b50d" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">c.在下半部分，给你的项目命名为“<code class="eh mf mg mh mi b">CRUDADO</code>”或任何你想要的名字，并选择项目文件在驱动器上的存储位置。同样选择选项—‘T3’，最后点击‘T4’按钮来创建你的项目。</p></blockquote><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff mj"><img src="../Images/1c07f5095d5de6415f3ce5145e8f5375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QhVhJFaEdkKLQDK78PtLpw.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Create ASP.NET Core Web Application</strong></figcaption></figure><p id="70fe" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，将会打开一个新窗口，要求您选择项目模板、点网络框架和其他一些东西。在此窗口中，确保您选择了以下内容:</p><blockquote class="lk ll lm"><p id="9b0a" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">a.在顶部的2个下拉菜单中，选择'<code class="eh mf mg mh mi b">.NET Core</code>'和'<code class="eh mf mg mh mi b">ASP.NET Core 2.0</code>'。您也可以选择高于2.0的ASP.NET核心版本。</p><p id="97f9" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">b.选择'<code class="eh mf mg mh mi b">Empty</code>'项目模板。</p><p id="121c" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">c.点击“<code class="eh mf mg mh mi b">OK</code>”按钮创建您的ASP.NET核心网络应用程序</p></blockquote><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff ms"><img src="../Images/03bc122f8614058f99f873880c5e956b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uSYNEPaIYhoX1RGp__g8BQ.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Select Properties for ASP.NET Core Application</strong></figcaption></figure><h2 id="30f7" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak"> 2。配置ASP.NET核心网络应用</strong></h2><p id="642b" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">你的应用程序应该支持MVC框架，路由和静态文件。所有这些都可以从位于应用程序根目录下的“Startup.cs”类中完成。</p><p id="5bcf" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">打开Startup.cs类，在<code class="eh mf mg mh mi b">ConfigureServices()</code>和<code class="eh mf mg mh mi b">Configure()</code>方法中添加这些支持，如下所示:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="6b9c" class="kk kl hu mi b fv mx my l mz na">using Microsoft.AspNetCore.Builder;<br/>using Microsoft.AspNetCore.Hosting;<br/>using Microsoft.Extensions.DependencyInjection;</span><span id="989b" class="kk kl hu mi b fv nb my l mz na">namespace CRUDADO<br/>{<br/>    public class Startup<br/>    {<br/>        public void ConfigureServices(IServiceCollection services)<br/>        {<br/>            services.AddMvc();<br/>        }</span><span id="c779" class="kk kl hu mi b fv nb my l mz na">        public void Configure(IApplicationBuilder app, IHostingEnvironment env)<br/>        {<br/>            app.UseStaticFiles();<br/>            app.UseDeveloperExceptionPage();<br/>            app.UseMvc(routes =&gt;<br/>            {<br/>                routes.MapRoute(<br/>                name: "default",<br/>                template: "{controller=Home}/{action=Index}/{id?}");<br/>            });<br/>        }<br/>    }<br/>}</span></pre><h2 id="aaec" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak"> 3。创建布局、视图导入、视图启动并添加引导</strong></h2><p id="dba1" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">在你的项目根目录下创建一个“<code class="eh mf mg mh mi b">Views</code>”文件夹，并在里面创建一个“<code class="eh mf mg mh mi b">Shared</code>”文件夹。</p><p id="c0c4" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，右键单击“<code class="eh mf mg mh mi b">Shared</code>”文件夹，并选择“<code class="eh mf mg mh mi b">Add &gt; New Item</code>”。您将获得一个显示项目列表的新窗口，从该列表中选择'<code class="eh mf mg mh mi b">MVC View Layout Page</code>'并点击'<code class="eh mf mg mh mi b">Add</code>'按钮。</p><p id="d098" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">这将在共享文件夹中添加<code class="eh mf mg mh mi b">_Layout.cshtml</code>文件，并打开进行编辑。您需要向其中添加以下代码:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="b51c" class="kk kl hu mi b fv mx my l mz na">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>    &lt;title&gt;@ViewData["Title"]&lt;/title&gt;<br/>    &lt;meta name="viewport" content="width=device-width" /&gt;<br/>    &lt;link href="/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" /&gt;<br/>&lt;/head&gt;<br/>&lt;body class="m-1 p-1"&gt;<br/>    @RenderBody()<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="cedf" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，下载<a class="ae ki" href="http://www.yogihosting.com/how-to-use-bootstrap/" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hv"> Bootstrap </strong> </a>包，并解压项目的“<code class="eh mf mg mh mi b">wwwroot &gt; lib</code>”文件夹中的Bootstrap zip文件内容。</p><p id="1fd8" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">Bootstrap用于创建移动友好的响应布局。它是世界上最流行的CSS框架。</p><p id="2dde" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，右键单击“<code class="eh mf mg mh mi b">Views</code>”文件夹并选择“<code class="eh mf mg mh mi b">Add &gt; New Item</code>”。在项目列表上，选择'<code class="eh mf mg mh mi b">MVC View Imports Page</code>'并点击'<code class="eh mf mg mh mi b">Add</code>'按钮。这将添加<code class="eh mf mg mh mi b">_ViewImports.cshtml</code>文件。</p><p id="d95f" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">通过向该文件添加以下代码，导入视图的内置标记helpers &amp; models名称空间:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="bde2" class="kk kl hu mi b fv mx my l mz na">@using CRUDADO.Models<br/>@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers</span></pre><p id="dddc" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">同样，右击“<code class="eh mf mg mh mi b">Views</code>”文件夹，选择“<code class="eh mf mg mh mi b">Add &gt; New Item</code>”。在项目列表上，选择'<code class="eh mf mg mh mi b">MVC View Start Page</code>'并点击'<code class="eh mf mg mh mi b">Add</code>'按钮。</p><p id="9604" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">这将添加带有以下初始代码的<code class="eh mf mg mh mi b">_ViewStart.cshtml</code>文件:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="0d8f" class="kk kl hu mi b fv mx my l mz na">@{<br/>    Layout = "_Layout";<br/>}</span></pre><p id="9cda" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">它告诉所有的视图都将具有位于共享文件夹中的_Layout.cshtml文件中的布局。</p><h2 id="a52a" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak"> 4。创建数据库</strong></h2><p id="86e4" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">您必须在电脑上安装SQL Server 2017(任何版本)。但是，任何其他版本的SQL Server，如2016，2008，2012，都可以。可以使用免费使用的SQL Server 2017的开发者版和速成版— <a class="ae ki" href="https://www.microsoft.com/en-us/sql-server/sql-server-downloads" rel="noopener ugc nofollow" target="_blank">下载SQL Server 2017 </a>。</p><p id="5dca" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，您需要连接到SQL Server，这可以使用Visual Studio 中的<em class="kj"> SQL Server Object Explorer来完成。所以在Visual Studio中选择'<code class="eh mf mg mh mi b">View &gt; SQL Server Object Explorer in Visual Studio</code>'。</em></p><p id="da6e" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">当“<code class="eh mf mg mh mi b">SQL Server Object Explorer</code>”窗口打开时，右击SQL Server节点，选择<code class="eh mf mg mh mi b">Add SQL Server</code>。</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/b73db4706202b2e41ac9f050cd5b1509.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*XwnMU3uAux_O5EuJA2tc1w.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Add SQL Server</strong></figcaption></figure><p id="f658" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，一个<code class="eh mf mg mh mi b">Connect</code>窗口打开。在此窗口中，选择“<code class="eh mf mg mh mi b">Browse</code>选项卡，然后点击“<code class="eh mf mg mh mi b">Local</code>节点将其打开。</p><p id="f3c3" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">在这个节点中，选择第二个选项<code class="eh mf mg mh mi b">(localdb)\MSSQLLocalDB</code>。选择它之后，您会注意到在同一个窗口中的'<code class="eh mf mg mh mi b">Server Name:</code>'字段现在有了<code class="eh mf mg mh mi b">(localdb)\MSSQLLocalDB</code>值。</p><p id="42fd" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">现在您只需点击<code class="eh mf mg mh mi b">Connect</code>按钮来连接到SQL服务器。请参见下图:</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff nd"><img src="../Images/36a95284980ada6ee4a005a853cab3f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ax6A7UVAFrQArU6tJ990NQ.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Connecting SQL Server in SQL Server Object Explorer</strong></figcaption></figure><p id="fd51" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">几秒钟后，SQL Server将连接并准备就绪。</p><p id="7227" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，右击<code class="eh mf mg mh mi b">Databases </code>节点并选择<code class="eh mf mg mh mi b">Add New Database.</code></p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff ne"><img src="../Images/b92606aa1ccb413f5625439bfd316f5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*0x2Zregb6CrIVgzB6n7B3Q.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Add New Database</strong></figcaption></figure><p id="fa5f" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">在对话框中，输入<code class="eh mf mg mh mi b">School</code>作为数据库名称，点击<code class="eh mf mg mh mi b">OK</code>创建数据库。</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff nf"><img src="../Images/59797b1ab9003c9379f6bacae80e8335.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qswt_xnv0y_PTVJA-5rRJw.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Create School Database</strong></figcaption></figure><p id="6712" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">学校数据库已创建，但为空。所以现在首先创建“教师”表。</p><p id="7f1f" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">点击<code class="eh mf mg mh mi b">School</code>数据库名称前的符号，打开其中的各个节点。</p><p id="adb5" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，右击<code class="eh mf mg mh mi b">Tables</code>节点并选择<code class="eh mf mg mh mi b">Add New Table</code>。</p><p id="17ae" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">Visual Studio中将打开一个<code class="eh mf mg mh mi b">Table Design Window</code>。您可以在这里为教师表添加字段。</p><p id="356f" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">在此窗口中，在<code class="eh mf mg mh mi b">T-SQL</code>选项卡内，您可以输入以下脚本来创建“<code class="eh mf mg mh mi b">Teacher</code>”表:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="e171" class="kk kl hu mi b fv mx my l mz na">CREATE TABLE [dbo].[Teacher]<br/>(<br/>    [Id] INT NOT NULL IDENTITY(1,1) PRIMARY KEY,<br/>    [Name] VARCHAR(50) NOT NULL,<br/>    [Skills] VARCHAR(250) NOT NULL,<br/>    [TotalStudents] INT NOT NULL,<br/>    [Salary] MONEY NOT NULL,<br/>    [AddedOn] DATE NOT NULL DEFAULT GETDATE()<br/>)</span></pre><p id="ba1b" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，点击<code class="eh mf mg mh mi b">Update </code>按钮开始创建该表，见下图:</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff ng"><img src="../Images/a534715f8122b36ab5e125f20724940c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5PLKE5AUVNoGKLP--F33Hg.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Table Design Window</strong></figcaption></figure><p id="253d" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">你会得到一个新的对话框，名为“<code class="eh mf mg mh mi b">Preview Database Updates</code>”。在这里点击“<code class="eh mf mg mh mi b">Update Database</code>”按钮，几秒钟后将创建库存表。</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff nh"><img src="../Images/e19f02a51f21a8fb6cd03725737077ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*_Oc6aoXkm0EMejbq3x8JdQ.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Preview Database Updates window</strong></figcaption></figure><p id="5963" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">您可以在“Tables”节点中找到这个新创建的表。</p><p id="1e2d" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">“教师”表有6列，分别是:</p><blockquote class="lk ll lm"><p id="429f" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">1.id-将从1自动生成的主键列，因为它具有Identity(1，1)属性。</p><p id="1fb0" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">2.Name —一个varchar(50)列，用于存储教师的姓名。</p><p id="7a5d" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">3.技能—用于存储教师的技能。</p><p id="beb5" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">4.TotalStudents —一个Int列，用于存储给定教师所教学生的总数。</p><p id="23ce" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">5.薪水—用于存储教师的薪水。</p><p id="4acf" class="jd je kj jf b jg jh ji jj jk jl jm jn ln jp jq jr lo jt ju jv lp jx jy jz ka hn dt translated">6.AddedOn —用于存储记录的创建时间。该列有一个日期类型，它使用GETDATE() SQL函数自动获取当前时间。</p></blockquote><p id="2940" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">注意，这些列有<code class="eh mf mg mh mi b">NOT NULL</code>属性，所以它们不能包含NULL。</p><h2 id="25d2" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak"> 5。在应用程序中添加数据库的连接字符串</strong></h2><p id="c1ee" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">连接字符串将参数存储到数据库，并用于将应用程序连接到数据库。这些参数是驱动程序名、服务器名和数据库名。它还包含数据库连接所需的安全信息，如用户名和密码。</p><p id="fc36" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">连接字符串存储在应用程序根目录下的<code class="eh mf mg mh mi b">appsettings.json</code>文件中。</p><p id="9cb7" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">在解决方案浏览器中右击项目名称，并选择<code class="eh mf mg mh mi b">Add &gt; New Item</code>。然后当“<code class="eh mf mg mh mi b">Add New Item</code>窗口打开时，选择<code class="eh mf mg mh mi b">ASP.NET Configuration file</code>文件，并将其命名为<code class="eh mf mg mh mi b">appsettings.json</code>(见下图)。最后点击<code class="eh mf mg mh mi b">Add</code>按钮。</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff ni"><img src="../Images/722ca5bd05c36191721fb9e545982a8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GhfFQUMU2q97SzJLVbOqDA.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Adding appsettings.json file</strong></figcaption></figure><p id="64ae" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">该文件将被创建并在Visual Studio中打开进行编辑。向其中添加以下连接字符串:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="782c" class="kk kl hu mi b fv mx my l mz na">{<br/>    "ConnectionStrings": {<br/>        "DefaultConnection": "Server=  (localdb)\\MSSQLLocalDB;Database=School;Trusted_Connection=True;MultipleActiveResultSets=true"<br/>    }<br/>}</span></pre><p id="9ea7" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">我在连接字符串中将可信连接定义为true，以便使用当前用户的Windows凭据对SQL Server进行身份验证。</p><h2 id="89c7" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak"> 6。为教师添加示范课</strong></h2><p id="d6b5" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">右键单击解决方案资源管理器中的项目名称，并选择“<code class="eh mf mg mh mi b">Add &gt; New Folder</code>”。将此文件夹命名为“<code class="eh mf mg mh mi b">Models</code>”。然后右击这个“<code class="eh mf mg mh mi b">Models</code>”文件夹，选择“<code class="eh mf mg mh mi b">Add &gt; New Item</code>”。</p><p id="1c39" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">在打开的窗口中，选择一个新班级，并将其命名为教师。将以下属性添加到该类中:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="6917" class="kk kl hu mi b fv mx my l mz na">using CRUDADO.CustomValidation;<br/>using System;<br/>using System.Collections.Generic;<br/>using System.ComponentModel.DataAnnotations;<br/>using System.Linq;<br/>using System.Threading.Tasks;</span><span id="1bea" class="kk kl hu mi b fv nb my l mz na">namespace CRUDADO.Models<br/>{<br/>    public class Teacher<br/>    {<br/>        [Required]<br/>        public int Id { get; set; }</span><span id="67fc" class="kk kl hu mi b fv nb my l mz na">        [Required]<br/>        public string Name { get; set; }</span><span id="87b8" class="kk kl hu mi b fv nb my l mz na">        [Required]<br/>        [SkillsValidate(Allowed = new string[] { "ASP.NET Core", "ASP.NET MVC", "ASP.NET Web Forms" }, ErrorMessage = "You skills are invalid")]<br/>        public string Skills { get; set; }</span><span id="4348" class="kk kl hu mi b fv nb my l mz na">        [Range(5, 50)]<br/>        public int TotalStudents { get; set; }</span><span id="840f" class="kk kl hu mi b fv nb my l mz na">        [Required]<br/>        public decimal Salary { get; set; }<br/>   <br/>        [Required]<br/>        public DateTime AddedOn { get; set; }<br/>    }<br/>}</span></pre><p id="3f33" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">对于数据库中教师表的6列，这个类有6个属性。我对Id、Name、Skills、Salary和AddedOn属性应用了<code class="eh mf mg mh mi b">[Required]</code>属性，对TotalStudent属性应用了[Range]属性，因此它只允许从5到50的值。</p><p id="afa9" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">还要注意应用于Skills属性的<code class="eh mf mg mh mi b">[SkillsValidate]</code>属性。<code class="eh mf mg mh mi b">[SkillsValidate]</code>属性是一个自定义验证属性，通过它我将强制Skills属性只接受3个值，它们是:</p><blockquote class="lq"><p id="2d98" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">1.ASP.NET核心</p><p id="08c9" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">2.ASP.NET MVC</p><p id="b70a" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">3.ASP.NET Web窗体</p></blockquote><p id="0644" class="pw-post-body-paragraph jd je hu jf b jg nj ji jj jk nk jm jn jo nl jq jr js nm ju jv jw nn jy jz ka hn dt translated">接下来，我将创建<code class="eh mf mg mh mi b">[SkillsValidate]</code>自定义验证属性。因此，在应用程序的根目录下创建一个新文件夹，并将其命名为“<code class="eh mf mg mh mi b">CustomValidation</code>”。在这个文件夹中添加一个名为'【T4]'的新类，并添加以下代码:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="cbc7" class="kk kl hu mi b fv mx my l mz na">using Microsoft.AspNetCore.Mvc.ModelBinding.Validation;<br/>using System;<br/>using System.Collections.Generic;<br/>using System.Linq;<br/>using System.Threading.Tasks;</span><span id="c0b8" class="kk kl hu mi b fv nb my l mz na">namespace CRUDADO.CustomValidation<br/>{<br/>    public class SkillsValidate : Attribute, IModelValidator<br/>    {<br/>        public string[] Allowed { get; set; }<br/>        public string ErrorMessage { get; set; }<br/>    <br/>        public IEnumerable&lt;ModelValidationResult&gt; Validate(ModelValidationContext context)<br/>        {<br/>            if (Allowed.Contains(context.Model as string))<br/>                return Enumerable.Empty&lt;ModelValidationResult&gt;();<br/>            else<br/>                return new List&lt;ModelValidationResult&gt; {<br/>                    new ModelValidationResult("", ErrorMessage)<br/>                };<br/>        }<br/>    }<br/>}</span></pre><h2 id="b0c0" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak"> 7。添加客户端验证功能</strong></h2><p id="030c" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">客户端验证功能由'<code class="eh mf mg mh mi b">jQuery</code>'和两个验证插件执行，这两个插件是:</p><blockquote class="lq"><p id="9aa3" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">1.<a class="ae ki" href="http://www.yogihosting.com/category/jquery/" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> jQuery </strong> </a>验证</p><p id="3444" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated">2.jQuery验证不引人注目</p></blockquote><p id="520e" class="pw-post-body-paragraph jd je hu jf b jg nj ji jj jk nk jm jn jo nl jq jr js nm ju jv jw nn jy jz ka hn dt translated">要安装这3个，在'【T6]'窗口中运行以下命令:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="d286" class="kk kl hu mi b fv mx my l mz na">PM&gt; Install-Package jQuery -Version 3.3.1</span><span id="afb6" class="kk kl hu mi b fv nb my l mz na">PM&gt; Install-Package jQuery.Validation -Version 1.17.0</span><span id="4143" class="kk kl hu mi b fv nb my l mz na">PM&gt; Install-Package jQuery.Validation.Unobtrusive -Version 2.0.20710</span></pre><h2 id="4c4c" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated">8。执行创建教师功能</h2><p id="0d0e" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">在应用程序的根目录下创建“<code class="eh mf mg mh mi b">Controllers</code>”文件夹。在这个文件夹中添加一个名为<code class="eh mf mg mh mi b">HomeController.cs’</code>的新控制器。控制器的初始代码如下所示:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="bc31" class="kk kl hu mi b fv mx my l mz na">using System.Collections.Generic;<br/>using System.Linq;<br/>using Microsoft.AspNetCore.Mvc;</span><span id="5bf8" class="kk kl hu mi b fv nb my l mz na">namespace CRUDADO.Controllers<br/>{<br/>    public class HomeController : Controller<br/>    {<br/>        public IActionResult Index()<br/>        {<br/>            return View();<br/>        }<br/>    }<br/>}</span></pre><p id="a222" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">连接字符串保存在<code class="eh mf mg mh mi b">appsettings.json</code>文件中。要访问这个文件，我必须通过依赖注入特性获得<code class="eh mf mg mh mi b">IConfiguration</code>接口的对象。因此我必须在HomeController的构造函数中添加<code class="eh mf mg mh mi b">IConfiguration</code>接口，MVC框架会自动为我提供这个接口的对象。</p><p id="4de7" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">因此，将家庭控制器的代码改为如下所示:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="4cd5" class="kk kl hu mi b fv mx my l mz na">using System.Collections.Generic;<br/>using System.Linq;<br/>using Microsoft.AspNetCore.Mvc;<br/>using Microsoft.Extensions.Configuration;</span><span id="3a41" class="kk kl hu mi b fv nb my l mz na">namespace CRUDADO.Controllers<br/>{<br/>    public class HomeController : Controller<br/>    {<br/>        public IConfiguration Configuration { get; }<br/>        public HomeController(IConfiguration configuration)<br/>        {<br/>            Configuration = configuration;<br/>        }<br/>    <br/>        public IActionResult Index()<br/>        {<br/>            return View();<br/>        }<br/>    }<br/>}</span></pre><p id="d85a" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">“创建教师”功能是通过一个名为“<code class="eh mf mg mh mi b">CREATE</code>”的新操作方法实现的。因此，将Create Action方法添加到Home控制器中，如下所示:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="72e7" class="kk kl hu mi b fv mx my l mz na">using System;<br/>using System.Collections.Generic;<br/>using System.Data;<br/>using System.Data.SqlClient;<br/>using System.Linq;<br/>using System.Threading.Tasks;<br/>using CRUDADO.Models;<br/>using Microsoft.AspNetCore.Mvc;<br/>using Microsoft.Extensions.Configuration;</span><span id="8070" class="kk kl hu mi b fv nb my l mz na">namespace CRUDADO.Controllers<br/>{ <br/>    public class HomeController : Controller<br/>    {<br/>        public IConfiguration Configuration { get; }<br/>        public HomeController(IConfiguration configuration)<br/>        {<br/>            Configuration = configuration;<br/>        }</span><span id="5ed0" class="kk kl hu mi b fv nb my l mz na">        public IActionResult Index()<br/>        {<br/>            return View();<br/>        }</span><span id="dcce" class="kk kl hu mi b fv nb my l mz na">        public IActionResult Create()<br/>        {<br/>            return View();<br/>        }</span><span id="8035" class="kk kl hu mi b fv nb my l mz na">        [HttpPost]<br/>        public IActionResult Create_Post(Teacher teacher)<br/>        {<br/>            if (ModelState.IsValid)<br/>            {<br/>                string connectionString = Configuration["ConnectionStrings:DefaultConnection"];<br/>                using (SqlConnection connection = new SqlConnection(connectionString))<br/>                {<br/>                    string sql = $"Insert Into Teacher (Name, Skills, TotalStudents, Salary) Values ('{teacher.Name}', '{teacher.Skills}','{teacher.TotalStudents}','{teacher.Salary}')";</span><span id="4d31" class="kk kl hu mi b fv nb my l mz na">                    using (SqlCommand command = new SqlCommand(sql, connection))<br/>                    {<br/>                        command.CommandType = CommandType.Text;<br/>                        connection.Open();<br/>                        command.ExecuteNonQuery();<br/>                        connection.Close();<br/>                    }<br/>                    return RedirectToAction("Index");<br/>                }<br/>            }<br/>            else<br/>                return View();<br/>        }<br/>    }<br/>}</span></pre><p id="af1a" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">在Create Action方法中，我在下面的代码行中获得了连接字符串:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="8c29" class="kk kl hu mi b fv mx my l mz na">string connectionString = Configuration["ConnectionStrings:DefaultConnection"];</span></pre><p id="b2d9" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">然后，我使用'<code class="eh mf mg mh mi b">SqlCommand</code>'对象通过运行insert SQL查询来插入教师的记录:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="b745" class="kk kl hu mi b fv mx my l mz na">string sql = $"Insert Into Teacher (Name, Skills, TotalStudents, Salary) Values ('{teacher.Name}', '{teacher.Skills}','{teacher.TotalStudents}','{teacher.Salary}')";</span></pre><p id="fed5" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，在应用程序的根目录中添加“<code class="eh mf mg mh mi b">Views</code>”文件夹。在这个文件夹中创建一个名为“Home”的新文件夹。</p><p id="4ec1" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，在这个“<code class="eh mf mg mh mi b">Home</code>”文件夹(即“<code class="eh mf mg mh mi b">Views&gt;Home</code>”)中创建一个名为“<code class="eh mf mg mh mi b">Create.cshtml</code>”的新视图。将以下代码添加到该视图中:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="e754" class="kk kl hu mi b fv mx my l mz na">@model Teacher</span><span id="2c61" class="kk kl hu mi b fv nb my l mz na">@{<br/>    Layout = "_Layout";<br/>    var title = "CREATE Teacher";<br/>    ViewData["Title"] = title;<br/>}</span><span id="c0dc" class="kk kl hu mi b fv nb my l mz na">&lt;style&gt;<br/>.input-validation-error {<br/>    border-color: red;<br/>}<br/>&lt;/style&gt;</span><span id="f5e6" class="kk kl hu mi b fv nb my l mz na">&lt;h2&gt;@title&lt;/h2&gt;</span><span id="1a6d" class="kk kl hu mi b fv nb my l mz na">&lt;<strong class="mi hv">div</strong> <strong class="mi hv">asp-validation-summary</strong>="ModelOnly" class="text-danger"&gt;&lt;/<strong class="mi hv">div</strong>&gt;<br/>&lt;<strong class="mi hv">form</strong> class="m-1 p-1" method="post"&gt;<br/>    &lt;div class="form-group"&gt;<br/>        &lt;<strong class="mi hv">label</strong> <strong class="mi hv">asp-for</strong>="Name"&gt;&lt;/<strong class="mi hv">label</strong>&gt;<br/>        &lt;<strong class="mi hv">input</strong> <strong class="mi hv">asp-for</strong>="Name" class="form-control" /&gt;<br/>        &lt;<strong class="mi hv">span</strong> <strong class="mi hv">asp-validation-for</strong>="Name" class="text-danger"&gt;&lt;/<strong class="mi hv">span</strong>&gt;<br/>    &lt;/div&gt;</span><span id="98ba" class="kk kl hu mi b fv nb my l mz na">    &lt;div class="form-group"&gt;<br/>        &lt;<strong class="mi hv">label</strong> <strong class="mi hv">asp-for</strong>="Skills"&gt;&lt;/<strong class="mi hv">label</strong>&gt;<br/>        &lt;<strong class="mi hv">input</strong> <strong class="mi hv">asp-for</strong>="Skills" <strong class="mi hv">type</strong>="text" class="form-control" /&gt;<br/>        &lt;<strong class="mi hv">span</strong> <strong class="mi hv">asp-validation-for</strong>="Skills" class="text-danger"&gt;&lt;/<strong class="mi hv">span</strong>&gt;<br/>    &lt;/div&gt;</span><span id="3ce4" class="kk kl hu mi b fv nb my l mz na">    &lt;div class="form-group"&gt;<br/>        &lt;<strong class="mi hv">label</strong> <strong class="mi hv">asp-for</strong>="TotalStudents"&gt;&lt;/<strong class="mi hv">label</strong>&gt;<br/>        &lt;<strong class="mi hv">input</strong> <strong class="mi hv">asp-for</strong>="TotalStudents" <strong class="mi hv">type</strong>="text" class="form-control" /&gt;<br/>        &lt;<strong class="mi hv">span</strong> <strong class="mi hv">asp-validation-for</strong>="TotalStudents" class="text-danger"&gt;&lt;/<strong class="mi hv">span</strong>&gt;<br/>    &lt;/div&gt;</span><span id="3bf6" class="kk kl hu mi b fv nb my l mz na">    &lt;div class="form-group"&gt;<br/>        &lt;<strong class="mi hv">label</strong> <strong class="mi hv">asp-for</strong>="Salary"&gt;&lt;/<strong class="mi hv">label</strong>&gt;<br/>        &lt;<strong class="mi hv">input</strong> <strong class="mi hv">asp-for</strong>="Salary" <strong class="mi hv">type</strong>="text" class="form-control" /&gt;<br/>        &lt;<strong class="mi hv">span</strong> <strong class="mi hv">asp-validation-for</strong>="Salary" class="text-danger"&gt;&lt;/<strong class="mi hv">span</strong>&gt;<br/>    &lt;/div&gt;<br/>    &lt;button type="submit" class="btn btn-primary"&gt;Submit&lt;/button&gt;&lt;/<strong class="mi hv">form</strong>&gt;</span><span id="b7c7" class="kk kl hu mi b fv nb my l mz na">&lt;script src="/lib/jquery/dist/jquery.min.js"&gt;&lt;/script&gt;<br/>&lt;script src="/lib/jquery-validation/dist/jquery.validate.min.js"&gt;&lt;/script&gt;<br/>&lt;script src="/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js"&gt;&lt;/script&gt;</span></pre><p id="0b5a" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">该视图有一个类型为'<code class="eh mf mg mh mi b">Teacher</code>'的模型，它为'<code class="eh mf mg mh mi b">Name, Skills, TotalStudents and Salary</code>'创建输入字段，以便用户可以填写并提交它。</p><p id="272c" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">当点击提交按钮时，类型为<code class="eh mf mg mh mi b">HttpPost</code>的创建动作被调用，新的教师记录被创建。</p><p id="4a86" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">请注意对视图中的输入字段进行客户端验证的3个脚本文件:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="f0ff" class="kk kl hu mi b fv mx my l mz na">&lt;script src="/lib/jquery/dist/jquery.min.js"&gt;&lt;/script&gt;<br/>&lt;script src="/lib/jquery-validation/dist/jquery.validate.min.js"&gt;&lt;/script&gt;<br/>&lt;script src="/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js"&gt;&lt;/script&gt;</span></pre><p id="972b" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">如果您正在通过EF core执行记录插入，那么您需要查看本教程— <a class="ae ki" href="http://www.yogihosting.com/insert-records-entity-framework-core/" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hv">在实体框架核心</strong> </a>中插入记录。</p><p id="ea4b" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">测试创建教师功能</strong></p><p id="d8bf" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">运行应用程序，在浏览器中转至“<code class="eh mf mg mh mi b">Create</code>”视图的URL，即— <code class="eh mf mg mh mi b">http://localhost:52730/Home/Create</code>。您将在浏览器中看到“创建教师”表单。</p><p id="ee1c" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">无需填写任何字段，点击提交按钮，您将看到jQuery验证插件显示的验证错误。</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/fc1e928c6bc91b92113e8aac4c49fec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*lIYfgL9Jij8wV6s2_kXHfA.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">jQuery Validations on Teacher Form</strong></figcaption></figure><p id="06b0" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">现在填写所有的字段(如下图所示)并点击提交按钮。</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/d137819956f087e8eb3065724070c8cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*hBDwEZJv_yG-aVEVGga20A.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Create Teacher</strong></figcaption></figure><p id="868d" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">将在数据库中创建教师记录，您将被重定向到当前为空的索引视图。</p><p id="6c5e" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">您可以确认记录已插入教师的表中。为此，转到'<code class="eh mf mg mh mi b">SQL Server Object Explorer</code>'，然后右键单击'<code class="eh mf mg mh mi b">Teacher</code>'表并选择'<code class="eh mf mg mh mi b">View Data</code>'。</p><p id="c2b4" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">教师表将打开，您将在其中看到新的教师记录，见下图:</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff np"><img src="../Images/8d98650db9d2ae24f3001fe2895847f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*YwYYPbnIwLZ3v0C0A765Yg.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Teacher Record Inserted in Database</strong></figcaption></figure><h2 id="c8ab" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated">9。执行读取教师功能</h2><p id="a037" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">现在，我们将创建阅读教师功能。因此，更改家庭控制器中的索引操作，使所有教师返回到视图，如下所示:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="cf0c" class="kk kl hu mi b fv mx my l mz na">public IActionResult Index()<br/>{<br/>    List&lt;Teacher&gt; teacherList = new List&lt;Teacher&gt;();<br/>    string connectionString = Configuration["ConnectionStrings:DefaultConnection"];</span><span id="0aae" class="kk kl hu mi b fv nb my l mz na">    using (SqlConnection connection = new SqlConnection(connectionString))<br/>    {<br/>        //SqlDataReader<br/>        connection.Open();<br/>        <br/>        string sql = "Select * From Teacher";SqlCommand command = new SqlCommand(sql, connection);<br/>        using (SqlDataReader dataReader = command.ExecuteReader())<br/>        {<br/>            while (dataReader.Read())<br/>            {<br/>                Teacher teacher = new Teacher();<br/>                teacher.Id = Convert.ToInt32(dataReader["Id"]);<br/>                teacher.Name = Convert.ToString(dataReader["Name"]);<br/>                teacher.Skills = Convert.ToString(dataReader["Skills"]);</span><span id="9ddb" class="kk kl hu mi b fv nb my l mz na">                teacher.TotalStudents = Convert.ToInt32(dataReader["TotalStudents"]);<br/>                teacher.Salary = Convert.ToDecimal(dataReader["Salary"]);<br/>                teacher.AddedOn = Convert.ToDateTime(dataReader["AddedOn"]);</span><span id="7931" class="kk kl hu mi b fv nb my l mz na">                teacherList.Add(teacher);<br/>            }<br/>        }<br/>        connection.Close();<br/>    }<br/>    return View(teacherList);<br/>}</span></pre><p id="7ef8" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">在这个动作中，我用<code class="eh mf mg mh mi b">SqlCommand’s ExecuteReader()</code>方法执行了“<code class="eh mf mg mh mi b">Select * from Teacher</code>”查询，以获得一个<code class="eh mf mg mh mi b">SqlDataReader</code>对象。</p><p id="d271" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">然后，我使用SqlDataReader的'<code class="eh mf mg mh mi b">.Read()</code>'方法遍历所有记录，并创建一个包含所有教师记录的教师列表对象。这个对象在代码的最后作为模型返回给视图。</p><p id="2c24" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，使用以下代码将'<code class="eh mf mg mh mi b">Index</code>'视图添加到'<code class="eh mf mg mh mi b">Views/Home/</code>'文件夹中:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="0963" class="kk kl hu mi b fv mx my l mz na">@model IEnumerable&lt;Teacher&gt;</span><span id="3a2f" class="kk kl hu mi b fv nb my l mz na">@{<br/>    Layout = "_Layout";<br/>    var title = "READ Teacher";<br/>    ViewData["Title"] = title;<br/>}</span><span id="0709" class="kk kl hu mi b fv nb my l mz na">&lt;h2&gt;@title&lt;/h2&gt;<br/>&lt;h3&gt;&lt;<strong class="mi hv">a</strong> <strong class="mi hv">asp-action</strong>="Create" class="btn btn-sm btn-secondary"&gt;Create&lt;/<strong class="mi hv">a</strong>&gt;&lt;/h3&gt;</span><span id="254a" class="kk kl hu mi b fv nb my l mz na">&lt;table class="table table-bordered table-sm table-striped"&gt;<br/>    &lt;thead&gt;<br/>        &lt;tr&gt;<br/>            &lt;th&gt;Id&lt;/th&gt;<br/>            &lt;th&gt;Name&lt;/th&gt;<br/>            &lt;th&gt;Skills&lt;/th&gt;<br/>            &lt;th&gt;Total Students&lt;/th&gt;<br/>            &lt;th&gt;Salary&lt;/th&gt;<br/>            &lt;th&gt;Added On&lt;/th&gt;<br/>            &lt;th&gt;Update&lt;/th&gt;<br/>            &lt;th&gt;Delete&lt;/th&gt;<br/>        &lt;/tr&gt;<br/>    &lt;/thead&gt;<br/>    &lt;tbody&gt;<br/>        @if (Model == null)<br/>        {<br/>            &lt;tr&gt;<br/>                &lt;td colspan="7" class="text-center"&gt;No Model Data&lt;/td&gt;<br/>            &lt;/tr&gt;<br/>        }<br/>        else<br/>        {<br/>            @foreach (var p in Model)<br/>            {<br/>                &lt;tr&gt;<br/>                    &lt;td&gt;@p.Id&lt;/td&gt;<br/>                    &lt;td&gt;@p.Name&lt;/td&gt;<br/>                    &lt;td&gt;@p.Skills&lt;/td&gt;<br/>                    &lt;td&gt;@p.TotalStudents&lt;/td&gt;<br/>                    &lt;td&gt;@string.Format(new System.Globalization.CultureInfo("en-US"), "{0:C2}", p.Salary)&lt;/td&gt;<br/>                    &lt;td&gt;@string.Format("{0:dddd, dd MMMM yyyy}", p.AddedOn)&lt;/td&gt;<br/>                    &lt;td&gt;&lt;<strong class="mi hv">a</strong> <strong class="mi hv">asp-action</strong>="Update" <strong class="mi hv">asp-route-id</strong>="@p.Id"&gt;Update&lt;/<strong class="mi hv">a</strong>&gt;&lt;/td&gt;<br/>                    &lt;td&gt;<br/>                        &lt;<strong class="mi hv">form</strong> <strong class="mi hv">asp-action</strong>="Delete" method="post" <strong class="mi hv">asp-route-id</strong>="@p.Id"&gt;<br/>                            &lt;button&gt;Delete&lt;/button&gt;<br/>                        &lt;/<strong class="mi hv">form</strong>&gt;<br/>                    &lt;/td&gt;<br/>                &lt;/tr&gt;<br/>            }<br/>        }<br/>    &lt;/tbody&gt;<br/>&lt;/table&gt;</span></pre><p id="a9a2" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">注意，我还在表的thead和tbody元素中创建了用于更新和删除功能的列:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="6e8c" class="kk kl hu mi b fv mx my l mz na">&lt;table class="table table-bordered table-sm table-striped"&gt;<br/>    &lt;thead&gt;<br/>        &lt;tr&gt;<br/>            &lt;th&gt;Id&lt;/th&gt;<br/>            &lt;th&gt;Name&lt;/th&gt;<br/>            &lt;th&gt;Skills&lt;/th&gt;<br/>            &lt;th&gt;Total Students&lt;/th&gt;<br/>            &lt;th&gt;Salary&lt;/th&gt;<br/>            &lt;th&gt;Added On&lt;/th&gt;<br/>            &lt;th&gt;Update&lt;/th&gt;<br/>            &lt;th&gt;Delete&lt;/th&gt;<br/>        &lt;/tr&gt;<br/>    &lt;/thead&gt;<br/>    &lt;tbody&gt;</span><span id="e162" class="kk kl hu mi b fv nb my l mz na">    …</span><span id="0773" class="kk kl hu mi b fv nb my l mz na">    else<br/>    {<br/>        @foreach (var p in Model)<br/>        {<br/>            &lt;tr&gt;<br/>            …</span><span id="b059" class="kk kl hu mi b fv nb my l mz na">                &lt;td&gt;&lt;<strong class="mi hv">a</strong> <strong class="mi hv">asp-action</strong>="Update" <strong class="mi hv">asp-route-id</strong>="@p.Id"&gt;Update&lt;/<strong class="mi hv">a</strong>&gt;&lt;/td&gt;<br/>                &lt;td&gt;<br/>                    &lt;<strong class="mi hv">form</strong> <strong class="mi hv">asp-action</strong>="Delete" method="post" <strong class="mi hv">asp-route-id</strong>="@p.Id"&gt;<br/>                        &lt;button&gt;Delete&lt;/button&gt;<br/>                    &lt;/<strong class="mi hv">form</strong>&gt;<br/>                &lt;/td&gt;<br/>            &lt;/tr&gt;<br/>        }<br/>    }<br/>    &lt;/tbody&gt;<br/>&lt;/table&gt;</span></pre><p id="489a" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">我们将在接下来的小节中创建更新和删除功能。</p><p id="02af" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">不能错过的相关教程— <a class="ae ki" href="http://www.yogihosting.com/read-records-entity-framework-core/" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hv">读取实体框架核心</strong> </a>中的记录。</p><p id="5c97" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">测试阅读教师功能</strong></p><p id="e10e" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">运行您的应用程序，您将看到教师的表记录显示在索引视图中。下图显示了这一点:</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/183aab1d600843d5cb60b9f1b5adbf2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*pxw4BJFdf6TYgQe3mRNGzw.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Read Teacher View</strong></figcaption></figure><h2 id="b9ac" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak"> 10。执行更新教师功能</strong></h2><p id="366a" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">更新功能是通过向家庭控制器添加更新动作方法来完成的。添加到控制器的代码如下所示:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="cb05" class="kk kl hu mi b fv mx my l mz na">public IActionResult Update(int id)<br/>{<br/>    string connectionString = Configuration["ConnectionStrings:DefaultConnection"];<br/>    Teacher teacher = new Teacher();</span><span id="1e20" class="kk kl hu mi b fv nb my l mz na">    using (SqlConnection connection = new SqlConnection(connectionString))<br/>    {<br/>        string sql = $"Select * From Teacher Where Id='{id}'";<br/>        SqlCommand command = new SqlCommand(sql, connection);<br/>        connection.Open();</span><span id="7b4f" class="kk kl hu mi b fv nb my l mz na">        using (SqlDataReader dataReader = command.ExecuteReader())<br/>        {<br/>            while (dataReader.Read())<br/>            {<br/>                teacher.Id = Convert.ToInt32(dataReader["Id"]);<br/>                teacher.Name = Convert.ToString(dataReader["Name"]);<br/>                teacher.Skills = Convert.ToString(dataReader["Skills"]);</span><span id="df0d" class="kk kl hu mi b fv nb my l mz na">                teacher.TotalStudents = Convert.ToInt32(dataReader["TotalStudents"]);</span><span id="89e1" class="kk kl hu mi b fv nb my l mz na">                teacher.Salary = Convert.ToDecimal(dataReader["Salary"]);</span><span id="5cdb" class="kk kl hu mi b fv nb my l mz na">                teacher.AddedOn = Convert.ToDateTime(dataReader["AddedOn"]);<br/>            }<br/>        }<br/>        connection.Close();<br/>    }<br/>    return View(teacher);<br/>}</span><span id="57a5" class="kk kl hu mi b fv nb my l mz na">[HttpPost]<br/>[ActionName("Update")]<br/>public IActionResult Update_Post(Teacher teacher)<br/>{<br/>    string connectionString = Configuration["ConnectionStrings:DefaultConnection"];<br/>    using (SqlConnection connection = new SqlConnection(connectionString))<br/>    {<br/>        string sql = $"Update Teacher SET Name='{teacher.Name}', Skills='{teacher.Skills}', TotalStudents='{teacher.TotalStudents}', Salary='{teacher.Salary}' Where Id='{teacher.Id}'";</span><span id="5817" class="kk kl hu mi b fv nb my l mz na">        using (SqlCommand command = new SqlCommand(sql, connection))<br/>        {<br/>            connection.Open();<br/>            command.ExecuteNonQuery();<br/>            connection.Close();<br/>        }<br/>    }<br/>    return RedirectToAction("Index");<br/>}</span></pre><p id="82b7" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">Update action方法的<code class="eh mf mg mh mi b">HttpGet </code>版本在其参数中采用教师的“<code class="eh mf mg mh mi b">id</code>”，然后使用SqlCommand对象运行名为<code class="eh mf mg mh mi b">Select * From Teacher Where Id='{id}'</code>的SQL查询。它获取教师记录的值，并将其返回到更新视图。</p><p id="fbbb" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">HttpPost版本的更新操作方法使用ADO.NET '<code class="eh mf mg mh mi b">SqlCommand</code>'对象来实际更新教师的记录。需要注意的重要事情是更新查询，它是:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="3fd9" class="kk kl hu mi b fv mx my l mz na">string sql = $"Update Teacher SET Name='{teacher.Name}', Skills='{teacher.Skills}', TotalStudents='{teacher.TotalStudents}', Salary='{teacher.Salary}' Where Id='{teacher.Id}'";</span></pre><p id="133b" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">接下来，使用以下代码在“Views/Home/”文件夹中创建更新视图:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="7705" class="kk kl hu mi b fv mx my l mz na">@model Teacher<br/>@{<br/>    Layout = "_Layout";<br/>    var title = "UPDATE Teacher";<br/>    ViewData["Title"] = title;<br/>}</span><span id="5224" class="kk kl hu mi b fv nb my l mz na">&lt;style&gt;<br/>    .input-validation-error {<br/>        border-color: red;<br/>    }<br/>&lt;/style&gt;</span><span id="da9b" class="kk kl hu mi b fv nb my l mz na">&lt;h2&gt;@title&lt;/h2&gt;</span><span id="ea03" class="kk kl hu mi b fv nb my l mz na">&lt;<strong class="mi hv">div</strong> <strong class="mi hv">asp-validation-summary</strong>="ModelOnly" class="text-danger"&gt;&lt;/<strong class="mi hv">div</strong>&gt;<br/>&lt;<strong class="mi hv">form</strong> class="m-1 p-1" method="post"&gt;<br/>    &lt;div class="form-group"&gt;<br/>        &lt;<strong class="mi hv">label</strong> <strong class="mi hv">asp-for</strong>="Id"&gt;&lt;/<strong class="mi hv">label</strong>&gt;<br/>        &lt;<strong class="mi hv">input</strong> <strong class="mi hv">asp-for</strong>="Id" <strong class="mi hv">type</strong>="text" readonly class="form-control" /&gt;<br/>    &lt;/div<br/>    &lt;div class="form-group"&gt;<br/>        &lt;<strong class="mi hv">label</strong> <strong class="mi hv">asp-for</strong>="Name"&gt;&lt;/<strong class="mi hv">label</strong>&gt;<br/>        &lt;<strong class="mi hv">input</strong> <strong class="mi hv">asp-for</strong>="Name" <strong class="mi hv">type</strong>="text" class="form-control" /&gt;<br/>        &lt;<strong class="mi hv">span</strong> <strong class="mi hv">asp-validation-for</strong>="Name" class="text-danger"&gt;&lt;/<strong class="mi hv">span</strong>&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group"&gt;<br/>        &lt;<strong class="mi hv">label</strong> <strong class="mi hv">asp-for</strong>="Skills"&gt;&lt;/<strong class="mi hv">label</strong>&gt;<br/>        &lt;<strong class="mi hv">input</strong> <strong class="mi hv">asp-for</strong>="Skills" <strong class="mi hv">type</strong>="text" class="form-control" /&gt;<br/>        &lt;<strong class="mi hv">span</strong> <strong class="mi hv">asp-validation-for</strong>="Skills" class="text-danger"&gt;&lt;/<strong class="mi hv">span</strong>&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group"&gt;<br/>        &lt;<strong class="mi hv">label</strong> <strong class="mi hv">asp-for</strong>="TotalStudents"&gt;&lt;/<strong class="mi hv">label</strong>&gt;<br/>        &lt;<strong class="mi hv">input</strong> <strong class="mi hv">asp-for</strong>="TotalStudents" <strong class="mi hv">type</strong>="text" class="form-control" /&gt;<br/>        &lt;<strong class="mi hv">span</strong> <strong class="mi hv">asp-validation-for</strong>="TotalStudents" class="text-danger"&gt;&lt;/<strong class="mi hv">span</strong>&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group"&gt;<br/>        &lt;<strong class="mi hv">label</strong> <strong class="mi hv">asp-for</strong>="Salary"&gt;&lt;/<strong class="mi hv">label</strong>&gt;<br/>        &lt;<strong class="mi hv">input</strong> <strong class="mi hv">asp-for</strong>="Salary" <strong class="mi hv">type</strong>="text" class="form-control"/&gt;<br/>        &lt;<strong class="mi hv">span</strong> <strong class="mi hv">asp-validation-for</strong>="Salary" class="text-danger"&gt;&lt;/<strong class="mi hv">span</strong>&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group"&gt;<br/>        &lt;<strong class="mi hv">label</strong> <strong class="mi hv">asp-for</strong>="AddedOn"&gt;&lt;/<strong class="mi hv">label</strong>&gt;<br/>        &lt;<strong class="mi hv">input</strong> <strong class="mi hv">asp-for</strong>="AddedOn" <strong class="mi hv">type</strong>="text" class="form-control" <strong class="mi hv">asp-format</strong>="{0:d}" /&gt;<br/>    &lt;/div&gt;<br/>    &lt;button type="submit" class="btn btn-primary"&gt;Submit&lt;/button&gt;<br/>&lt;/<strong class="mi hv">form</strong>&gt;</span><span id="428a" class="kk kl hu mi b fv nb my l mz na">&lt;script src="/lib/jquery/dist/jquery.min.js"&gt;&lt;/script&gt;<br/>&lt;script src="/lib/jquery-validation/dist/jquery.validate.min.js"&gt;&lt;/script&gt;&lt;script src="/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js"&gt;&lt;/script&gt;</span></pre><p id="2c53" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">该视图类似于我们之前创建的索引视图。我将“Id”字段设为只读，这样用户就不能更改它。</p><p id="b17f" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">测试更新教师功能</strong></p><p id="4510" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">运行您的应用程序，并单击第一个教师记录的“更新”链接，请参见下图:</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/d0827a08a0fe233b1aec1cd141def515.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*AL_qDoRPfGW5v6I1DPnwRg.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Click Update Link</strong></figcaption></figure><p id="7991" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">该记录将打开进行更新。将姓名改为'<code class="eh mf mg mh mi b">Bill Gates</code>'，工资改为'<code class="eh mf mg mh mi b">100000000</code>'。最后，单击提交按钮，如下图所示:</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff nq"><img src="../Images/af2016c95e6a2ce632cfe0d8c4767a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*_KXdxKgtVKS6sSAheBVswA.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Update Record</strong></figcaption></figure><p id="3e33" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">记录将被更新，您将被重定向到索引视图，在该视图中您可以看到更新的记录字段，如下图所示:</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff nq"><img src="../Images/f4c2018b4c15332a96126e25d9dae375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*ThZK78tDWxB0Sgq1KG2jAQ.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Record Updated</strong></figcaption></figure><h2 id="3aaf" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak"> 11。执行删除教师功能</strong></h2><p id="b8f2" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">在主控制器中创建删除操作方法，其代码如下所示:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="2069" class="kk kl hu mi b fv mx my l mz na">HttpPost]<br/>public IActionResult Delete(int id)<br/>{<br/>    string connectionString = Configuration["ConnectionStrings:DefaultConnection"]<br/>    using (SqlConnection connection = new SqlConnection(connectionString))<br/>    {<br/>        string sql = $"Delete From Teacher Where Id='{id}'";<br/>        using (SqlCommand command = new SqlCommand(sql, connection))<br/>        {<br/>            connection.Open();<br/>            try<br/>            {<br/>                command.ExecuteNonQuery();<br/>            }<br/>            catch (SqlException ex)<br/>            {<br/>                ViewBag.Result = "Operation got error:" + ex.Message;<br/>            }<br/>            connection.Close();<br/>        }<br/>    }<br/>    return RedirectToAction("Index");<br/>}</span></pre><p id="1de2" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">该方法在其参数中获取教师记录的id，然后执行删除SQL查询:</p><pre class="mk ml mm mn fq mt mi mu mv aw mw dt"><span id="0aaa" class="kk kl hu mi b fv mx my l mz na">string sql = $"Delete From Teacher Where Id='{id}'";</span></pre><p id="741a" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">测试删除教师功能</strong></p><p id="45bc" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">运行您的应用程序，并单击针对任何记录给出的“删除”链接。查看显示记录删除过程的下图:</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff nq"><img src="../Images/3d4fd567b2228b2b3981c28d50ef9663.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*6QOGqYm76BLzQObDupKC4g.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Delete Link</strong></figcaption></figure><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff nq"><img src="../Images/700ce568ba1241d9d75f02083109c2a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*aS9jvccEZKWe-awtY0O3ZA.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Record Deleted</strong></figcaption></figure></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="3c65" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><a class="ae ki" href="https://github.com/yogyogi/CRUD-Operations-in-ADO.NET-with-ASP.NET-Core" rel="noopener ugc nofollow" target="_blank"> <strong class="jf hv"> <em class="kj">从GitHub</em></strong></a><strong class="jf hv"><em class="kj"><br/>【_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</em></strong>下载该应用的完整源代码</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><h2 id="4473" class="kk kl hu bd km kn ko kp kq kr ks kt ku jo kv kw kx js ky kz la jw lb lc ld le dt translated"><strong class="ak">结论</strong></h2><p id="1f33" class="pw-post-body-paragraph jd je hu jf b jg lf ji jj jk lg jm jn jo lh jq jr js li ju jv jw lj jy jz ka hn dt translated">这就完成了ASP.NET堆芯使用ADO.NET的CRUD操作教程。我希望你喜欢阅读这篇文章，并理解代码是如何工作的。如果您有任何困惑，请仔细阅读您可以从这里下载的所有代码。</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div class="fe ff nr"><img src="../Images/f6a05b100a46100a7fcd75ee8e697119.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*MzlPlzk0ygauLLtxnY2KEg.jpeg"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><strong class="bd jc">Follow ME</strong></figcaption></figure><p id="081d" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">我希望你在这篇教程中发现了一些新的东西来增加你的web开发知识。</p><p id="451e" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">如果是这样，那么别忘了<strong class="jf hv">拍几下</strong>以示喜欢。它不仅会给我的坏脸带来微笑，还会激励我为网站开发者写更多更好的文章。</p><p id="e628" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">和往常一样，<strong class="jf hv">关注我</strong>，每当我在Medium上发表新文章时，就会收到通知。</p><blockquote class="lq"><p id="19f7" class="lr ls hu bd lt lu lv lw lx ly lz ka ek translated"><em class="ns">我还发表了另一篇关于HACKERNOON的教程，你也会想看的——</em><a class="ae ki" href="https://hackernoon.com/7-common-web-development-problems-which-every-developer-from-beginners-to-experts-should-know-with-47a7d2e9367f" rel="noopener ugc nofollow" target="_blank">从初学者到专家的每个开发者都应该知道的7个常见的Web开发问题【多解】</a></p></blockquote></div></div>    
</body>
</html>