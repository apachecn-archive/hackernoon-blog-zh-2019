<html>
<head>
<title>Pass Props to React Router’s Link Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过道具来反应路由器的链接组件</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/pass-props-to-react-routers-link-component-2eebda7a63e1?source=collection_archive---------10-----------------------#2019-01-02">https://medium.com/hackernoon/pass-props-to-react-routers-link-component-2eebda7a63e1?source=collection_archive---------10-----------------------#2019-01-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/246c8c9431b07c8f42523875e15deb52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WanzIfpXpwsDKSSHz6xQOw.jpeg"/></div></div></figure><p id="b673" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通常，当使用React Router构建应用程序时，您需要通过链接组件向新路由传递属性。在这篇文章中，我们将分析这个过程是如何工作的。</p><figure class="ka kb kc kd fq iv"><div class="bz el l di"><div class="ke kf l"/></div></figure><p id="0faf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有两种不同的方式将数据从<code class="eh kg kh ki kj b">Link</code>组件传递到正在呈现的新路径。第一个是通过URL参数，第二个是通过<code class="eh kg kh ki kj b">state</code>。</p><p id="9e35" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，我们来看看URL参数。如果你读过我们的<a class="ae kk" href="https://tylermcginnis.com/react-router-url-parameters/" rel="noopener ugc nofollow" target="_blank"> URL参数</a>帖子，你会对这个例子很熟悉。假设我们负责构建呈现Twitter的<a class="ae kk" href="https://twitter.com/tylermcginnis" rel="noopener ugc nofollow" target="_blank">个人资料</a>页面的<code class="eh kg kh ki kj b">Route</code>。如果使用React路由器创建，该路由可能如下所示</p><pre class="ka kb kc kd fq kl kj km kn aw ko dt"><span id="facb" class="kp kq hu kj b fv kr ks l kt ku">&lt;Route path='/:handle' component={Profile} /&gt;</span></pre><p id="3639" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">注意<code class="eh kg kh ki kj b">handle</code>将是动态的。它可以是从<code class="eh kg kh ki kj b">tylermcginnis</code>或<code class="eh kg kh ki kj b">dan_abramov</code>到<code class="eh kg kh ki kj b">realDonaldTrump</code>的任何东西。</p><p id="4970" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因此，在我们的应用程序中，我们可能有一个类似这样的<code class="eh kg kh ki kj b">Link</code>组件</p><pre class="ka kb kc kd fq kl kj km kn aw ko dt"><span id="587b" class="kp kq hu kj b fv kr ks l kt ku">&lt;Link to='/tylermcginnis'&gt;Tyler McGinnis&lt;/Link&gt;</span></pre><p id="7c30" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果点击，用户将被带到<code class="eh kg kh ki kj b">/tylermcginnis</code>并且<code class="eh kg kh ki kj b">Profile</code>组件将能够从<code class="eh kg kh ki kj b">props.match.params.handle</code>访问动态句柄(<code class="eh kg kh ki kj b">tylermcginnis</code>)。</p><pre class="ka kb kc kd fq kl kj km kn aw ko dt"><span id="d4a4" class="kp kq hu kj b fv kr ks l kt ku">class Profile extends React.Component {<br/>  state = {<br/>    user: null<br/>  }<br/>  componentDidMount () {<br/>    const { handle } = this.props.match.params</span><span id="6a9d" class="kp kq hu kj b fv kv ks l kt ku">    fetch(`<a class="ae kk" href="https://api.twitter.com/user/${handle}`" rel="noopener ugc nofollow" target="_blank">https://api.twitter.com/user/${handle}`</a>)<br/>      .then((user) =&gt; {<br/>        this.setState(() =&gt; ({ user }))<br/>      })<br/>  }<br/>  render() {<br/>    ...<br/>  }<br/>}</span></pre><p id="ccbe" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">URL参数很好，但是它们并不是真正用来从一个路由到另一个路由获取数据的，因为它们仅限于字符串。如果我们不只是想传递一个字符串，而是想传递一个稍微复杂一点的东西，比如一个对象或者一个数组，会怎么样？使用URL参数就没有办法做到这一点。这就把我们带到了从一个路由向另一个路由传递数据的第二种方式，那就是使用<code class="eh kg kh ki kj b">state</code>。</p><p id="064e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">回到我们之前的例子，如果当用户点击<code class="eh kg kh ki kj b">Link</code>时，我们想传递用户从某条路线到<code class="eh kg kh ki kj b">Profile</code>组件，该怎么办？React路由器为我们提供了一种方法，API如下所示</p><pre class="ka kb kc kd fq kl kj km kn aw ko dt"><span id="4883" class="kp kq hu kj b fv kr ks l kt ku">&lt;Link to={{<br/>  pathname: '/tylermcginnis',<br/>  state: {<br/>    fromNotifications: true<br/>  }<br/>}}&gt;Tyler McGinnis&lt;/Link&gt;</span></pre><p id="4811" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，为该路线呈现的组件(在本例中为<code class="eh kg kh ki kj b">Profile</code>)将能够通过访问<code class="eh kg kh ki kj b">props.location.state</code>来访问<code class="eh kg kh ki kj b">fromNotifications</code>。</p><pre class="ka kb kc kd fq kl kj km kn aw ko dt"><span id="e15e" class="kp kq hu kj b fv kr ks l kt ku">class Profile extends React.Component {<br/>  state = {<br/>    user: null<br/>  }<br/>  componentDidMount () {<br/>    const { handle } = this.props.match.params<br/>    const { fromNotifications } = this.props.location.state</span><span id="000f" class="kp kq hu kj b fv kv ks l kt ku">    fetch(`<a class="ae kk" href="https://api.twitter.com/user/${handle}`" rel="noopener ugc nofollow" target="_blank">https://api.twitter.com/user/${handle}`</a>)<br/>      .then((user) =&gt; {<br/>        this.setState(() =&gt; ({ user }))<br/>      })<br/>  }<br/>  render() {<br/>    ...<br/>  }<br/>}</span></pre><p id="2374" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">概括地说，有两种方法可以将数据从一个<code class="eh kg kh ki kj b">Link</code>传递到新的路由:URL参数和<code class="eh kg kh ki kj b">state</code>。URL参数对字符串非常有用，但之后就失效了。通过让<code class="eh kg kh ki kj b">Link</code>的<code class="eh kg kh ki kj b">to</code>支持一个对象，你可以在<code class="eh kg kh ki kj b">state</code>属性下传递任何你需要的数据，并且这些数据可以在<code class="eh kg kh ki kj b">props.location.state</code>下的新路径中被访问。</p></div><div class="ab cl kw kx hc ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hn ho hp hq hr"><p id="c131" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ld">这篇文章最初发表在tylermcginnis.com</em><em class="ld">的</em> <a class="ae kk" href="https://tylermcginnis.com/react-router-pass-props-to-link/" rel="noopener ugc nofollow" target="_blank"> <em class="ld">上，作为他们</em> </a><a class="ae kk" href="https://tylermcginnis.com/courses/react-router/" rel="noopener ugc nofollow" target="_blank"> <em class="ld"> React路由器</em> </a> <em class="ld">课程的一部分。</em></p></div></div>    
</body>
</html>