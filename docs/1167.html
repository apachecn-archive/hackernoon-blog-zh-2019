<html>
<head>
<title>Planning to Switch Site From Html to Gatsby?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">计划将网站从 Html 转换到 Gatsby？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/creating-a-portfolio-with-gatsby-and-reactjs-beware-caa290aa5c00#2019-02-18">https://medium.com/hackernoon/creating-a-portfolio-with-gatsby-and-reactjs-beware-caa290aa5c00#2019-02-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="ddf4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">这是我和盖茨比和雷卡特斯</em>一起建立投资组合时学到的东西</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/0ec2240aafc4f998013dc82cb24ac03b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h1pmDDz3GBKLcgZCPHl4dw.png"/></div></div></figure><p id="0dbb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">WordPress 时代已经一去不复返了。即使做了 3 年的后端开发人员，玩 PHP 仍然困扰着我。我认为对于大多数 Python 开发者来说都是如此。此外，谁会想要一个单页组合沉重的网站呢？</p><h1 id="5288" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">为什么我讨厌 Wordpress？</h1><ol class=""><li id="7efa" class="la lb hu it b iu lc iy ld jc le jg lf jk lg jo lh li lj lk dt translated">嗯，咄…这是 PHP</li><li id="4666" class="la lb hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">我把我的博客移到了 medium，因此我想要的只是一个轻量级的单页网站。</li><li id="dffc" class="la lb hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">现在博客被转移到了媒体上，我不再需要在任何地方托管我的网站，这意味着我不需要为服务器付费。</li><li id="197f" class="la lb hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">在某种程度上，我花在弄清楚一个插件和一个模板上的时间太多了，以至于我决定自己写东西会更好。</li></ol><h1 id="fbd7" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">为什么是盖茨比？</h1><ol class=""><li id="5c6f" class="la lb hu it b iu lc iy ld jc le jg lf jk lg jo lh li lj lk dt translated">盖茨比是一个基于<a class="ae lq" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank">反应</a>、<a class="ae lq" href="https://graphql.org/learn/" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>供电的静态站点生成器。大约在同一时间，我想知道反应是什么</li><li id="f1f0" class="la lb hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">虽然它是一个静态的站点生成器，但是它提供了写博客和托管博客的功能。以防将来我改变主意，我不必做彻底的修改。</li><li id="28d3" class="la lb hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">社区很大。因此，如果你被困在某个地方并提出一个问题，Tada…将立即获得帮助。</li></ol><h1 id="f579" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">要记住的 5 件事</h1><h2 id="e650" class="lr kd hu bd ke ls lt lu ki lv lw lx km jc ly lz kq jg ma mb ku jk mc md ky me dt translated">1.模板</h2><p id="e66f" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mf je jf jg mg ji jj jk mh jm jn jo hn dt translated">我一直在寻找一个符合我个性的模板，最终找到了一个完全用 HTML、CSS 和 JS 编写的模板。我将大部分 HTML 转换为 react 组件，但是将 JS 代码转换为 React 是我一直在努力的事情。不要评价我，我以前没有任何反应经验。</p><p id="6854" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">例如，导航栏控件是由 Bootstrap 的 JS 文件控制的。为了整合这些功能，我不得不使用<a class="ae lq" href="https://reactstrap.github.io" rel="noopener ugc nofollow" target="_blank"> ReactStrap </a>，一个带有引导组件的 React 插件。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/0d63314ce30f800a82c7b919656dafa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/format:webp/1*y7aIih4dsFZcX2BxUwu7xA.png"/></div></figure><p id="5b60" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">它在我的模板上看起来怎么样？</strong></p><pre class="jr js jt ju fq mj mk ml mm aw mn dt"><span id="4130" class="lr kd hu mk b fv mo mp l mq mr">&lt;nav class="navbar navbar-expand-lg navbar-light"&gt;</span><span id="3b24" class="lr kd hu mk b fv ms mp l mq mr">....<br/>&lt;/nav&gt;</span></pre><p id="297d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">我该如何改变它？</strong></p><pre class="jr js jt ju fq mj mk ml mm aw mn dt"><span id="5d56" class="lr kd hu mk b fv mo mp l mq mr">class ExtendedNavbar extends React.Component{<br/>    toggle() {<br/>         this.setState({<br/>             isOpen: !this.state.isOpen<br/>         });<br/>    }</span><span id="1aaa" class="lr kd hu mk b fv ms mp l mq mr">render(){<br/>        &lt;Navbar className="navbar-expand-lg" light={true}&gt;<br/>            &lt;NavbarToggler className="navbar-toggler" onClick={this.toggle}/&gt;<br/>            &lt;Collapse isOpen={this.state.isOpen} navbar id="navbarSupportedContent"&gt;<br/>                &lt;Nav className="nav navbar-nav menu_nav ml-auto" navbar&gt;...&lt;/Nav&gt;<br/>            &lt;/Collapse&gt;<br/>       &lt;/Navbar&gt;<br/>}</span></pre><h2 id="ff60" class="lr kd hu bd ke ls lt lu ki lv lw lx km jc ly lz kq jg ma mb ku jk mc md ky me dt translated">2.我的 CSS 在哪里</h2><p id="c0ac" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mf je jf jg mg ji jj jk mh jm jn jo hn dt translated">Gatsby 公开的只是一个包含根组件的<code class="eh mt mu mv mk b">index.js</code>文件。对于一个纯 HTML 背景的人来说，我不知道在哪里添加原始 CSS，我试图将它添加为 react 导入，但它在随机的地方抛出错误。</p><p id="05af" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是后来，我发现<a class="ae lq" href="https://github.com/nfl/react-helmet" rel="noopener ugc nofollow" target="_blank"> React 头盔</a>你可以在那里添加你的 CSS 和 bam！！！我可以看到应用的风格。</p><pre class="jr js jt ju fq mj mk ml mm aw mn dt"><span id="7956" class="lr kd hu mk b fv mo mp l mq mr">&lt;Helmet&gt;<br/>        &lt;title&gt;My Title&lt;/title&gt;<br/>        &lt;meta name="description" content="Helmet application" /&gt;<br/>        &lt;link to css1&gt;<br/>        &lt;link to css2&gt;<br/>&lt;/Helmet&gt;</span></pre><h2 id="a4eb" class="lr kd hu bd ke ls lt lu ki lv lw lx km jc ly lz kq jg ma mb ku jk mc md ky me dt translated">3.它可以工作，但是有延迟</h2><p id="9c75" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mf je jf jg mg ji jj jk mh jm jn jo hn dt translated">我添加 CSS 作为 React 头盔的一部分，我可以在屏幕上看到颜色。我只开心了一天。第二天，我的一个朋友指出，我的 CSS 正在加载，但有延迟，我需要修复它，这是一件大事。我浏览了一个又一个博客，试图解决这个问题。</p><p id="b7a2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因为我使用的是 React-helmet，所以浏览器会等到所有的 React 组件渲染完毕，然后对它们应用样式。解决这个问题的唯一方法是找到<code class="eh mt mu mv mk b">&lt;head&gt;</code>标签并将 CSS 链接粘贴在那里。但是 Gatsby 的<code class="eh mt mu mv mk b">index.js </code>你只渲染需要进入你的站点主体的组件。即。，你不会看到像这样的网页的通常结构。</p><pre class="jr js jt ju fq mj mk ml mm aw mn dt"><span id="1ae8" class="lr kd hu mk b fv mo mp l mq mr">&lt;html&gt;<br/>    &lt;head&gt;&lt;/head&gt;<br/>    &lt;body&gt;&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="74b5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，其中一个博客要求我从默认模板中复制<code class="eh mt mu mv mk b">html.js</code>，并把它放到我的<code class="eh mt mu mv mk b">src</code>文件夹中。耶！！！现在我可以看到<code class="eh mt mu mv mk b">&lt;html&gt;</code>的标记了。现在我知道应该把 CSS 链接放在哪里了。</p><h2 id="34d2" class="lr kd hu bd ke ls lt lu ki lv lw lx km jc ly lz kq jg ma mb ku jk mc md ky me dt translated">4.生产到性能</h2><p id="48c2" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mf je jf jg mg ji jj jk mh jm jn jo hn dt translated">一切都好。现在，它已经准备好生产了。我用 GitLab 页面托管了它。事情看起来很好，但它花了很长时间来加载页面。这是一件大事，因为如果页面在 2 秒内没有加载，人们就会离开。我尝试了一切可能的方法，但谷歌灯塔对我糟糕的表现嗤之以鼻。</p><p id="3fae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在某一点上，我放弃了，哭着寻求帮助，然后我发现了问题所在。这是 GitLab 的页面，他们提供的免费托管服务糟透了。所以我不得不把它从<a class="mw mx gr" href="https://medium.com/u/68f5136d3254?source=post_page-----caa290aa5c00--------------------------------" rel="noopener" target="_blank"> GitLab </a>移到<a class="mw mx gr" href="https://medium.com/u/5250f9d9bd2f?source=post_page-----caa290aa5c00--------------------------------" rel="noopener" target="_blank"> Netlify </a>你猜怎么着？生活又变好了。</p><h2 id="d78e" class="lr kd hu bd ke ls lt lu ki lv lw lx km jc ly lz kq jg ma mb ku jk mc md ky me dt translated">5.GraphQL</h2><p id="5c11" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mf je jf jg mg ji jj jk mh jm jn jo hn dt translated">在接触 MongoDB 之后学习 GraphQL 并不是什么大事。但是 GraphQL 没有 select all <code class="eh mt mu mv mk b">select * from blogs</code>类型的查询。因此，您必须明确您想要从 JSON 数据中获得的参数。</p><pre class="jr js jt ju fq mj mk ml mm aw mn dt"><span id="d515" class="lr kd hu mk b fv mo mp l mq mr">&lt;StaticQuery query={graphql`<br/>     query {<br/>        site {<br/>          siteMetadata {<br/>             projects{<br/>                 name<br/>                 description<br/>                 skills<br/>             }<br/>         }<br/>     }<br/>&lt;/StaticQuery&gt;</span></pre><p id="ad43" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">例如，如果我将 URL 添加到项目中，那么我必须在静态查询中指定它，以便它获取 URL 参数。</p><p id="68f1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有时候我会给<code class="eh mt mu mv mk b">siteMetaData</code>添加一个额外的参数，然后刷新网站一百万次，绞尽脑汁想到底哪里出了问题。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><a href="http://eepurl.com/gaEkp5"><div class="fe ff my"><img src="../Images/b8697b62c7cc0d8dab2ae71c2cac9370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CTMANq40aRtmiBMgtTlXQA.png"/></div></a><figcaption class="mz na fg fe ff nb nc bd b be z ek">Subscribe to newsletter</figcaption></figure><p id="e1f2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">外卖，显然我不会是一个坏的全栈开发人员，但我更喜欢后端，因为那是我的心在哪里。</p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="nd ne l"/></div></figure><p id="a931" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="jp">在</em></strong><a class="ae lq" href="http://bhavaniravi.com" rel="noopener ugc nofollow" target="_blank"><strong class="it hv"><em class="jp">【bhavaniravi.com】</em></strong></a><strong class="it hv"><em class="jp">处查看作品集。</em> </strong></p></div></div>    
</body>
</html>