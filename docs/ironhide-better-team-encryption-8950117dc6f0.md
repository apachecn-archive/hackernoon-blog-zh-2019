# 铁皮:一个更好的团队加密工具

> 原文：<https://medium.com/hackernoon/ironhide-better-team-encryption-8950117dc6f0>

![](img/1d22681b7fe0b5860f6ce1c6b8857b33.png)

几个月前，我们[悄悄地发布了](https://github.com/ironcorelabs/ironhide)一个小工具，它将代理重新加密的能力带到了命令行。代理再加密，我们称之为转换加密，允许你给 Alice 加密数据，Alice 把解密权委托给 Bob。我们把这个公钥代表团带到一个有团体的世界。例如，Charlie 创建了一个组 Beta，然后对该组进行加密。然后，Charlie 独立地向测试组添加成员，包括 Alice 和 Bob。Charlie 可以随时删除他们或让他们成为共同管理员。Alice 和 Bob 可以解密对该组加密的任何内容，也可以对该组加密。这都是使用具有良好安全保证的椭圆曲线公钥加密来完成的。

# 问题是

现有的加密工具，如 GPG，可以很好地保护你自己的数据或向他人发送数据，但当你需要与多人共享文件时，随着时间的推移，你会遇到管理这些文件的问题。

在 IronCore，我们有一些与开发人员共享的秘密。我们的 LetsEncrypt 私有开发者证书就是一个例子。我们每隔几个月更新一次，我们所有的开发人员都需要它们。很久以前，我们用 GPG 加密这些。每次我们都会加密给每个当前的开发者(希望不要忘记任何人)。然后我们在共享驱动器中共享加密文件。对于一个小群体来说，这是可行的；对于一个庞大的群体来说，这将彻底失败。但是即使是一个小团体，这也是有问题的。

当有人离开或者我们雇佣了新的开发人员时，我们必须找到我们所有的秘密，解密它们，加密到更新的人员列表，并重新共享。我们没有办法撤销对以前文件的访问。另外，在我们添加他们之前，有一个让新人设置并发布新的 GPG 密钥的舞蹈。有了 IronHide，他们只需要登录一次，然后你就可以用他们的邮箱地址与他们分享了。

其他团队使用 LastPass 和 1Password 等工具来分享开发者的秘密。这些对于个人使用来说是很棒的工具，但是我从来没有对撤销和轮换的故事感到舒服过。此外，团队版需要付费订阅，这是我们宁愿避免的。

# 铁皮介绍

[IronHide](https://github.com/ironcorelabs/ironhide) 是一个易于使用的开源文件加密和解密命令行工具，用于处理您需要与组共享的文件，其中组成员可能会随着时间的推移而改变，并增长到任意大小。

Example usage

铁皮需要`npm`来安装:

`npm install -g @ironcorelabs/ironhide`。

当您第一次运行它时，将引导您完成一系列步骤，生成您的初始密钥，用一个密码短语保护您的主密钥(这在授权新设备时是需要的)，然后在您的本地计算机上安装设备密钥。任何你使用铁皮的设备都有它自己的一套加密密钥，永远不会离开设备。通过 transform cryptography 的强大功能，您不需要到处复制私钥。在笔记本电脑丢失或被盗的情况下，可以从另一台授权设备远程撤销设备。

一旦你完成了最初的登录步骤——需要这样别人才能通过电子邮件地址给你加密——你就可以开始使用这个工具了。

除非你有朋友也注册了，否则小组就没什么意思了，所以找几个朋友一起试试吧。

## 群体管理

任何人都可以创建群。当您创建一个时，您就是管理员。您可以像这样添加成员:

```
ironhide group:create mygroup
ironhide group:addmembers -u \ 
   john@example.com,karen@example.com mygroup
```

## 文件操作

现在您有了一个组，您可以通过它的名称对它进行加密，就像这样:

```
ironhide file:encrypt -g mygroup secrets.json
```

这个命令对`secrets.json`进行加密，并将加密的内容放在一个`secrets.json.iron`文件中。您可以指定特定的用户、组，并混合搭配多个用户、组。*注意，默认情况下，明文文件保持不变。*你需要使用`-d`标志来自动删除明文源文件。

该组的任何成员都可以用这个命令解密`.iron`文件(同样，如果需要，使用`-d`删除原始文件):

```
ironhide file:decrypt secrets.json.iron
```

# 背景

铁皮所依赖的加密库是 [recrypt-rs](https://github.com/ironcorelabs/recrypt-rs) ，这是一个开源的 rust 库。IronHide 本身是开源的，需要 node.js 安装。**所有的加密代码都经过审核，是恒定时间的(抗侧信道),并且基于已发表和同行评审的论文。**我们将 rust 库[呈现给浏览器](https://github.com/ironcorelabs/ironweb)(通过 web assembly)[、JVM](https://github.com/IronCoreLabs/ironoxide-java) 和节点，还有更多。

**“代理再加密”之所以这样命名，是因为它需要一个半可信的代理，可以把加密给爱丽丝的密文转换成加密给鲍勃的密文，中间不解密密文，也不了解任何人的私钥或加密的数据。**信任的“半”部分来自撤销用例。当您删除某个用户时，您必须信任代理会真正删除使该用户成为组成员的数据。

IronCore 托管“代理”服务(不是网络意义上的代理)，还管理身份、公钥和组。我们这样做是免费的，并承诺继续这样做。我们的动机是传播关于这项技术能做什么的意识。这对于最小化可信系统和管理可信用户非常有用。

从隐私的角度来看，你应该知道我们持有电子邮件地址，组名和成员名单。我们还持有文档 id 和加密文档密钥(EDEKs)。你的数据永远不会离开你的机器，**，即使它离开了，我们也没有办法解密它**。然而，我们知道某个地方有一个文档与一些用户和组共享，并且我们知道组成员的电子邮件地址。如果这对于您的用例来说是太多的数据泄漏，例如如果您是一名记者或持不同政见者，需要保护您正在与谁通信，而不仅仅是您正在通信的内容，那么 IronHide 不适合您(但底层库仍然可能适合您)。

如果该工具变得流行，我们将努力减少我们可以看到的元数据的数量(向我们发送反馈！)，但是现在，我们已经优先考虑了经常需要元数据可见性来进行报告的业务案例。

# 摘要

IronHide 是一个方便的工具，可以低摩擦地向用户和团体加密文件。这也是一个变换加密(又名代理再加密)以及如何用它来解决难题的实际演示。

如果您对核心技术感兴趣，并且想要构建低信任和零信任解决方案；安全的桌面、移动或 web 应用程序；与数据一起传输的访问控制；没有共享秘密的秘密管理；或类似的，请与我们联系。 ***我们很乐意与您交谈并听取您的反馈。***

**关于 IronCore** : [IronCore](https://ironcorelabs.com/) 是一个数据隐私平台，帮助客户(企业或最终用户)控制他们的数据。IronCore 支持各种数据控制授权方案，包括客户管理的密钥和大规模端到端加密，没有任何麻烦。

*要深入了解变换加密技术，请查看一个* [*短视频概述*](https://www.youtube.com/watch?v=LiWc97duTeo) *或* [*阅读文档*](https://docs.ironcorelabs.com/concepts/transform-encryption) *。*