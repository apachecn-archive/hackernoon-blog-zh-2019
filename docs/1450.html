<html>
<head>
<title>Lightweight real time analytics with Spring Boot + WSO2 Siddhi</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Spring Boot + WSO2神功的轻量级实时分析</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/lightweight-real-time-analytics-with-spring-boot-wso2-siddhi-23f0cbf08e7b?source=collection_archive---------9-----------------------#2019-03-01">https://medium.com/hackernoon/lightweight-real-time-analytics-with-spring-boot-wso2-siddhi-23f0cbf08e7b?source=collection_archive---------9-----------------------#2019-03-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/68436123c70a54b5ca136d81e0d7b88b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6mj4rFmHOm1jJ9MUTLQbww.jpeg"/></div></div></figure><p id="d5e9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> A </strong>您是否正在寻找创建轻量级实时分析引擎的方法？本文解释了如何通过将快速、可嵌入的实时分析库(WSO2 Siddhi)与非常流行的微服务平台Spring Boot相结合来实现这一点。作为奖励，我会告诉你如何在5分钟内完成代码生成！。阅读完本文后，您可以生成一个完整的Java spring boot项目，它具有一个文档化的REST API、友好的、响应性强的前端、基本的spring安全性、全面的测试覆盖和数据库集成，只需几个shell命令。生成的代码将是你实时微服务/应用的基础。</p><p id="ec1c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Jhipster是一个方便的应用程序生成器，可以创建Spring Boot和角度应用程序。Jhipster是开源社区中最好的低代码开发平台之一。Jhipster在短时间内成为非常受欢迎的GitHub。它在服务器端有一个带spring boot的高性能Java栈，前端有angular、bootstrap和react。它通过强大的工作流、构建工具(如Yeoman、Webpack和Maven/Gradle)使项目管理变得简单。许多开发人员个人使用它来生成多个Spring micro服务，这些服务被预先配置为在他们公司的基础设施中工作。但是这篇文章的目的并不是详细解释Jhipster。本文将关注如何为WSO2 Siddhi创建一个Jhipster模块。如果您是Jhipster的新用户，或者想了解更多关于Jhipster的信息，请阅读https://cbornet.github.io/ {<a class="ae ka" href="https://cbornet.github.io/" rel="noopener ugc nofollow" target="_blank"/>}。</p><p id="12ec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可能有一些特定的实时分析(WSO2 Siddhi)设置，希望在Jhipster项目中使用。因为您不想在每个项目中重新发明自己的轮子，所以将所有样板文件抽象到您自己的生成器中是有意义的。在这种情况下，您可以为WSO2 Siddhi构建自己的Jhipster生成器，并将其用于您的每个Jhipster项目。</p><p id="308c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<a class="ae ka" href="https://www.xiges.io/" rel="noopener ugc nofollow" target="_blank"> Xiges.io </a>，我们严重依赖代码生成(使用定制的工具链)来消除大量样板代码，我们倾向于将这些代码编程到每个解决方案/项目/产品中。当我们遇到一个可重复的架构模式时，我们倾向于应用我们的工具链，这样下次我们就不必再编码了。包括工具链在内的大部分工作都是Xiges低代码平台的一部分。</p><p id="54e8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">进行设置</strong></p><p id="3437" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">本节介绍如何构建基本的Jhipster生成器模块。如果您已经知道如何创建jhipster模块，那么您可以跳过这一部分，进入下一节。</strong></p><p id="9e3a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Jhipster模块是一个约曼发电机。此外，这是一个NPM包。作为生成一个基本的约曼生成器(最终将成为我们的jhipster生成器)的第一步，安装<strong class="je hv"> </strong> <a class="ae ka" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> NodeJS </strong> </a>。之后你需要安装<a class="ae ka" href="http://yeoman.io/" rel="noopener ugc nofollow" target="_blank"><strong class="je hv"/></a><strong class="je hv">纱</strong>和<a class="ae ka" href="http://bower.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">凉亭</strong> </a> <strong class="je hv"> </strong>以及用于创建发电机的发电机(yo)。请使用npm执行以下命令。</p><p id="2927" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> npm安装-g发电机-发电机</strong></p><p id="c071" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">国家预防机制安装-约曼</p><p id="1389" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> npm安装-g yo </strong></p><p id="3190" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要检查Yeoman是否安装正确，只需在命令行上输入<strong class="je hv"> yo </strong>命令，它会列出所有已安装的发电机。如果你能在那里找到约曼，你就可以走了。最后，确保你已经安装了git。首先创建一个新目录，您将在其中编写jhipster生成器。这个目录必须命名为<strong class="je hv"> generator-jhipster- &lt;你的模块名(Siddhi) &gt; </strong>。通常情况下，约曼发电机以“<strong class="je hv">发电机-</strong>为前缀，但Jhipster模块以<strong class="je hv">“发电机-Jhipster-</strong>为前缀。按顺序执行以下命令将创建文件夹并生成jhipster模块模板。</p><pre class="kb kc kd ke fq kf kg kh ki aw kj dt"><span id="dc97" class="kk kl hu kg b fv km kn l ko kp"><br/> npm install -g generator-jhipster-module<br/> mkdir generator-jhipster-siddhi<br/> cd generator-jhipster-siddhi<br/> yo jhipster-module</span></pre><p id="3045" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这不是一个真正的JHipster模块，这意味着不能在JHipster应用程序中使用。该模块用于生成一个新模板，为Siddhi编写一个新的JHipster模块。JHipster模块创建JHipster模块。回答问题以生成模块，这样我们就可以实施更改。</p><p id="db3f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">文件结构</strong></p><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kq"><img src="../Images/dfc56d2ff830564d3f07243f595f8684.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*fvZxXIEZgQn2MvDq0b_KUA.png"/></div></div></figure><p id="fc43" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如您所见，我们为生成器本身准备了readme文件和package.json。测试文件夹包含生成器的测试。index.js文件是生成器的入口点。它包含样板文件的模板文件(用于生成实际的搭建)。我们创建了默认生成器。现在我们可以修改它，并添加我们的自定义功能。</p><p id="d68c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">编写WSO2神功发生器的脚本</strong></p><p id="9610" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，我们将检查如何定制我们创建的jhipster生成器，并通过以下步骤在生成器中添加我们自己的特性:</p><ol class=""><li id="f060" class="kr ks hu je b jf jg jj jk jn kt jr ku jv kv jz kw kx ky kz dt translated"><strong class="je hv">设置并导入生成器-jhipster </strong></li></ol><p id="c736" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">index.js文件需要导出generator-jhipster，它将由Yeoman运行。现在，我将清除生成器中的所有内容，从头开始。这是index.js文件之后的样子。</p><pre class="kb kc kd ke fq kf kg kh ki aw kj dt"><span id="b555" class="kk kl hu kg b fv km kn l ko kp">const chalk = require(‘chalk’);<br/>const generator = require(‘yeoman-generator’);<br/>const packagejs = require(‘../../package.json’);</span><span id="24e3" class="kk kl hu kg b fv la kn l ko kp">// Stores JHipster variables<br/>const jhipsterVar = { moduleName: ‘siddhi’ };</span><span id="456b" class="kk kl hu kg b fv la kn l ko kp">// Stores JHipster functions<br/>const jhipsterFunc = {};</span><span id="22f1" class="kk kl hu kg b fv la kn l ko kp">module.exports = generator.extend({</span><span id="3fec" class="kk kl hu kg b fv la kn l ko kp">// all your yeoman code here</span><span id="c570" class="kk kl hu kg b fv la kn l ko kp">});</span></pre><p id="a29a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们将扩展的生成器分配给<em class="lb">模块，导出</em>使其对生态系统可用。这是我们在Node.js中导出模块时使用的典型方法。在我们添加到index.js的每一个方法中，一旦生成器被调用，js就会运行，通常是按顺序运行。一些方法名在这个生成器中有优先权。可用优先级(按运行顺序)依次为:</p><ol class=""><li id="63b1" class="kr ks hu je b jf jg jj jk jn kt jr ku jv kv jz kw kx ky kz dt translated">初始化-初始化你的方法。(获取配置并检查项目当前状态)</li><li id="ba1d" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz kw kx ky kz dt translated">提示—提示选项的用户首选项(调用this.prompt())。</li><li id="96f9" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz kw kx ky kz dt translated">配置—保存配置并配置项目。</li><li id="32db" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz kw kx ky kz dt translated">默认-如果您的方法名与优先级不匹配，则放入该组。</li><li id="fefc" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz kw kx ky kz dt translated">写入—将模板文件复制到输出文件夹并解析(路线、控制器等)。</li><li id="be84" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz kw kx ky kz dt translated">冲突—处理冲突。</li><li id="0b5f" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz kw kx ky kz dt translated">install——安装运行的地方，特别是将maven依赖项添加到目标Jhipster项目pom文件中。(npm，鲍尔)</li><li id="b876" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz kw kx ky kz dt translated">结束—称为最后一次，清理。</li></ol><p id="a3f6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">实现这些方法后，您的文件应该是这样的。</p><figure class="kb kc kd ke fq iv"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="d5f6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Jhipster模块使用了<strong class="je hv">可组合性</strong>，这是Yeoman中的主要功能之一。yeoman generators中的“compose with”(this . compose with())方法允许该生成器与另一个生成器并行运行，并且它可以使用另一个生成器的功能，而不必独自完成所有工作。在上面的例子中，它由“jhipster:modules”子生成器组成，并获得对jhipster的变量和函数的访问。</p><p id="32ab" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">正如您在代码中看到的，我们添加了Jhipster函数(在install()阶段下)来将Maven依赖项添加到pom.xml文件中(addMavenDependency)。还使用了Jhipster全局变量。这些是每个变量的简短定义。</p><pre class="kb kc kd ke fq kf kg kh ki aw kj dt"><span id="1b56" class="kk kl hu kg b fv km kn l ko kp">    <br/>baseName: the name of the application<br/>    <br/>packageName: the Java package name</span><span id="d71a" class="kk kl hu kg b fv la kn l ko kp">angularAppName: the AngularJS application name<br/>    <br/>javaDir: the directory for the Java application, including the            package folder<br/> <br/>resourceDir: the directory containing the Java resources (always src/main/resources)<br/>    <br/>webappDir: the directory containing the Web application (always src/main/webapp)</span></pre><p id="b9eb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以看到java spring boot类和资源文件，添加到<strong class="je hv">编写</strong>()阶段，这是通过调用模板函数完成的(所有java spring boot类将在下一节中描述)。如果您对Jhipster模块中的其他功能感兴趣，请访问—<a class="ae ka" href="https://cbornet.github.io/modules/creating_a_module.html." rel="noopener ugc nofollow" target="_blank">https://cbornet.github.io/modules/creating_a_module.html.</a></p><p id="ca7d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> 2。初始化发电机</strong></p><p id="cedf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们用package.json初始化生成器。在上面的代码中，节点调用require()函数，将本地文件路径作为函数的唯一参数，并获取package.json文件。该文件是Node.js模块清单。我们的package.json文件必须包含以下内容。</p><figure class="kb kc kd ke fq iv"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="705d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我配置了以下内容:</p><ul class=""><li id="21d3" class="kr ks hu je b jf jg jj jk jn kt jr ku jv kv jz lj kx ky kz dt translated">yo:运行约曼发电机的CLI工具。</li><li id="a9d8" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated">生成器-mocha:mocha测试框架的生成器。</li><li id="26a6" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated">gulp:一个前端构建工具。</li><li id="c470" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated">mocha: mocha是Node.js程序的JavaScript测试框架。</li></ul><p id="8fc8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> 3。创建吞咽文件</strong></p><p id="6548" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们使用gulp文件作为我们的构建系统。像Gulp这样的工具通常被称为“构建工具”，因为它们是运行构建web应用程序的任务的工具。您的gulp文件必须是这样的。</p><figure class="kb kc kd ke fq iv"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="04cf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它通常用于执行前端任务，例如:</p><ul class=""><li id="a5be" class="kr ks hu je b jf jg jj jk jn kt jr ku jv kv jz lj kx ky kz dt translated">启动web服务器</li><li id="7299" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated">每当保存文件时自动重新加载浏览器</li><li id="dcd9" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated">使用像Sass或更少的预处理器</li><li id="9d4e" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated">优化CSS、JavaScript和图像等资产</li></ul><p id="85bc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以现在我们已经完成了WSO2神功jhipster生成器的创建基础。但是现在我们必须用实时分析(WSO2神功)配置Spring boot。</p><p id="15eb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">春季启动+实时分析</strong></p><p id="d124" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Spring boot是一个非常流行的基于java的框架，用于构建基于web和企业的应用程序。Spring framework提供了各种各样的特性来满足现代商业需求。Spring boot使得创建独立的、生产级的基于Spring的应用程序变得容易，这些应用程序可以“直接运行”。Spring boot对Spring平台和第三方库的结合持有自己的观点，因此开发人员可以毫不费力地开始。大多数spring boot应用程序都需要一点spring配置。正因为如此，spring boot已经成为低代码开发平台。所以很容易将WSO2神功嵌入到spring boot中。让我们看看它是怎么做的。</p><p id="d129" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在我们进一步深入之前，我们必须了解有关WSO2神功实时分析的主要概念。WSO2 Siddhi是一个java库，它对复杂事件进行实时处理。Siddhi的流SQL语言被用来描述来自数据流的复杂条件。Siddhi能够执行流和复杂事件处理。下图显示了WSO2神功3.0的基本工作流程。</p><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lk"><img src="../Images/ed7fea73231223df644800c520ebcdd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8RZBFmrOpd3RYFMhoCxmDQ.png"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Basic workflow of the WSO2 Siddhi 3.0</figcaption></figure><p id="0e97" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，我们正在Java Spring boot项目中嵌入Siddhi，它允许您使用Siddhi查询语言来执行复杂事件的实时处理，而无需运行WSO2 CEP服务器。</p><p id="6854" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">实现业务服务，增加神功应用后休息服务</strong></p><p id="a8df" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第一步，我们需要定义一个流定义和Siddhi查询。流定义总是定义传入事件的格式，查询定义如下。</p><pre class="kb kc kd ke fq kf kg kh ki aw kj dt"><span id="68b4" class="kk kl hu kg b fv km kn l ko kp">String definition = "define stream TempStream(roomNo int, temperature double, deviceId long);"</span><span id="1944" class="kk kl hu kg b fv la kn l ko kp">String query = "@info(name = 'avgTemperature') " +"from TempStream#window.time(60 sec)  " +"select avg(temperature) as temperature,deviceID " +"group by roomNo " +<br/>"insert into AvgTempStream ;";</span></pre><p id="efb4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">步骤02:创建神功运行时</strong></p><p id="557f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这一步包括通过组合流定义和您在第一步中创建的siddhiAppRuntime的运行时表示。</p><pre class="kb kc kd ke fq kf kg kh ki aw kj dt"><span id="4d8f" class="kk kl hu kg b fv km kn l ko kp">SiddhiManager siddhiManager = new SiddhiManager();<br/>//Generating runtime<br/>SiddhiAppRuntime siddhiAppRuntime = siddhiManager              .createSiddhiAppRuntime(definition+query);</span></pre><p id="dbf3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">神功管理器解析神功app，为你提供神功App运行时间。这个Siddhi应用程序运行时用于向Siddhi应用程序运行时添加回调和输入处理程序。</p><p id="b0c6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">步骤03:注册回拨</strong></p><p id="54d9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">神功有两种类型的回调。</p><ul class=""><li id="28dd" class="kr ks hu je b jf jg jj jk jn kt jr ku jv kv jz lj kx ky kz dt translated">流回调—订阅事件流</li><li id="ac09" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated">查询回调-这是对查询的订阅</li></ul><p id="fe9c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们需要一个回调来从查询中检索输出事件。所以我们可以注册一个对Siddhi应用程序运行时的回调。当结果生成时，它们被发送到这个回调的receive方法。此外，我们可以从事件打印机打印传入的事件，该打印机被添加到回调函数中。</p><p id="c15b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">例如:</p><pre class="kb kc kd ke fq kf kg kh ki aw kj dt"><span id="e454" class="kk kl hu kg b fv km kn l ko kp">siddhiAppRuntime.addCallback("AvgTempStream", new QueryCallback() {<br/>            @Override<br/>            public void receive(Event[] events) {<br/>                EventPrinter.print(<em class="lb">events</em>);<br/>            }<br/>        });</span></pre><p id="d40f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">步骤04:发送事件</strong></p><p id="dc20" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">作为最后一步，您需要将事件流中的事件发送到查询，您需要获得一个输入处理程序，如下例所示。</p><pre class="kb kc kd ke fq kf kg kh ki aw kj dt"><span id="a50e" class="kk kl hu kg b fv km kn l ko kp">//Retrieving input handler to push events into Siddhi        </span><span id="2ae9" class="kk kl hu kg b fv la kn l ko kp">InputHandler inputHandler =siddhiAppRuntime .getInputHandler("StockEventStream");         </span><span id="d7b2" class="kk kl hu kg b fv la kn l ko kp">//Starting event processing        </span><span id="368b" class="kk kl hu kg b fv la kn l ko kp">siddhiAppRuntime.start();         </span><span id="b917" class="kk kl hu kg b fv la kn l ko kp">//Sending events to Siddhi        </span><span id="e2c5" class="kk kl hu kg b fv la kn l ko kp">inputHandler.send(new Object[]{2, 23.0, 100L});</span></pre><p id="42e0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">关于业务服务的准确实现和为Siddhi应用程序添加POST Rest服务，请参考本文底部的这些文件。</p><figure class="kb kc kd ke fq iv"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="f5d9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">结论</strong></p><p id="4714" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">用WSO2 Siddhi创建JHipster模块是简化微服务生成的一种简单方法，尤其是当您的微服务使用相同的配置时。因为它是一个模块，所以很容易添加功能并满足您的需求。我们的公司<a class="ae ka" href="https://www.xiges.io/" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">Xiges Solutions</strong></a><strong class="je hv"/>使用这种实时分析对我们的IOT产品进行实时预测和跟踪。</p><p id="daa6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里是GitHub知识库，包含了这篇博客中使用的模块。请随意使用它，并根据您公司的要求进行更改！</p><p id="083c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在您可以使用这个命令下载jhipster生成器</p><pre class="kb kc kd ke fq kf kg kh ki aw kj dt"><span id="38cd" class="kk kl hu kg b fv km kn l ko kp">npm install g generator-jhipster-siddhi</span></pre><p id="455c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后在jhipster生成的应用程序上运行该模块。</p><pre class="kb kc kd ke fq kf kg kh ki aw kj dt"><span id="94d3" class="kk kl hu kg b fv km kn l ko kp">yo jhipster-siddhi</span></pre><p id="01b2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">很快，该模块将在jhipster市场上推出。(JHipster团队验证后)</p><p id="76c9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">链接为源代码-<a class="ae ka" href="https://github.com/xiges/generator-jhipster-siddhi." rel="noopener ugc nofollow" target="_blank">https://github.com/xiges/generator-jhipster-siddhi.</a></p><p id="1423" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">国家预防机制登记册的链接-<a class="ae ka" href="https://www.npmjs.com/package/generator-jhipster-siddhi." rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/generator-jhipster-siddhi.</a></p><p id="c371" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您有任何建议或想在模块中看到的增强，请在Xiges git hub仓库中创建一个问题—<a class="ae ka" href="https://github.com/xiges/generator-jhipster-siddhi/issues" rel="noopener ugc nofollow" target="_blank">https://github.com/xiges/generator-jhipster-siddhi/issues</a></p><p id="75d7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个题目我就说这么多。感谢阅读。下次见！</p><p id="abe9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">参考文献</strong></p><ul class=""><li id="f1c0" class="kr ks hu je b jf jg jj jk jn kt jr ku jv kv jz lj kx ky kz dt translated"><a class="ae ka" href="https://yeoman.io/authoring/composability.html" rel="noopener ugc nofollow" target="_blank">https://yeoman.io/authoring/composability.html</a></li><li id="fda6" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated"><a class="ae ka" href="https://www.jhipster.tech/modules/creating-a-module" rel="noopener ugc nofollow" target="_blank">https://www.jhipster.tech/modules/creating-a-module</a></li><li id="a5e8" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated"><a class="ae ka" href="https://www.baeldung.com/jhipster" rel="noopener ugc nofollow" target="_blank">https://www.baeldung.com/jhipster</a></li><li id="808a" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated"><a class="ae ka" href="https://yeoman.io/authoring/file-system.html" rel="noopener ugc nofollow" target="_blank">https://yeoman.io/authoring/file-system.html</a></li><li id="b679" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated"><a class="ae ka" href="https://gulpjs.com/docs/en/getting-started/javascript-and-gulpfiles" rel="noopener ugc nofollow" target="_blank">https://gulpjs . com/docs/en/getting-started/JavaScript-and-gulpfiles</a></li><li id="234a" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated"><a class="ae ka" href="https://siddhi-io.github.io/siddhi/#try-siddhi-with-wso2-stream-processor" rel="noopener ugc nofollow" target="_blank">https://siddhi-io . github . io/siddhi/# try-siddhi-with-wso2-stream-processor</a></li><li id="5883" class="kr ks hu je b jf lc jj ld jn le jr lf jv lg jz lj kx ky kz dt translated"><a class="ae ka" href="https://docs.wso2.com/display/CEP400/SiddhiQL+Guide+3.0" rel="noopener ugc nofollow" target="_blank">https://docs.wso2.com/display/CEP400/SiddhiQL+Guide+3.0</a></li></ul></div></div>    
</body>
</html>