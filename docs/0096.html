<html>
<head>
<title>How our kubernetes journey saved us $1 million dollars</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们的kubernetes之旅如何为我们节省了100万美元</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-our-kubernetes-journey-saved-us-1-million-dollars-cede771f1f2b?source=collection_archive---------5-----------------------#2019-01-04">https://medium.com/hackernoon/how-our-kubernetes-journey-saved-us-1-million-dollars-cede771f1f2b?source=collection_archive---------5-----------------------#2019-01-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="d2ac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">2018年初，我们的工程团队踏上了改造基础设施和工具的征程。本质上，我们的<em class="jp">开发者体验</em>远非我们所需要的。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/27e9d162b63dfbb7dedaa9b782dff901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*te5fg01CzSyPPAC8eew8ug.jpeg"/></div></div></figure><p id="22be" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">糟糕的开发体验导致:工程师们绕过管道直接将他们的代码变更同步到EC2。单元测试很少使用，因为管道需要很长时间才能给出反馈。调试并不容易。如果在产品中发现了一个关键的bug，那么祝你好运，在顺利的日子里，你可以在1小时内修复它。</p><p id="569f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们想做得更好，我们的目标是…</p><blockquote class="kc"><p id="5958" class="kd ke hu bd kf kg kh ki kj kk kl jo ek translated">快速移动，让管道在不到5分钟的时间内交付软件</p></blockquote><p id="c57c" class="pw-post-body-paragraph ir is hu it b iu km iw ix iy kn ja jb jc ko je jf jg kp ji jj jk kq jm jn jo hn dt translated">…这就是我们开始kubernetes之旅的原因。</p><p id="7a82" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> TLDR </strong>:想节省100万美元并拥有一个快乐的开发团队吗？提供正确的工具。</p><h1 id="94b8" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo dt translated">那么，我们真的节省了100万美元吗？</h1><p id="b9e5" class="pw-post-body-paragraph ir is hu it b iu lp iw ix iy lq ja jb jc lr je jf jg ls ji jj jk lt jm jn jo hn dt translated">撇开明显的点击诱饵标题不谈，如果我们只看我们的交付渠道，而忘记我们降低的基础设施成本，我们可以节省这笔钱。我们所有的运输管道都是用竹子(一种古老的亚特兰蒂斯产品)铺设的。它看起来像这样:</p><ul class=""><li id="7818" class="lu lv hu it b iu iv iy iz jc lw jg lx jk ly jo lz ma mb mc dt translated">代码推送</li><li id="05fe" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">手动运行并点击竹子中的运行构建🐌</li><li id="b241" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">竹子造了一个EC2 AMI🐌</li><li id="5856" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">启动负载平衡器、EC2、RDS数据库、Memcache等(以及🐌)</li></ul><p id="468f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个过程平均需要大约45分钟(如果开发人员幸运地没有排在其他构建的后面)。</p><p id="fb5c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们搬到了kubernetes/circleci，看起来是这样的:</p><ul class=""><li id="24af" class="lu lv hu it b iu iv iy iz jc lw jg lx jk ly jo lz ma mb mc dt translated">代码推送</li><li id="a87c" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">触发自动构建</li><li id="b488" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">单元测试运行(1分钟)⚡</li><li id="f26c" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">建立一个码头工人形象，并推动(2分钟)⚡</li><li id="7ff4" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">部署到kubernetes集群(1分钟)</li></ul><p id="ec91" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">区别在于，没有额外的EC2，没有额外的负载平衡器和4分钟的时间表。</p><h1 id="bfdb" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo dt translated">那一百万美元呢</h1><p id="e0e4" class="pw-post-body-paragraph ir is hu it b iu lp iw ix iy lq ja jb jc lr je jf jg ls ji jj jk lt jm jn jo hn dt translated">我们的团队大约有28名工程师，假设其中25人每天做5次构建，一年265天。我们的构建快了40分钟。快速计算:</p><blockquote class="mi mj mk"><p id="51a3" class="ir is jp it b iu iv iw ix iy iz ja jb ml jd je jf mm jh ji jj mn jl jm jn jo hn dt translated">5次构建x 40分钟节省= 200分钟x 25名工程师= 5，000分钟x一年265天= 1，325，000分钟/ 60 = 22，083小时x平均每小时50美元员工成本=<strong class="it hv">110万美元</strong></p></blockquote><p id="ec13" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我听到你说，“但是工程师不是坐以待毙，他们是多任务的”。</p><p id="6a36" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">他们这样做，但回头看；花了整整45分钟才发现一个构建在AWS上运行时是否有效，当时我们没有docker。现在，工程师可以确信他们的测试通过了，代码在标准化的管道上工作，并在推送代码的4分钟内与其他团队共享开发URL。</p><p id="73b7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">迁移到Circle CI/Kubernetes为我们提供了一个现代化的渠道，团队可以引以为豪。该团队可以在几分钟内解决关键的生产问题，而不是几个小时。</p><h1 id="7bc1" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo dt translated">心中要有一个目标，提供实现目标的工具，并让您的工程师快速前进。</h1></div></div>    
</body>
</html>