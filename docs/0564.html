<html>
<head>
<title>How to Integrate Next.Js and Hasura</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">接下来如何整合。Js和哈苏拉</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-integrate-next-js-and-hasura-4a964424db6d?source=collection_archive---------7-----------------------#2019-01-23">https://medium.com/hackernoon/how-to-integrate-next-js-and-hasura-4a964424db6d?source=collection_archive---------7-----------------------#2019-01-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/7e8858aa241c4ec9978d30be42b384cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aRlgSQoiVLAC3w22.png"/></div></div></figure><p id="d4f7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在您开始这个项目之前，我假设您对Next.js和Hasura有基本的了解。在这篇博客中，我将展示如何整合Next.js和Hasura。</p><h1 id="a9d1" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">接下来是什么。Js？</h1><p id="4f5f" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated"><strong class="je hv"> Next.js </strong>是由<a class="ae ld" href="https://zeit.co/" rel="noopener ugc nofollow" target="_blank"> Zeit </a>创建的JavaScript框架。它允许您使用React构建服务器端呈现和静态web应用程序。这是建立你下一个网站的好工具。它有许多很棒的特性和优点，可以让Nextjs成为构建下一个web应用程序的首选。</p><p id="242f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">开始使用Next.js不需要任何webpack或类似的配置，它自带配置。您所需要的就是运行<code class="eh le lf lg lh b">yarn run dev</code>并开始构建您的应用程序😃。</p><p id="7654" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">既然你已经准备好了，让我们开始吧！</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff li"><img src="../Images/1b807ad418d5be37863a54120a49cab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/0*qVg_uAZ10kM7lvG8"/></div></figure><h1 id="9c15" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">如何建立下一个？Js app？</h1><p id="5eae" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">我希望你知道create-react-app，就像我们有create-next-app一样，它将完成设置Next.js项目所需的所有工作😉。</p><p id="024e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您使用yarn或npx，有一个内置的软件包可以创建next.js应用程序，它们是:</p><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="6f66" class="lr kb hu lh b fv ls lt l lu lv">yarn create next-app my-app</span><span id="d540" class="lr kb hu lh b fv lw lt l lu lv">npx create-next-app my-app</span></pre><p id="4545" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您使用npm，那么应该安装<strong class="je hv"> create-next-app </strong>包，使用该包可以设置一个新项目。</p><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="966a" class="lr kb hu lh b fv ls lt l lu lv">npm install -g create-next-app</span><span id="214d" class="lr kb hu lh b fv lw lt l lu lv">create-next-app my-app</span></pre><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/e4e8cf9e9b4de0da2002695142cd1c2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*X17ZjRG4x_B7jwDREXOqKQ.png"/></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">create-next-app</figcaption></figure><p id="1a9a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">正如您在图像中看到的，使用一个命令，所有的项目文件都已准备就绪。一旦项目设置完毕，将会显示启动和构建项目所需的命令。</p><p id="8da6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">构建项目运行<code class="eh le lf lg lh b">yarn build</code></p><p id="23cc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要启动本地服务器，请运行<code class="eh le lf lg lh b">yarn dev</code></p><p id="97bc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在生产运行中启动服务器<code class="eh le lf lg lh b">yarn start</code></p></div><div class="ab cl mc md hc me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hn ho hp hq hr"><p id="4d10" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们已经准备好了基本项目，让我们安装hasura graphQL引擎。</p><p id="5da4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们可以使用<a class="ae ld" href="https://heroku.com/deploy?template=https://github.com/hasura/graphql-engine-heroku" rel="noopener ugc nofollow" target="_blank">一键式</a>部署选项轻松设置hasura-graphQL引擎。一旦它被部署，你可以去部署的网址，你会有这样的东西。</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mj"><img src="../Images/02b802ea0c30419903bff4c7837a4d73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_fLcC6ttPsxm2R7ew8xIvA.png"/></div></div></figure><p id="f501" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在主页顶部记下网址。</p><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="fd64" class="lr kb hu lh b fv ls lt l lu lv"><a class="ae ld" href="https://hasuragraphql-engine.herokuapp.com/v1alpha1/graphql" rel="noopener ugc nofollow" target="_blank">https://hasuragraphql-engine.herokuapp.com/v1alpha1/graphql</a></span></pre><p id="6c37" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">单击顶部栏中的数据，并创建一个新表，如下所示</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mk"><img src="../Images/f60af9de68c21e7e35d432193b7315b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pc-pI_R4DKE7A2NJJHXBYw.png"/></div></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">author table</figcaption></figure><p id="b725" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在表中添加一个虚拟数据</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/d7e06c7275e8538c312c857142433eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*0p0Vj7qOPWlhY8KnePlaoA.png"/></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">Adding a dummy author</figcaption></figure><p id="c988" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦hasura引擎安装完毕，我们就可以继续连接Hasura和Next.js了。</p><p id="f7cf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为此，我们必须安装<strong class="je hv"> graphql-tag </strong>、<strong class="je hv"> next-apollo </strong>和<strong class="je hv"> react-apollo。</strong></p><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="b112" class="lr kb hu lh b fv ls lt l lu lv">yarn add graphql-tag next-apollo react-apollo</span></pre><p id="0d5f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦安装了上面的包，在根目录下创建一个config.js文件，并添加以下代码</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/12761257044af4b9afd11fd553120c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*8MlUQ-bemwVpJkr-2Y8RcA.png"/></div></figure><p id="b3d4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">将uri替换为您部署的引擎所指向的url。这将为<code class="eh le lf lg lh b">withData</code>配置一个<code class="eh le lf lg lh b">httpLink</code>来连接到一个有效的GraphQL服务器URL。</p><p id="ff8f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下一个任务是用来自<code class="eh le lf lg lh b">react-apollo</code>的<code class="eh le lf lg lh b">Query</code>组件包装您的页面组件，以便在服务器端呈现页面时可以获取适当的数据。</p><h2 id="2f58" class="lr kb hu bd kc mn mo mp kg mq mr ms kk jn mt mu ko jr mv mw ks jv mx my kw mz dt translated">GraphQL查询</h2><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="29bd" class="lr kb hu lh b fv ls lt l lu lv">const query = gql`<br/>   query {<br/>    author {<br/>     id<br/>     name<br/>    }<br/>   }<br/>`</span></pre><h2 id="c456" class="lr kb hu bd kc mn mo mp kg mq mr ms kk jn mt mu ko jr mv mw ks jv mx my kw mz dt translated">用查询包装组件</h2><pre class="lj lk ll lm fq ln lh lo lp aw lq dt"><span id="776e" class="lr kb hu lh b fv ls lt l lu lv">&lt;Query query={ query } fetchPolicy={ 'cache-and-network' }&gt;<br/>    {({ loading, data: { author:authors }}) =&gt; {<br/>      return (<br/>        &lt;div&gt;<br/>          &lt;div&gt;<br/>           {authors.map((a, i) =&gt; (<br/>              &lt;div key={i}&gt;<br/>               &lt;h2&gt;{a.name}&lt;/h2&gt;<br/>              &lt;/div&gt;<br/>           ))}<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      );<br/>    }}<br/>&lt;/Query&gt;</span></pre><p id="6187" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦这些代码被组合起来，我们将得到类似这样东西👇。</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff na"><img src="../Images/a7a449bad9fb3ea989ce308448622df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*CALyoF0vqkAqn-Bj736EXg.png"/></div></figure><p id="03d8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">运行<code class="eh le lf lg lh b">yarn run dev</code>,你的hasura-next.js应用就启动并运行了。</p><p id="0eaf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在你的浏览器中打开<a class="ae ld" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">http://localhost:3000</strong></a>，你会在主页中看到我们在hasura引擎中创建的作者。</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff nb"><img src="../Images/29e8b8272b4fff802c4793d1a4e2ee2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*QmZmp76uQ5aIH-ce07B0qA.png"/></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">Authors page</figcaption></figure><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/b2b47e232ce7d8a22a87568974d4792b.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*4E8t3_H4mZzTTU8N"/></div></figure><p id="f651" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">就是这样，使用Hasura Graphql引擎创建Next.js应用程序是如此简单🙌。您可以扩展它以包括更多的功能和更好的外观和感觉。使用<code class="eh le lf lg lh b">yarn build</code>部署您的应用程序，这将为您提供静态版本，可以使用Github或Netlify轻松部署。</p><h1 id="8937" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">关于我</h1><p id="1c65" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">我叫<strong class="je hv"> Aswin VB </strong>。我是阿拉哈巴德印度信息技术学院的一名本科生，正在攻读信息技术的学士学位。</p><p id="c392" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我喜欢创造和学习新事物，当我有空的时候我总是这样做。我喜欢用J <strong class="je hv"> avaScript和Python </strong>编写代码。</p><p id="8aef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以在<a class="ae ld" href="https://twitter.com/aswinvb1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae ld" href="https://github.com/aswinzz" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上关注我。</p></div></div>    
</body>
</html>