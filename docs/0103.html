<html>
<head>
<title>Lessons from CodeSandbox: Send User Feedback to Airtable using React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CodeSandbox的经验:使用React向Airtable发送用户反馈</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/lessons-from-codesandbox-send-user-feedback-to-airtable-using-react-d15031a1e0fc?source=collection_archive---------12-----------------------#2019-01-04">https://medium.com/hackernoon/lessons-from-codesandbox-send-user-feedback-to-airtable-using-react-d15031a1e0fc?source=collection_archive---------12-----------------------#2019-01-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk ir is it iu"><div class="bz el l di"><div class="iv iw l"/></div></figure><figure class="ix iy iz ja fq iu"><div class="bz el l di"><div class="iv iw l"/></div></figure><p id="9346" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><a class="ae jz" href="https://codesandbox.io" rel="noopener ugc nofollow" target="_blank"> <strong class="jd hv"> CodeSandbox </strong> </a> <strong class="jd hv">牛逼。</strong></p><p id="996c" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">它是一个完整的IDE(集成开发环境),用于运行在你的浏览器中的网络应用。</p><p id="3561" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">不过最棒的是，它是开源的。开源项目最大的好处是我们可以从他们的源代码中学习。</p><p id="8172" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">在这个系列中，我将分解使CodeSandbox变得伟大的代码，以便找到一些可以在您自己的项目中使用的技巧。有点像ifixit，但是针对JavaScript。</p><figure class="ix iy iz ja fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="fe ff ka"><img src="../Images/87d162fcec0be16fc9a472fd12060119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Wq1GrH_RZ4_sAvXktqNDQ.jpeg"/></div></div><figcaption class="kh ki fg fe ff kj kk bd b be z ek">A series about taking code apart.</figcaption></figure><ul class=""><li id="89e1" class="kl km hu jd b je jf ji jj jm kn jq ko ju kp jy kq kr ks kt dt translated"><strong class="jd hv">第1部分:使用React向Airtable发送用户反馈</strong></li><li id="cf31" class="kl km hu jd b je ku ji kv jm kw jq kx ju ky jy kq kr ks kt dt translated">第2部分:尊重你的用户不要在React中跟踪浏览器设置(即将推出)</li><li id="50e6" class="kl km hu jd b je ku ji kv jm kw jq kx ju ky jy kq kr ks kt dt translated">第3部分:在React中使用brain和MobX管理复杂的应用程序逻辑(即将推出)</li><li id="7ee5" class="kl km hu jd b je ku ji kv jm kw jq kx ju ky jy kq kr ks kt dt translated">第4部分:使用“模板类”将数据和功能组合在一起(即将推出)</li></ul><h1 id="4613" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">拆了它！</h1><p id="1179" class="pw-post-body-paragraph jb jc hu jd b je lx jg jh ji ly jk jl jm lz jo jp jq ma js jt ju mb jw jx jy hn dt translated">我们将查看codesandbox-client存储库(Github链接<a class="ae jz" href="https://github.com/CompuIves/codesandbox-client" rel="noopener ugc nofollow" target="_blank">这里</a>如果你想在你自己的代码编辑器中跟随)。给人的第一印象是，这是一个相当大的JavaScript库。<a class="ae jz" href="https://lernajs.io/" rel="noopener ugc nofollow" target="_blank"> lerna </a>用于将代码库分割成易于管理的小部分。</p><p id="bf1b" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">对于这个拆卸系列，我们将查看<code class="eh mc md me mf b">app</code>包(位于<a class="ae jz" href="https://github.com/CompuIves/codesandbox-client/tree/master/packages/app" rel="noopener ugc nofollow" target="_blank">包/应用文件夹</a>)。<code class="eh mc md me mf b">app</code>包包含完整的CodeSandbox应用程序以及您可能在Medium或其他网站上看到的嵌入式应用程序。React 16.5.2里写的。</p><p id="842d" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">撰写本文时的存储库提交散列是<code class="eh mc md me mf b">450afd6</code>。</p><h1 id="87aa" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">我们❤️用户反馈</h1><p id="d979" class="pw-post-body-paragraph jb jc hu jd b je lx jg jh ji ly jk jl jm lz jo jp jq ma js jt ju mb jw jx jy hn dt translated">良好的用户反馈很重要，因为它有助于我们开发人员优先考虑下一个要构建的功能或要修复的bug。当用户使用你的应用程序时，获得反馈可能就像和他们坐在一起一样简单，但是在你的应用程序中建立反馈提交渠道<em class="mg">意味着你将获得一连串的错误报告和功能请求，而不需要花时间与人面谈。</em></p><p id="1266" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><a class="ae jz" href="https://airtable.com" rel="noopener ugc nofollow" target="_blank"><strong class="jd hv">Airtable</strong></a><strong class="jd hv">真的很好收集反馈。</strong></p><p id="186e" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">如果你以前没有用过它，它有点像微软的Excel或者谷歌的Sheets，但是使用了类固醇。它感觉有点不像电子表格应用程序，更像一个合适的数据库。</p><p id="02cd" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">这有利于反馈，因为它是为不太懂技术的人设计的。您的产品经理或UI设计师可以轻松地访问数据，而不是像向MongoDB发送反馈那样，在那里您可能需要帮助他们。</p><p id="aaab" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">CodeSandbox收集用户反馈的方式如下:</p><div class="ix iy iz ja fq ab cb"><figure class="mh iu mi mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><img src="../Images/7e3b8ea6024454aee3e5093cada23dca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*jNbKmFy3XZQwoi9h11GfYA.png"/></div></figure><figure class="mh iu mn mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><img src="../Images/049f58bb9e2ce1ec0e135ce8fd142fd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*gqOduR49NgPI90Ir4sdmvQ.png"/></div></figure></div><div class="ab cb"><figure class="mh iu mn mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><img src="../Images/487d49252d0a2ac56bc242b197ee27fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*7pzN_tGoAb_CoAFzKo43aw.png"/></div></figure><figure class="mh iu mi mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><img src="../Images/24507a30234d0784388fe72953377929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*zDutRPQMlE3wUqaTAVrylA.png"/></div><figcaption class="kh ki fg fe ff kj kk bd b be z ek mo di mp mq">Above: me sharing how much I love CodeSandbox ❤️</figcaption></figure></div><p id="4219" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">点击提交后，CodeSandbox的Airtable中会生成一个新条目，包含您的反馈以及一些相关的用户信息。在下一节中，我将介绍它是如何构建的，以及如何在自己的应用程序中使用它。</p><h1 id="5ab3" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">向Airtable发送反馈</h1><p id="45a4" class="pw-post-body-paragraph jb jc hu jd b je lx jg jh ji ly jk jl jm lz jo jp jq ma js jt ju mb jw jx jy hn dt translated">有三个独立的文件负责Airtable功能。</p><p id="8edb" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><a class="ae jz" href="https://github.com/CompuIves/codesandbox-client/blob/7c70c10d06ab573a58a568048eb7725790b3b4fa/packages/app/src/app/store/utils/setAirtable.js" rel="noopener ugc nofollow" target="_blank"> setAirtable.js </a>用指定的API键设置<a class="ae jz" href="https://www.npmjs.com/package/airtable" rel="noopener ugc nofollow" target="_blank"> Airtable JavaScript API </a>。这很好，因为它将API密钥封装在存储库中的一个地方。</p><pre class="ix iy iz ja fq mr mf ms mt aw mu dt"><span id="6527" class="mv la hu mf b fv mw mx l my mz">// packages/app/src/app/store/utils/setAirtable.js</span><span id="2094" class="mv la hu mf b fv na mx l my mz">import Airtable from 'airtable';</span><span id="8cae" class="mv la hu mf b fv na mx l my mz">export default new Airtable({ apiKey: '&lt;YOUR_AIRTABLE_API_KEY&gt;' });</span></pre><p id="1a34" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><a class="ae jz" href="https://github.com/CompuIves/codesandbox-client/blob/9f094be140bb188c5b6d2157929b261a946f2572/packages/app/src/app/store/utils/pushToAirtable.js" rel="noopener ugc nofollow" target="_blank"> pushToAirtable.js </a>连接到Airtable base(他们对特定电子表格的术语)，并用与我们的反馈相关的应用程序特定的参数包装Airtable的“创建记录”函数。它还处理错误，将它们记录到控制台。请注意，该函数返回一个承诺，选择该承诺是为了能够在承诺链中调用该函数。</p><pre class="ix iy iz ja fq mr mf ms mt aw mu dt"><span id="21db" class="mv la hu mf b fv mw mx l my mz">// packages/app/src/app/store/utils/pushToAirtable.js</span><span id="da06" class="mv la hu mf b fv na mx l my mz">import Airtable from './setAirtable';</span><span id="dc56" class="mv la hu mf b fv na mx l my mz">const base = Airtable.base('&lt;YOUR_AIRTABLE_BASE_KEY&gt;');</span><span id="fdea" class="mv la hu mf b fv na mx l my mz">export default ({ feedback, emoji, sandboxId, username, email }) =&gt;<br/>  new Promise((resolve, reject) =&gt; {<br/>    base('feedback').create(<br/>      {<br/>        feedback,<br/>        emoji,<br/>        sandboxId,<br/>        username,<br/>        email,<br/>      },<br/>      err =&gt; {<br/>        if (err) {<br/>          console.error(err);<br/>          reject();<br/>        }</span><span id="390a" class="mv la hu mf b fv na mx l my mz">        resolve();<br/>      }<br/>    );<br/>  });</span></pre><p id="5855" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><a class="ae jz" href="https://github.com/CompuIves/codesandbox-client/blob/9f094be140bb188c5b6d2157929b261a946f2572/packages/app/src/app/pages/common/Modals/FeedbackModal/Feedback.js" rel="noopener ugc nofollow" target="_blank"> Feedback.js </a>是调用<code class="eh mc md me mf b">pushToAirtable()</code>的React反馈模态组件。我也喜欢<code class="eh mc md me mf b">props</code>和<code class="eh mc md me mf b">user</code>在<code class="eh mc md me mf b">sendFeedback()</code>内部被解构的方式。</p><pre class="ix iy iz ja fq mr mf ms mt aw mu dt"><span id="95b7" class="mv la hu mf b fv mw mx l my mz">// packages/app/src/app/pages/common/Modals/FeedbackModal/Feedback.js<br/>// Some code has been omitted for brevity</span><span id="eadb" class="mv la hu mf b fv na mx l my mz">...</span><span id="c521" class="mv la hu mf b fv na mx l my mz">import pushToAirtable from 'app/store/utils/pushToAirtable';</span><span id="4932" class="mv la hu mf b fv na mx l my mz">function sendFeedback(props) {<br/>  const { feedback, emoji, sandboxId, user } = props;<br/>  const { username, email } = user || {};</span><span id="7d2c" class="mv la hu mf b fv na mx l my mz">  return pushToAirtable({ feedback, emoji, sandboxId, username, email });<br/>}</span><span id="6315" class="mv la hu mf b fv na mx l my mz">class Feedback extends React.Component {<br/>  ...<br/>  onSubmit = evt =&gt; {<br/>    const { id, user, signals } = this.props;<br/>    const { feedback, emoji } = this.state;<br/>    evt.preventDefault();</span><span id="ae6d" class="mv la hu mf b fv na mx l my mz">    this.setState({ loading: true }, () =&gt; {<br/>      sendFeedback({<br/>        sandboxId: id,<br/>        feedback,<br/>        emoji,<br/>        user,<br/>      })<br/>     ...<br/>  };<br/>  ...<br/>  render() {<br/>    return (<br/>      &lt;form onSubmit={this.onSubmit}&gt;<br/>        ...<br/>      &lt;/form&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="15b0" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">所以真的，没什么大不了的。这很简单，因为:</p><ol class=""><li id="f1a1" class="kl km hu jd b je jf ji jj jm kn jq ko ju kp jy nb kr ks kt dt translated">创建一个文件来封装你的Airtable API密匙(<code class="eh mc md me mf b">setAirtable.js</code>)</li><li id="beb8" class="kl km hu jd b je ku ji kv jm kw jq kx ju ky jy nb kr ks kt dt translated">为任何Airtable函数创建包装函数，使参数特定于应用程序(<code class="eh mc md me mf b">pushToAirtable.js</code>)</li><li id="6367" class="kl km hu jd b je ku ji kv jm kw jq kx ju ky jy nb kr ks kt dt translated">为表单调用<code class="eh mc md me mf b">onSubmit()</code>中的函数，或者为React组件(<code class="eh mc md me mf b">Feedback.js</code>)中的按钮调用<code class="eh mc md me mf b">onClick()</code></li></ol><p id="42c7" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">为什么Airtable不仅仅收集用户反馈呢？您还可以扩展这个方法来发送其他类型的数据，比如特定的应用程序事件或日志。我很想听听你是如何在自己的项目中使用它的。</p><h1 id="b66e" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">这就是这次拆卸的全部！</h1><p id="f264" class="pw-post-body-paragraph jb jc hu jd b je lx jg jh ji ly jk jl jm lz jo jp jq ma js jt ju mb jw jx jy hn dt translated">在下一篇文章中，我们将从CodeSandbox中获取处理不要跟踪用户设置的技巧。</p><p id="7348" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">在Twitter上关注我吧，我会在那里发布我写的文章。</p><p id="3778" class="pw-post-body-paragraph jb jc hu jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">你自己通读过CodeSandbox源代码吗？如果你从中学到了什么有趣的东西，请在评论中告诉我🙌</p></div></div>    
</body>
</html>