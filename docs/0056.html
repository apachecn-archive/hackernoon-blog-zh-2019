<html>
<head>
<title>How to create a simple company website with Cosmic JS and Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Cosmic JS和Angular创建一个简单的公司网站</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-create-a-simple-company-website-with-cosmic-js-and-angular-476896ca0ed4?source=collection_archive---------35-----------------------#2019-01-02">https://medium.com/hackernoon/how-to-create-a-simple-company-website-with-cosmic-js-and-angular-476896ca0ed4?source=collection_archive---------35-----------------------#2019-01-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/ba71f11ec162d73d9272e5c1ad7140a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jq8yXeQa6BAxAcFvuAjL1Q.jpeg"/></div></div></figure><p id="6cad" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka"> *本文将假设Angular的一些基本知识，因此它可以专注于从Cosmic JS请求和显示数据的特定任务</em></p><h1 id="ced6" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">TL；速度三角形定位法(dead reckoning)</h1><p id="5e6f" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">看看<a class="ae le" href="https://github.com/cosmicjs/angular-company-website" rel="noopener ugc nofollow" target="_blank">的资源库</a>和<a class="ae le" href="https://cosmicjs.com/apps/angular-company-website" rel="noopener ugc nofollow" target="_blank">安装的app </a></p><p id="ecb7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个应用程序是关于什么的？</p><p id="1fdd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一个典型的公司网站仅仅是一组或多或少简单导航的页面。我们希望创建一个网站，允许用户创建任意数量的页面，并决定导航的结构，而不需要等待代码发布。为此，我们将依靠Cosmic JS并创建结构来支持这个项目。在本例中，我们的bucket将具有以下对象类型:</p><ul class=""><li id="b829" class="lf lg hu je b jf jg jj jk jn lh jr li jv lj jz lk ll lm ln dt translated">页数。这是一个简单的对象，没有额外的元字段。</li><li id="4ea6" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated">导航。它将保存页面集合。</li><li id="1074" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated">预设。这是一个带有属性列表的配置对象，可以帮助我们启动应用程序。它将保存主页和主导航的值，我们将使用它作为我们站点的菜单。</li></ul><p id="e504" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">使用API </strong></p><p id="bc13" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">既然我们已经定义了数据的结构，我们需要创建我们的Angular应用程序(我推荐使用Angular CLI)并创建一个服务来调用Cosmic JS API。看看从Cosmic JS请求一个页面对象有多简单:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><em class="md">get a single page and save it to the stream to keep it cached for the session</em></figcaption></figure><p id="82bd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">请注意，对于嵌套对象，Cosmic JS不会返回完整的树，因此有时您需要连接调用来充分利用我们的服务，例如:当获取主预置时，您可能希望包含导航页面。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><em class="md">this call will combine the result of getNavigation into the result of getPreset</em></figcaption></figure><p id="d76d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的api调用需要用一个read键进行认证，我们可以在每个方法中包含这一点，但是最简单的方法可能是创建一个拦截器。这将拦截所有http请求，所以我们检查它是否是一个Cosmic JS请求，并在必要的地方附加read键。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><em class="md">intercept and append the read or write parameters</em></figcaption></figure><p id="173c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">路由到页面</strong></p><p id="c002" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这一点上，我们的网站什么都不做，它需要做的第一件事就是知道如何加载它的第一页。我们需要为页面创建一个路由模块，并将其设置为在根上加载。一旦进入模块，在它自己的路由上，我们将为参数:slug设置一个路由来加载页面组件。当没有指定路由时会发生什么？这将是我们最常见的场景，为此，我们设置了一条有警卫的空路线。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="6c95" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在匹配路线和加载组件之前，将执行一个守卫，所以我们将使用它从Cosmic JS中获取主要的预设，并将应用程序重定向到我们建立的主页。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><em class="md">from Angular 7.1, canActivate can return either a boolean or an UrlTree</em></figcaption></figure><p id="4cc7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">组件</strong></p><p id="cdbd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们有了一个将加载页面组件的路由配置，这是使用参数列表中的slug加载页面的方法:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><em class="md">now we can use the page object on our template</em></figcaption></figure><p id="6650" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这样，我们就有了通过url导航的方法，但是我们也应该加载一个菜单，这样用户就可以看到可用的页面。为此，我们将在核心模块上添加一个菜单组件，因为它将在整个应用程序中共享。我们的菜单将由导航列表、徽标和公司名称组成；所有这些都是在预置上定义的，所以菜单会有这样一个调用:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><em class="md">note that we specifically ask to include the navigation by adding “true” as a parameter to the method</em></figcaption></figure><p id="cd48" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所有这些将允许你使用Angular和Cosmic JS快速创建一个网站，剩下要做的就是创建模板并扩展配置以满足你的需求。</p></div></div>    
</body>
</html>