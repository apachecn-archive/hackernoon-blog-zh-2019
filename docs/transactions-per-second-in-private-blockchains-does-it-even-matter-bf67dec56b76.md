# 在许可的区块链每秒的交易量——这有关系吗？

> 原文：<https://medium.com/hackernoon/transactions-per-second-in-private-blockchains-does-it-even-matter-bf67dec56b76>

## 区块链的苹果和橘子。

![](img/5174887235ff2150964d8afb15b2a4bf.png)

Photo by [Chris Liverani](https://unsplash.com/photos/dBI_My696Rk?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

自从区块链技术被大肆宣传以来，关于分散式系统的性能和可伸缩性就一直存在争论。它始于比特币 main net 与 visa 网络的交易吞吐量的比较。然后是以太坊，同样的比较再次出现。

如今，只要一提到新的区块链平台或协议，出现的第一个问题几乎总是关于事务吞吐量(或每秒*个事务*或*个 TPS* )。这让我想起了[著名的 Maruti 铃木广告(印度)](https://www.youtube.com/watch?v=gzf20KLGE84)，展示了人们对汽车里程数的痴迷，无论它们的功能多么丰富。

虽然这种平均交易吞吐量的比较在公共网络(比特币、以太坊和其他)中似乎是公平的，但在私有网络之间比较这些数字没有意义。

在公共网络中，所有类型的交易都发送到同一个网络(合同创建、呼叫、简单的转账等)。)，并且所有的块参数都相同。然而，私有链互不相同，它们的事务大小和类型是根据各自的用例建模的。在私有链的环境中，对于不同的用例，相同的区块链协议或产品可以有完全不同的吞吐量。

例如，[以太坊专用网络对于简单的以太网传输交易和智能合约交易可以有完全不同的交易吞吐量](https://www.comp.nus.edu.sg/~ooibc/blockbench.pdf)。

> 关键是，在评估区块链技术时，我们应该避免仅仅根据事务吞吐量数字做出选择。让我解释一下。

## 处理

区块链是一个分布式状态机。它从初始状态( *genesis* )开始，然后每个新的*事务*将区块链从一个状态带到下一个状态。这些事务在*块*中组合在一起，块生产是触发状态转换的事件。

因此，当我们查看每秒的事务时，我们基本上是在查看区块链每秒改变其状态的次数。在私有链中，状态及其转换函数是根据正在实现的用例来定义的。例如，供应链区块链的状态定义与金融结算区块链的状态定义非常不同。这给我们带来了一个问题——对于具有不同建模的状态和事务的链，我们如何比较或概括每秒的事务？

> 对于具有不同建模的状态和事务的**链，我们如何比较或概括每秒的事务？**

## 块参数

区块生产主要有两个参数—最大区块大小和两个区块之间的时间间隔。当产生新的块时，区块链的状态改变。可以更快地生成块，但每个块的事务会更少，从而降低每秒的总事务数。它们可以以较慢的速度产生，打包更多的事务，但是它们的传播将变得更慢(网络效应)，再次减少每秒的事务。

我们需要的是块参数的微调配置，以便我们可以获得最佳吞吐量。这些参数的微调将再次*依赖于我们为其构建链的用例*(事务的类型和大小)。

在以太坊协议中，这些块参数被称为`gas limit`(块大小)和`block period`(时间间隔)。

## 共识；一致

如上所述，当产生新的块时，区块链的状态更新。但是为了解决谁(哪个矿工/权威/验证者)生产下一个块的问题，我们使用一致算法。各种一致性算法旨在解决不同类型的问题；用于多种区块链产品。

例如，Ethereum 协议的 Geth 和奇偶校验实现都支持不同类型的授权证明(PoA)共识算法——分别是 Clique 和 Aura。这两种 [PoA 一致性算法的工作方式非常不同](http://ceur-ws.org/Vol-2058/paper-06.pdf)，但仍然提供相似的批量生产结果。

在不同的区块链产品中还使用了其他几种共识算法，它们在每秒交易量中起着重要的作用。一些共识算法注重安全性且速度较慢，而另一些则不太安全但速度较快。例如，Hyperledger Fabric 使用基于`centralized ordering service`的共识，比其他 BFT 算法(Tendermint、Honey Badger)更快，但不太安全(非 BFT)。根据共识规则处理数据块所需的时间也会影响事务吞吐量。

## 总结一下

每秒事务吞吐量基于多个因素并受其影响，具体取决于使用情形。私有区块链以用例为中心，因此每秒事务数的问题没有直接的答案。虽然平均吞吐量数字可以在评估区块链产品时为我们提供一些提示，但它们也可能会产生误导。

大多数时候，区块链产品宣传的吞吐量数字是基于最简单的事务和高度优化的块参数。当涉及到真正的用例实现时，事务大小和块参数可能完全不同，从而导致非常不同的吞吐量数字。

结果可能有所不同！

## 参考

1.  [BLOCKBENCH:一个分析私人区块链的框架](https://www.comp.nus.edu.sg/~ooibc/blockbench.pdf)
2.  [PBFT 诉权威证明:将上限定理应用于许可区块链](http://ceur-ws.org/Vol-2058/paper-06.pdf)
3.  [链锤](https://github.com/drandreaskrueger/chainhammer)

*原载于 2019 年 2 月 10 日*[*https://www.gautamdhameja.com*](https://www.gautamdhameja.com/transaction-throughput-bad-metric-private-blockchain/)*。*