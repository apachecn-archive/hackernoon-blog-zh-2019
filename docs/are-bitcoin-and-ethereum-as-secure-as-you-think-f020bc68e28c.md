# 比特币和以太坊有你想象的那么安全吗？

> 原文：<https://medium.com/hackernoon/are-bitcoin-and-ethereum-as-secure-as-you-think-f020bc68e28c>

![](img/62c1245ec78e0c6533f387ca5335ff5e.png)

*由文森特·格拉莫利博士(悉尼大学科学与工业研究组织数据 61)撰写*

C onsensus 是分布式计算的一个基本问题。虽然已知这个问题是不可解决的，但是现有的协议被设计成在各种假设下解决共识。今天，随着最近区块链的出现，提出了各种一致的实现来使复制品就更新分布式分类帐的事务顺序达成一致。然而，很少有人专门评估它们的安全水平。因此，现有协议有时会被误解，而且通常不清楚在执行过程中出现的问题是由于实现错误还是更基本的设计问题。

与比特币和以太坊一样，工作证明区块链在理论和经验上都容易受到双重支出攻击。在我的一篇研究论文“ [**从区块链共识回到拜占庭共识**](https://www.researchgate.net/publication/319984012_From_blockchain_consensus_back_to_Byzantine_consensus)**”**中，我已经讨论了主流的区块链共识算法，并警告了在没有准确理解共识算法所提供的保证的情况下使用这些区块链的危险。

以太坊是最受欢迎的开放区块链系统之一，这要归功于它所执行的分布式应用程序的大型生态系统。但不幸的是，默认的以太坊协议，称为工作证明(PoW)，是可分叉的，因为它允许在链的相同索引处附加不同的块。当一个分叉在不被注意的情况下增长时，它会导致安全漏洞，比如重复支出。

因此，这种趋势似乎是在一种新的协议类别中重用拜占庭容错，这种协议称为授权证明(PoA)，旨在避免双重支出，最近被集成到部署最多的以太坊客户端、*奇偶校验*和 *geth、*中，并被行业使用。

这些以太坊共识算法称为 Aura 和 Clique，据说实现了 PoA，因为它们将块的创建限制在一组固定的权威节点，称为密封器。他们的目标是解决众所周知的拜占庭一致性问题，其中一组固定的节点同意一个唯一的块，尽管存在拜占庭节点。PoA 给了密封者密封数据块的权力，这包括对数据块进行加密签名。如果参与者的子集允许的话，这组密封器可能会随着时间而改变，类似于所谓的社区区块链。对于那些对花费大量 CPU 资源来换取以加密货币表示的奖励不感兴趣，但对避免分叉以增加安全性更感兴趣的行业来说，PoA 是 PoW 的一种有吸引力的替代方案。

由于这些原因，PoA 最近在行业中受到了关注。[亚马逊网络服务通过 geth 内置的 Clique 协议向其客户提供 PoA](https://aws.amazon.com/blogs/apn/launch-enterprise-ready-blockchain-networks-on-aws-in-minutes-with-kaleido-a-consensys-solution/)。Lavaa 等工业公司提出了一种跟踪服务来防止欺诈伪造，这种服务在以太坊/光环上进行了试验。他们实施了一项服务，旨在维护多租户场景中的数据隐私和完整性。[微软描述如何“在生产中”部署以太坊/光环](https://docs.microsoft.com/en-us/azure/blockchain/templates/ethereum-poa-deployment)。他们建议 Azure 客户跨不同地区部署 Aura 协议，以提高服务的可用性。

然而，PoA 协议提供的安全级别还没有得到评估，也不清楚攻击者是否会破坏数据完整性。随着行业在这些协议的基础上在机构联盟中使用以太坊，评估它们的脆弱性变得至关重要。

在一篇新的论文[“克隆人对权威证明的攻击](https://www.researchgate.net/publication/331370565_The_Attack_of_the_Clones_Against_Proof-of-Authority)”中，我们与来自悉尼大学和 CSIRO 的同事研究人员合作，探讨了 PoA 共识协议的漏洞和对策。

本文证明了在特定条件下，PoA 是不安全的。我们针对以太坊/Aura 和以太坊/Clique 协议设计、实现并实验了一种称为克隆攻击的攻击，这种攻击允许窃取数字资产，并提出了缓解该漏洞的方法。

我们在我们的私有测试网上部署了 PoA 以太坊的两个版本，并对两个协议进行了克隆攻击。一方面，我们发现与 Clique 相比，Aura 需要更少的拓扑知识来使恶意的密封器以 100%的成功率实现双倍的花费。另一方面，对 Clique 的攻击要快大约两倍，但是它的成功率在 60%到 100%之间，这取决于恶意封装者的拓扑知识。因此，尽管最近引入了拜占庭容错，以太坊在联盟中使用时仍然非常容易受到网络攻击。

为了弥补这个漏洞，我们提出修改这两个共识算法，并保留其安全保证。然而，作为一个缺点，我们的对策对团算法的活性引入了一些潜在的限制。

作为反制措施，我们提出了一个特别有前途的协议——[红肚皮区块链](https://redbellyblockchain.io/)。它依赖于解决区块链拜占庭共识问题的民主 BFT。因为它不依赖于现成的经典拜占庭共识算法，红肚皮区块链已经扩展到超过 100 个共识参与者，每秒处理超过 60 万笔交易的工作负载，因此与其他区块链相比，可以容忍数量可能要多得多的区块链参与者发布交易和请求余额。与其他大规模区块链相比，红肚皮区块链实现了快速结算(通常在 3 秒内)，因为它不需要任何工作证明。

*论文《克隆人对权威证明的攻击》由文森特·格拉莫利博士(悉尼大学)、芭利娅·埃克帕瑞亚(悉尼大学)和纪尧姆·茹乔恩(Data61-CSIRO)撰写，可在以下链接下找到:*[*https://www . research gate . net/publication/331370565 _ The _ Attack _ of _ The _ Clones _ Against _ Proof-of-Authority*](https://www.researchgate.net/publication/331370565_The_Attack_of_the_Clones_Against_Proof-of-Authority)

Vincent Gramoli 博士是悉尼大学的副教授，他领导着该校的并行系统研究小组。他还是 Data61-CSIRO 的高级研究员。在此之前，他隶属于 INRIA 大学，康奈尔大学和 EPFL 大学。文森特是澳大利亚计算机学会区块链技术委员会的主席，也是澳大利亚研究委员会的未来成员。