<html>
<head>
<title>A Guide to Building a Multi-featured Slackbot with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python构建多功能Slackbot的指南</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-guide-to-building-a-multi-featured-slackbot-with-python-73ea5394acc?source=collection_archive---------3-----------------------#2019-03-02">https://medium.com/hackernoon/a-guide-to-building-a-multi-featured-slackbot-with-python-73ea5394acc?source=collection_archive---------3-----------------------#2019-03-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/1098d4538f2207c3aed7bc4fb8320c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mYfuyqwBRIkxup8S-P-bJQ.png"/></div></div></figure><p id="fd0d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如今，聊天机器人几乎无处不在，从社交信息平台到整合到网站中，用于订票、寻找附近的餐馆、产生线索、购买和销售产品。一些聊天机器人，如微软的Ruuh已经能够使用人工智能和深度学习进行类似人类的对话。</p><p id="63c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你还记得《远足》中的<strong class="je hv">娜塔莎吗？我四年前用过它，惊讶地发现她处理我们对话的方式比机器人处理得好得多。那时我还没有听说过机器学习的概念。</strong></p><p id="5be8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在聊天机器人让我们如此依赖它们，以至于它已经成为我们今天生活的一部分。</p><p id="5169" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">“好的谷歌，提醒我20号发布我的聊天机器人文章”</em></p><p id="ff55" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">“什么时候？”</em></p><p id="5802" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">《子夜》</em></p><p id="acd1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">“当然，我会在周三午夜提醒你。”</p><p id="2932" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">聊天机器人不仅通过管理我们的任务使我们的生活变得更容易，而且与它们交谈也变得非常有趣。</p><p id="5e41" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">“好吧谷歌，给我讲个笑话。”</em></p><p id="9e77" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">“这是一个刚好赶上情人节的笑话，我忘了告诉你我情人节有个约会。现在是2月14日。”</em></p><p id="a090" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是所有这些都是以我们的<strong class="je hv">数据被存储和用于</strong>公司利益为代价的。最近谷歌印度在推特上问'<strong class="je hv">为什么印度用户一直要求谷歌助理嫁给他们？</strong>'</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/fd2d0a4c383423f7fcbe8e4baa701462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/0*xP-TM5JCqwxRU0UW"/></div></figure><p id="69c0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们能对此做些什么吗？最有可能没有</p><h1 id="d65f" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">如果我们能建造自己的聊天机器人会怎么样？</h1><p id="e4d2" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">我们可以添加我们需要的所有功能，并根据我们的喜好进行调整。</p><p id="bccf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以，让我们建造一个聊天机器人，当它在空闲时间运行时，它将帮助你提高工作效率。我们即将构建的聊天机器人与谷歌助手相去甚远。它甚至没有语音功能。</p><blockquote class="lk ll lm"><p id="500c" class="jc jd ka je b jf jg jh ji jj jk jl jm ln jo jp jq lo js jt ju lp jw jx jy jz hn dt translated">Slack是一个为团队协作和相互合作而构建的消息平台。它是当今公司与员工沟通时最常用的工具。</p></blockquote><h1 id="325d" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated"><strong class="ak">入门</strong></h1><p id="d6ca" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">让我们一起在Slack上建立一个聊天机器人。</p><p id="77b7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> <em class="ka">免责声明:</em> </strong> <em class="ka">这个项目是由一个2人的团队为一场比赛创作的，但遗憾的是我们没能进入决赛。</em></p><p id="9cb9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是我们Slackbot的<strong class="je hv">架构</strong>。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lq"><img src="../Images/ea92d0362dd51b5f2619a5077e881215.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lhjn4sp3pPrUdI3vWrmZ4A.jpeg"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek"><em class="lv">Image Credit: Sweta Sharma</em></figcaption></figure><p id="b731" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是我们的<strong class="je hv">实体关系图</strong>，它将帮助你创建你自己的数据库。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/0367c3327db27ed0292f1361e2a381e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0kjPl1JIdBUb3Yx_La-nYA.jpeg"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Image Credit: Sweta Sharma</figcaption></figure><p id="a02c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">从<a class="ae lj" href="https://github.com/Techcatchers/Geeksters-Slack-Chatbot" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中克隆存储库。</p><p id="5ab9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在项目的<code class="eh lx ly lz ma b">/src</code>目录下创建一个<code class="eh lx ly lz ma b">.env</code>文件。</p><p id="f4fa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">安装要求:</p><pre class="kc kd ke kf fq mb ma mc md aw me dt"><span id="8920" class="mf kh hu ma b fv mg mh l mi mj">pip install -r requirements.txt</span></pre><p id="74e3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是你的主文件:<strong class="je hv"> slackbot.py. </strong></p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="mk ml l"/></div></figure><p id="80ec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> slackbot.py </strong> first <strong class="je hv"> </strong>导入运行slackbot所需的所有包。然后，它使用存储在您的<code class="eh lx ly lz ma b">.env</code>文件中的<a class="ae lj" href="https://api.slack.com/apps?new_app=1" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> slack API密钥</strong> </a>启动Slack客户端，如下所示:</p><pre class="kc kd ke kf fq mb ma mc md aw me dt"><span id="1848" class="mf kh hu ma b fv mg mh l mi mj">API_KEY=”Your Slack API Key”</span></pre><p id="a9f2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它初始化常量并尝试与<strong class="je hv"> Slack的RTM API </strong>连接，如果未能建立连接，则返回<code class="eh lx ly lz ma b">Connection failed with the error message printed above.</code></p><p id="8cfc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果连接成功，我们的slack客户端将无限循环运行，并尝试每秒读取是否接收到任何用户的消息，如果接收到任何消息，它将提取通道id和从Slack的RTM API接收到的消息文本，并进一步检查接收到的消息是否有任何可以处理以生成响应的指定命令。</p><h1 id="c74e" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated"><strong class="ak">带有代码和说明的特性</strong></h1><h2 id="cec5" class="mf kh hu bd ki mm mn mo km mp mq mr kq jn ms mt ku jr mu mv ky jv mw mx lc my dt translated"><strong class="ak">歌词</strong></h2><p id="d923" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">我们的用户可以通过Slackbot传入拼写或拼写错误的歌曲名来获取歌词。这个代码片段已经在你的<strong class="je hv"> slackbot.py </strong>文件中定义好了。</p><pre class="kc kd ke kf fq mb ma mc md aw me dt"><span id="9572" class="mf kh hu ma b fv mg mh l mi mj">elif message.startswith("lyrics for "):</span><span id="17a5" class="mf kh hu ma b fv mz mh l mi mj">get_song_name = message[11:]</span><span id="594c" class="mf kh hu ma b fv mz mh l mi mj">lyrics_gen = Song_Lyrics(settings.GCS_API_KEY, settings.GCS_ENGINE_ID)</span><span id="8360" class="mf kh hu ma b fv mz mh l mi mj">song = lyrics_gen.get_lyrics(get_song_name)</span><span id="fe75" class="mf kh hu ma b fv mz mh l mi mj">response = '*' + song[0] + '*' + '\n\n' + song[1].replace('&lt;br&gt;','\n')</span></pre><p id="508b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您需要创建一个<a class="ae lj" href="https://cse.google.com/cse/create/new" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">自定义搜索引擎ID </strong> </a>，根据您的选择添加以下任意或所有网站:</p><ul class=""><li id="85e7" class="na nb hu je b jf jg jj jk jn nc jr nd jv ne jz nf ng nh ni dt translated">https://genius.com/</li><li id="6e91" class="na nb hu je b jf nj jj nk jn nl jr nm jv nn jz nf ng nh ni dt translated">http://www.lyricsted.com/</li><li id="6ebc" class="na nb hu je b jf nj jj nk jn nl jr nm jv nn jz nf ng nh ni dt translated">http://www.lyricsbell.com/</li><li id="9442" class="na nb hu je b jf nj jj nk jn nl jr nm jv nn jz nf ng nh ni dt translated">https://www.glamsham.com/</li><li id="93c4" class="na nb hu je b jf nj jj nk jn nl jr nm jv nn jz nf ng nh ni dt translated">http://www.lyricsoff.com/</li><li id="d05a" class="na nb hu je b jf nj jj nk jn nl jr nm jv nn jz nf ng nh ni dt translated">http://www.lyricsmint.com/</li></ul><p id="fce9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注:</strong>更多信息可以看一下<a class="ae lj" href="https://github.com/Techcatchers/PyLyrics-Extractor" rel="noopener ugc nofollow" target="_blank">歌词提取器</a> Python库。</p><p id="5c32" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">获得自定义搜索引擎ID后，获得一个<a class="ae lj" href="https://developers.google.com/custom-search/v1/overview" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> Google自定义搜索JSON </strong> </a> <strong class="je hv"> </strong> API密钥，一切就绪。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/7886f463179e156fea43adf0ebedcecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*lADCzM0MUVYSXIdlicuqMA.gif"/></div></figure><h2 id="d407" class="mf kh hu bd ki mm mn mo km mp mq mr kq jn ms mt ku jr mu mv ky jv mw mx lc my dt translated"><strong class="ak">获取歌曲的音频&amp;视频</strong></h2><p id="7337" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">我们的用户可以通过在Slackbot上输入拼写或拼写错误的歌曲名称来获得歌曲的音频和视频版本。</p><p id="b17b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是你的<strong class="je hv"> get_music.py </strong>。</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="mk ml l"/></div></figure><p id="2794" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在导入所有依赖项后，它需要一个<a class="ae lj" href="https://console.developers.google.com/apis/credentials?project=_" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> YouTube数据API </strong> </a>来获取歌曲，并从收到的搜索结果中提取拼写或拼写错误的歌曲名称的第一个链接。</p><p id="ef23" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>我们已经假设我们的第一个YouTube搜索结果对于我们请求歌曲的用户来说是最准确的。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/4dbd2c5964113c02bafa75328fd89f05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*_RDTua-V7uQlYRKguzv1-A.gif"/></div></figure><p id="9d60" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后它利用<a class="ae lj" href="https://pypi.org/project/pafy/" rel="noopener ugc nofollow" target="_blank"> Pafy Python库</a>从歌曲的视频链接中提取音频。它需要一个<a class="ae lj" href="https://bitly.com/a/sign_in?rd=/a/oauth_apps" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> Bitly用户名和Bitly API密钥</strong> </a>来缩短为几小时内到期的流媒体音频生成的长URL，以及缩短用于提供歌曲视频版本的YouTube视频链接。</p><p id="3488" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>你可能会发现<a class="ae lj" href="https://www.geeksforgeeks.org/python-how-to-shorten-long-urls-using-bitly-api/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>对安装GitHub的Bitly包很有用。</p><h2 id="0d8b" class="mf kh hu bd ki mm mn mo km mp mq mr kq jn ms mt ku jr mu mv ky jv mw mx lc my dt translated"><strong class="ak">足球实况比分</strong></h2><p id="0700" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">我们的用户会在每隔一段时间后收到实况足球比赛的最新比分通知。我只选择了顶级足球联赛，这些联赛可以直播英超、英冠、意甲、西甲和西甲的比赛。</p><p id="fdcb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我只选择了几个联赛，因为目前有许多比赛直播，发送所有直播比赛的分数对用户来说没有意义。</p><p id="1fe4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>这是一个基于订阅的服务，所以你需要在开始时按照我的共享模式设置一个数据库。然后，您可以使用一个<a class="ae lj" href="https://pypi.org/project/schedule/" rel="noopener ugc nofollow" target="_blank"> Schedule Python库</a>来安排在每个设定的时间间隔后将您的实时分数发送给订阅用户。</p><p id="1b4f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你需要获取<a class="ae lj" href="https://www.football-data.org/client/register" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">足球数据API </strong> </a>的API键。</p><p id="247b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以从<a class="ae lj" href="https://www.football-data.org/coverage" rel="noopener ugc nofollow" target="_blank">足球数据API </a>中提供的联赛中选择你喜欢的足球联赛。</p><p id="aa9f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是你的<strong class="je hv"> football.py </strong>文件。</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="mk ml l"/></div></figure><p id="75e3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh lx ly lz ma b">live_football</code>函数获取并提取存储在<code class="eh lx ly lz ma b">comp_id</code>字典中的所选联赛的实况足球比赛的实况比分，并返回实况比赛的元组列表，其中包含两队所需的信息。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/1fc2387f038a7cec84127ad4164dd852.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*tFEVp1YBvXefdsQRA_GHLA.gif"/></div></figure><p id="4b5c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当用户从Slackbot订阅实况足球比分时，我们的<code class="eh lx ly lz ma b">football_res</code>类对象存储用户的频道id和我们的slack客户端API密钥，该密钥进一步验证用户的响应，并将用户选择的联赛存储在我们的数据库中，并向订阅用户发送后续确认响应，其中包含实况比赛的最新比分。</p><h2 id="45c2" class="mf kh hu bd ki mm mn mo km mp mq mr kq jn ms mt ku jr mu mv ky jv mw mx lc my dt translated"><strong class="ak">新闻</strong></h2><p id="0308" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">我们的用户将每天更新时事和突发新闻，以便他们能够了解当前发生的最新情况。</p><p id="0e40" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是你的<strong class="je hv"> news.py </strong>文件。</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="mk ml l"/></div></figure><p id="2f0e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它需要一个<a class="ae lj" href="https://newsapi.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> News API </strong> </a> <strong class="je hv">键</strong>来获取最新新闻，还需要一个<a class="ae lj" href="https://bitly.com/a/sign_in?rd=/a/oauth_apps" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> Bitly用户名和Bitly API键</strong> </a>来缩短长URL。</p><p id="e24a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>你可能会发现<a class="ae lj" href="https://www.geeksforgeeks.org/python-how-to-shorten-long-urls-using-bitly-api/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>对安装GitHub的Bitly包很有用。</p><p id="30e1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它以格式化消息的形式返回带有标题、描述和新闻链接的新闻。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/b93a9718df26b6f36175cf0872959d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*V9m17jZJlS9H0YiEeQQVEg.gif"/></div></figure><p id="2a2a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>这是一个基于订阅的服务，所以你需要在开始时按照我的共享模式建立一个数据库。然后，您可以使用一个<a class="ae lj" href="https://pypi.org/project/schedule/" rel="noopener ugc nofollow" target="_blank"> Schedule Python库</a>来安排在每个设定的时间间隔后将您的实时分数发送给订阅用户。</p><h2 id="cfd9" class="mf kh hu bd ki mm mn mo km mp mq mr kq jn ms mt ku jr mu mv ky jv mw mx lc my dt translated"><strong class="ak">任务</strong></h2><p id="4f54" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">我们的用户可以在Slackbot中安排任务，它会提醒他们在设定的日期和时间完成设定的任务。这将帮助我们的用户管理和按时完成任务，从而提高他们的工作效率。</p><p id="484b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是我们的<strong class="je hv"> task.py </strong>文件。</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="mk ml l"/></div></figure><p id="7bd9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果用户消息以“提醒我”开始，那么我们的<code class="eh lx ly lz ma b">parse_tasks</code>函数从接收到的用户消息中提取<strong class="je hv">日期、任务描述和时间</strong>，并验证所提供的日期和时间是否有效。</p><p id="b768" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果一切都解析正确，那么任务将存储在我们数据库的<strong class="je hv">任务表中，我们的用户将收到一条确认消息，让他们知道任务已设置了事件的格式化日期和时间。</strong></p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/9b2da6159ec9531f5b383030c8eb1ff7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*m62HTheahlYkpc0YCI9mvw.gif"/></div></figure><p id="e70f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>您需要在开始时按照我的共享模式在您的数据库中建立一个任务表。当当前日期和时间等于设定的日期和时间时，将任务发送给指定的用户。</p><h2 id="574e" class="mf kh hu bd ki mm mn mo km mp mq mr kq jn ms mt ku jr mu mv ky jv mw mx lc my dt translated"><strong class="ak">提醒</strong></h2><p id="1b71" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">用户可以为同事和朋友的生日和纪念日设置提醒。这将有助于他们保持联系，保持沟通。</p><p id="82d1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是我们的<strong class="je hv"> reminder.py </strong>文件。</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="mk ml l"/></div></figure><p id="330a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的提醒模块的工作类似于任务，但<strong class="je hv">唯一的区别是提醒每年发送，而任务只在设定的日期和时间发送一次</strong>。</p><p id="10bf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果用户消息以“提醒我打开”开始，并且不包含时间，那么我们的<code class="eh lx ly lz ma b">parse_reminders</code>函数从接收到的用户消息中提取<strong class="je hv">日期&amp;提醒</strong>，并验证所提供的日期是否有效。</p><p id="8db6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果一切都解析正确，那么提醒会存储在我们数据库的<strong class="je hv">提醒表中，我们的用户会收到一条确认消息，让他们知道该提醒设置了该场合的格式化日期。</strong></p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/c6b3ece05f718ffd4437f5fd40415b6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*tzPlpX69XvEOyXxTWd1aLQ.gif"/></div></figure><p id="1b63" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>您需要在开始时按照我的共享模式在您的数据库中设置一个提醒表。当当前日期等于设定日期时，则每年向指定用户发送提醒。</p><h1 id="a81f" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated"><strong class="ak">结论</strong></h1><p id="4f4a" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">唷！我们终于走到了尽头。祝贺你构建了自己的Slackbot，它提供了一些很棒的特性。这里是我的<a class="ae lj" href="https://github.com/Techcatchers/Geeksters-Slack-Chatbot" rel="noopener ugc nofollow" target="_blank"> Slackbot Github库。</a></p><p id="6a03" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Slackbot中提供了许多特性，比如<strong class="je hv">事实、引用</strong>，我在本文中没有讨论这些特性，因为它们的实现非常简单。还有一个<code class="eh lx ly lz ma b">help</code> <strong class="je hv">命令提供给我们的用户</strong>，在这里他们可以了解所有可用的特性和分配给他们的命令。</p><p id="e17c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你在这个开源社区做出贡献，让这个<a class="ae lj" href="https://github.com/Techcatchers/Geeksters-Slack-Chatbot" rel="noopener ugc nofollow" target="_blank"> Slackbot </a>变得更好，我会很高兴审查你的请求。</p><p id="e227" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">此外，一定要查看我的<a class="ae lj" href="http://bit.ly/lyrics-extractor" rel="noopener ugc nofollow" target="_blank">歌词提取器</a> Python库，只需输入拼写或拼写错误的歌曲名称就可以获得歌词。</p><h2 id="0142" class="mf kh hu bd ki mm mn mo km mp mq mr kq jn ms mt ku jr mu mv ky jv mw mx lc my dt translated">非常感谢你花时间阅读这篇文章！如果你喜欢它，请给它一些掌声，因为它会帮助更多的人看到这个故事。如果你喜欢这个项目，可以看看GitHub上的这个资源库。❤</h2></div></div>    
</body>
</html>