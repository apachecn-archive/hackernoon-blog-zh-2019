<html>
<head>
<title>Create React App is Way Too Bloated</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建 React 应用程序太臃肿了</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/create-react-app-is-way-too-bloated-5db07c3511#2019-02-26">https://medium.com/hackernoon/create-react-app-is-way-too-bloated-5db07c3511#2019-02-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/521f44b7128a300fd3b23ae10049857e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dhsK_GOhxHQQuwGjxY5PIw.jpeg"/></div></div></figure><p id="550c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当 Create React App first <a class="ae ka" href="https://reactjs.org/blog/2016/07/22/create-apps-with-no-configuration.html" rel="noopener ugc nofollow" target="_blank">在 2016 年 7 月推出</a>时，它被认为是初学者入门 React 的最佳方式。</p><p id="0848" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在那个时候，人们鼓励初学者用 Webpack 从头开始构建一个 React 应用程序，或者从互联网上下载许多样板文件中的一个。Create React 应用程序的出现就像一股清新的空气。</p><p id="a0b6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">几年后，我们在让事情变得更简单、更容易使用的过程中停滞不前。我们对优化和添加功能的永无止境的渴望使得 Create React 应用程序难以使用，并且让大多数初学者(以及一些有经验的用户)感到害怕。</p><h1 id="0693" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">臃肿的文件结构</h1><p id="c912" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">从 Create React 应用程序中弹出一直是一种极其不和谐的体验。</p><p id="b5b9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你曾经敢运行<code class="eh le lf lg lh b">npm run eject</code>，你可能熟悉配置墙和众多文件，这些文件对任何地方的初学者来说都是令人望而生畏的。</p><p id="ff0f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但假设我们从不弹出，以下是您开箱后得到的内容:</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff li"><img src="../Images/29c54f47ff07022552afb4cfb7d61ee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:552/format:webp/1*11-HEfDJV7STCKMJPQoB8A.png"/></div><figcaption class="ln lo fg fe ff lp lq bd b be z ek">I get dizzy just looking at this.</figcaption></figure><p id="f7c2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">立刻，你会看到两个独立的文件夹:<code class="eh le lf lg lh b">public</code>和<code class="eh le lf lg lh b">src</code>。</p><p id="c392" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<code class="eh le lf lg lh b">public</code>文件夹中，除了我们的<code class="eh le lf lg lh b">index.html</code>之外，你还会看到<code class="eh le lf lg lh b">favicon.ico</code>和<code class="eh le lf lg lh b">manifest.json</code>。</p><p id="764e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<code class="eh le lf lg lh b">src</code>文件夹中，你有两个 CSS 文件，四个 Javascript 文件，还有一个<code class="eh le lf lg lh b">logo.svg</code>只是为了好玩。</p><p id="4f5f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">此时，您已经可以想象大多数初学者可能在想什么了:</p><blockquote class="lr ls lt"><p id="e51a" class="jc jd lu je b jf jg jh ji jj jk jl jm lv jo jp jq lw js jt ju lx jw jx jy jz hn dt translated">“我以为我是来学习 React 并快速开始制造组件的？”</p></blockquote><p id="b922" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当然，这些文件对于从事<em class="lu">生产</em>应用程序的经验丰富的 web 开发人员来说都非常重要。</p><p id="0978" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">测试是任何可靠的 web 应用程序的支柱，当创建一个进步的 web 应用程序时，服务人员是绝对必要的。</p><p id="7816" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是 Create React App 最常见的用例是什么呢？开发人员多久开始一次需要这种级别的可配置性和优化的全新项目？</p><p id="6805" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不经常。</p><blockquote class="ly"><p id="48af" class="lz ma hu bd mb mc md me mf mg mh jz ek translated">大多数时候，我们都在创建概念验证、教程、示例应用程序和准系统 bug 复制应用程序。</p></blockquote><p id="dbd4" class="pw-post-body-paragraph jc jd hu je b jf mi jh ji jj mj jl jm jn mk jp jq jr ml jt ju jv mm jx jy jz hn dt translated">我并不是说 Create React App 没有用途，但是对于人们经常使用它的许多用例来说，它实在是太臃肿了。我们不能一直将创建 React 应用视为一种一刀切的方法。</p><h1 id="0b1b" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">初学者的视角</h1><p id="b604" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">让我们从初学者的角度来思考这个问题。让我们假设我们以某种方式忽略了<code class="eh le lf lg lh b">public</code>文件夹，而专注于<code class="eh le lf lg lh b">src</code>。</p><p id="dacd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">也许从这个角度来看，我们可以开始明白为什么创建 React App 可能并不总是最好的默认选项。</p><h2 id="8ebc" class="mn kc hu bd kd mo mp mq kh mr ms mt kl jn mu mv kp jr mw mx kt jv my mz kx na dt translated">CSS 文件</h2><p id="b93f" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">首先，迎接你的是两个 CSS 文件，你的第一个问题可能是:“我的样式应该放在哪里？”。</p><p id="391c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">过一会儿，您可能会认为<code class="eh le lf lg lh b">index.css</code>是放置全局样式的地方，而<code class="eh le lf lg lh b">App.css</code>是放置特定于组件的样式的地方。然而，这实际上并不正确，因为<code class="eh le lf lg lh b">App.css</code>并不是自动的组件范围。如果包含它，样式将应用于整个应用程序。</p><p id="417a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为什么项目不能从一个 CSS 文件开始？或者如果我们只是在做一个示例 app 或者 bug 重现 app，可能根本不需要 CSS 文件。</p><h2 id="7aed" class="mn kc hu bd kd mo mp mq kh mr ms mt kl jn mu mv kp jr mw mx kt jv my mz kx na dt translated">Javascript 文件</h2><p id="f00e" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们可能会发现<code class="eh le lf lg lh b">index.js</code>是我们应用程序的入口点，而<code class="eh le lf lg lh b">App.js</code>是我们的顶层组件。这部分不难，但是另外两个文件是怎么回事？</p><p id="9f63" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">听起来确实像是一个测试，但是等等，我还没学会反应呢！React 有测试框架吗？是用 Jest 还是摩卡？我总是需要测试才能使用 React 吗？</p><p id="6201" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">哦，这还不是全部。这个<code class="eh le lf lg lh b">serviceWorker.js</code>是什么？在谷歌上快速搜索“服务人员”告诉我，这与离线功能和渐进式网络应用有关。</p><p id="ffa4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我几乎没有开始制作任何组件，你是在告诉我，我制作的每个 React 应用都应该是一个进步的 web 应用吗？！</p><h2 id="31b9" class="mn kc hu bd kd mo mp mq kh mr ms mt kl jn mu mv kp jr mw mx kt jv my mz kx na dt translated">挫折</h2><p id="8cf7" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在这一点上，我认为初学者使用 Create React 应用程序进行学习将会非常困难。</p><p id="f97b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是否比开发自己的 Webpack 配置更好？当然，但在 2019 年，我认为我们有更好的选择。</p><h1 id="5300" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">一个真正最小的解决方案</h1><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff nb"><img src="../Images/eba39583e9e9183d038f34383dc30353.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*avmiJXf-IieRGyFU170gJg.png"/></div><figcaption class="ln lo fg fe ff lp lq bd b be z ek">The file structure of a Nano React App</figcaption></figure><p id="0dfc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有时(即经常)您希望快速投入 React，在没有任何干扰的情况下生产一些组件。</p><blockquote class="ly"><p id="e880" class="lz ma hu bd mb mc md me mf mg mh jz ek translated">这也是<a class="ae ka" href="https://github.com/adrianmcli/nano-react-app" rel="noopener ugc nofollow" target="_blank"> Nano React App </a>产生的原因。</p></blockquote><p id="044c" class="pw-post-body-paragraph jc jd hu je b jf mi jh ji jj mj jl jm jn mk jp jq jr ml jt ju jv mm jx jy jz hn dt translated">这是建立在<a class="ae ka" href="https://parceljs.org" rel="noopener ugc nofollow" target="_blank">包</a>之上的，它是一个网络应用捆绑器(像 Webpack 一样),包括许多开箱即用的智能默认设置。如果您的计算机有多个内核，它也可以比 Webpack 快得多。</p><p id="7417" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了让你对 Parcel 的受欢迎程度有个概念，在撰写本文时:Parcel 在 Github 上有<a class="ae ka" href="https://github.com/parcel-bundler/parcel/stargazers" rel="noopener ugc nofollow" target="_blank">29753 颗星</a>，而 Webpack 有<a class="ae ka" href="https://github.com/webpack/webpack/stargazers" rel="noopener ugc nofollow" target="_blank">46955 颗星</a>。也就是说，这无论如何都不是一个默默无闻的项目。</p><p id="0510" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">生成的 app 代码很少<strong class="je hv"> <em class="lu">不再需要弹出</em> </strong>。只包括两个脚本，一个开发服务器和一个生产构建脚本。</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/510ea4d6afda86531752bdece3e1512f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*iWo_4ELxe5HF5DxHCY6sPA.png"/></div></figure><h2 id="acc4" class="mn kc hu bd kd mo mp mq kh mr ms mt kl jn mu mv kp jr mw mx kt jv my mz kx na dt translated">它还有什么没有的？</h2><p id="afc5" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">除了不能弹出:</p><ul class=""><li id="bae9" class="nd ne hu je b jf jg jj jk jn nf jr ng jv nh jz ni nj nk nl dt translated">没有林挺</li><li id="018d" class="nd ne hu je b jf nm jj nn jn no jr np jv nq jz ni nj nk nl dt translated">没有测试</li><li id="4d04" class="nd ne hu je b jf nm jj nn jn no jr np jv nq jz ni nj nk nl dt translated">没有服务人员</li></ul><p id="fa8e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我再次重申，这些对于生产应用程序来说是非常重要的。但是对于一个小的教程或者一个简单的 bug 复制应用，这些东西会增加你的难度。</p><p id="47e2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您决定要这些东西，您可以轻松地集成它们，而不必“退出”和彻底改变项目的文件结构。</p><h2 id="811b" class="mn kc hu bd kd mo mp mq kh mr ms mt kl jn mu mv kp jr mw mx kt jv my mz kx na dt translated"><em class="nr">试试看！</em></h2><p id="3fcc" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">要使用<a class="ae ka" href="https://github.com/adrianmcli/nano-react-app" rel="noopener ugc nofollow" target="_blank"> Nano React App </a>，只需运行:</p><pre class="lj lk ll lm fq ns lh nt nu aw nv dt"><span id="1954" class="mn kc hu lh b fv nw nx l ny nz">npx nano-react-app my-app</span></pre><p id="9e1f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong> <code class="eh le lf lg lh b">npx</code>是与 node 的现代版本捆绑在一起的一个命令，它允许您运行一个二进制文件，而不必先执行<code class="eh le lf lg lh b">npm install</code>。</p><p id="9a4b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将把一个<a class="ae ka" href="https://github.com/adrianmcli/nano-react-app-template" rel="noopener ugc nofollow" target="_blank">模板</a>应用解压到您选择的目录中(在这个例子中是<code class="eh le lf lg lh b">my-app</code>)。我们支持与 Create React 应用程序相同的 Babel 转换，因此可以随意使用组件方法的类属性。</p><p id="c2ee" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们不为你运行<code class="eh le lf lg lh b">npm install</code>，所以模板工程的解包速度极快。也没有<code class="eh le lf lg lh b">package-lock.json</code>或<code class="eh le lf lg lh b">yarn.lock</code>档。这样做是有意的，因为我们不想固执己见于你应该使用<code class="eh le lf lg lh b">yarn</code>还是<code class="eh le lf lg lh b">npm</code>。</p><p id="ffe6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">感谢阅读！</p></div></div>    
</body>
</html>