<html>
<head>
<title>[Nodejs] 4Steps Set up AWS Lambda with githiub and travisCI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">[Nodejs]4使用githiub和travisCI设置AWS Lambda的步骤</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/nodejs-4steps-set-up-aws-lambda-with-githiub-and-travisci-tutorial-example-sample-repository-repo-help-cdci-6e55d539f04?source=collection_archive---------13-----------------------#2019-06-28">https://medium.com/hackernoon/nodejs-4steps-set-up-aws-lambda-with-githiub-and-travisci-tutorial-example-sample-repository-repo-help-cdci-6e55d539f04?source=collection_archive---------13-----------------------#2019-06-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/10caca7c5f3b65c1263cba87fc23f4a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZ1ufDD7mHPpsmdrdzM5QA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">[Nodejs] Set up AWS Lambda with githiub and travisCI</figcaption></figure><p id="d7ad" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这是一个<code class="eh ke kf kg kh b">Node.js</code>样板/startKit，它使用Travis CI为Github中的AWS Lambda配置连续部署流程。流程:<code class="eh ke kf kg kh b">github</code>-&gt;-<code class="eh ke kf kg kh b">travisCI</code>-&gt;-<code class="eh ke kf kg kh b">aws lambda</code></p><p id="e349" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt ki translated"><span class="l kj kk kl bm km kn ko kp kq di"> C </span>哈兰格斯，在我钻研这个过程的时间里，有一些困难，你必须花时间阅读<code class="eh ke kf kg kh b">AWS</code>和<code class="eh ke kf kg kh b">TravisCI:</code>的文件</p><ol class=""><li id="279f" class="kr ks hu ji b jj jk jn jo jr kt jv ku jz kv kd kw kx ky kz dt translated"><strong class="ji hv"> IAM配置</strong>，了解<code class="eh ke kf kg kh b">AWS_ACCESS_KEY_ID </code>和<code class="eh ke kf kg kh b">AWS_SECRET_ACCESS_KEY </code>如何在Node.js上工作，以及如何影响AWS的服务。</li><li id="be21" class="kr ks hu ji b jj la jn lb jr lc jv ld jz le kd kw kx ky kz dt translated"><strong class="ji hv"> TravisCI生命周期</strong>，需要阅读它的doc，使流程清晰一个项目是如何<code class="eh ke kf kg kh b">build</code>、<code class="eh ke kf kg kh b">run</code>、<code class="eh ke kf kg kh b">test</code>、<code class="eh ke kf kg kh b">deploy</code>的。</li><li id="fc55" class="kr ks hu ji b jj la jn lb jr lc jv ld jz le kd kw kx ky kz dt translated"><strong class="ji hv"> AWS Lambda部署</strong>，Lambda功能的部署方式有几种，像<code class="eh ke kf kg kh b">zip</code>、<code class="eh ke kf kg kh b">serverless</code>、<code class="eh ke kf kg kh b">codepipeline</code>、<code class="eh ke kf kg kh b">aws cli </code>或者<code class="eh ke kf kg kh b">Nodejs SDK.</code>每种方式都有很小的不同，需要不同的凭证。<em class="lf"> ( </em> <code class="eh ke kf kg kh b"><em class="lf">zip</em></code> <em class="lf">是我挑的)</em></li></ol><h1 id="b380" class="lg lh hu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md dt translated">步骤1 —创建lambda函数</h1><p id="82d0" class="pw-post-body-paragraph jg jh hu ji b jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd hn dt translated">创建lambda函数，<code class="eh ke kf kg kh b">helloworld</code></p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mj"><img src="../Images/d0568c15363f683ae54ff226ada0cee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*C4Lg2TDtuVfZi3LF.png"/></div></div></figure><h1 id="47db" class="lg lh hu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md dt translated">步骤2-创建和设置部署用户</h1><p id="9a5e" class="pw-post-body-paragraph jg jh hu ji b jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd hn dt translated">使用策略<code class="eh ke kf kg kh b">lambda full access</code>创建用户，从<code class="eh ke kf kg kh b">IAM</code>获取访问id和密码</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mo"><img src="../Images/90fa11b1f749c9e47c27eb389470d834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Bm9cJZH8t0d8xEl-.png"/></div></div></figure><p id="6a22" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">并设置环境变量</p><pre class="mk ml mm mn fq mp kh mq mr aw ms dt"><span id="9b12" class="mt lh hu kh b fv mu mv l mw mx">$ export AWS_ACCESS_KEY_ID="yourkey"<br/>$ export AWS_SECRET_ACCESS_KEY="yoursecret"</span></pre><h1 id="ed8e" class="lg lh hu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md dt translated">步骤3 —本地配置</h1><h1 id="e30b" class="lg lh hu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md dt translated">步骤3.1 —设置lambda名称</h1><p id="aa53" class="pw-post-body-paragraph jg jh hu ji b jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd hn dt translated">在上设置lambda函数名</p><ul class=""><li id="3875" class="kr ks hu ji b jj jk jn jo jr kt jv ku jz kv kd my kx ky kz dt translated"><code class="eh ke kf kg kh b">./lambda/yourname</code></li><li id="fa3f" class="kr ks hu ji b jj la jn lb jr lc jv ld jz le kd my kx ky kz dt translated">在此设定您的姓名:<code class="eh ke kf kg kh b">./lambda/yourname/package.json</code></li></ul><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mz"><img src="../Images/d72289013a82130dbcdaccc77f705c90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0MPy7u7uM0WAPSlZ.png"/></div></div></figure><h1 id="472a" class="lg lh hu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md dt translated">步骤3.2-设置lambda区域</h1><p id="da9d" class="pw-post-body-paragraph jg jh hu ji b jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd hn dt translated">和设置区域</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff na"><img src="../Images/fe435653d948629e696eee1c48a1d10b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*296PckQ9_kwi8j9X.png"/></div></div></figure><h1 id="f86e" class="lg lh hu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md dt translated">步骤3.3 —设置TravisCI</h1><p id="decd" class="pw-post-body-paragraph jg jh hu ji b jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd hn dt translated">和设置区域</p><figure class="mk ml mm mn fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff na"><img src="../Images/5e38c5e5c8abc8806e587a5f0bc95944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-_qQ-npCoL6V9zYl.png"/></div></div></figure><h1 id="ebb5" class="lg lh hu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md dt translated">第四步——跑步</h1><p id="5a8d" class="pw-post-body-paragraph jg jh hu ji b jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd hn dt translated">克隆这个项目<a class="ae nb" href="https://github.com/p-tool/nodejs-aws-lambda-travisci" rel="noopener ugc nofollow" target="_blank">https://github.com/p-tool/nodejs-aws-lambda-travisci</a>并运行</p><pre class="mk ml mm mn fq mp kh mq mr aw ms dt"><span id="1967" class="mt lh hu kh b fv mu mv l mw mx">$ npm run deploy<br/>// or yarn deploy</span></pre><h1 id="c94e" class="lg lh hu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md dt translated">结论</h1><p id="b1a8" class="pw-post-body-paragraph jg jh hu ji b jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd hn dt translated">样本travisCI<a class="ae nb" href="https://travis-ci.org/p-tool/nodejs-aws-lambda-travisci" rel="noopener ugc nofollow" target="_blank">https://travis-ci.org/p-tool/nodejs-aws-lambda-travisci</a>，连接到样本Github Repo【https://github.com/p-tool/nodejs-aws-lambda-travisci T2】的</p></div><div class="ab cl nc nd hc ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hn ho hp hq hr"><h1 id="5bc7" class="lg lh hu bd li lj nj ll lm ln nk lp lq lr nl lt lu lv nm lx ly lz nn mb mc md dt translated">参考</h1><ul class=""><li id="824f" class="kr ks hu ji b jj me jn mf jr no jv np jz nq kd my kx ky kz dt translated">【https://github.com/marcenacp/hello-world-lambda T4】</li><li id="4689" class="kr ks hu ji b jj la jn lb jr lc jv ld jz le kd my kx ky kz dt translated"><a class="ae nb" href="https://github.com/p-tool/nodejs-aws-lambda-travisci" rel="noopener ugc nofollow" target="_blank">https://github.com/p-tool/nodejs-aws-lambda-travisci</a></li><li id="4260" class="kr ks hu ji b jj la jn lb jr lc jv ld jz le kd my kx ky kz dt translated"><a class="ae nb" href="https://docs.travis-ci.com/user/deployment/lambda/" rel="noopener ugc nofollow" target="_blank">https://docs.travis-ci.com/user/deployment/lambda/</a></li><li id="e4ed" class="kr ks hu ji b jj la jn lb jr lc jv ld jz le kd my kx ky kz dt translated"><a class="ae nb" href="https://travis-ci.org/p-tool/nodejs-aws-lambda-travisci" rel="noopener ugc nofollow" target="_blank">https://travis-ci.org/p-tool/nodejs-aws-lambda-travisci</a></li></ul></div></div>    
</body>
</html>