<html>
<head>
<title>Hacking Git and Vim together</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一起破解 Git 和 Vim</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/hacking-git-and-vim-together-272a5830708a#2019-03-21">https://medium.com/hackernoon/hacking-git-and-vim-together-272a5830708a#2019-03-21</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/687f69b4257388570ef3ecfa022aef24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h84_OXDECybyzwsmdXX4dg.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Hacking… just not the type of hacking you’re thinking</figcaption></figure><p id="a536" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如今，在我作为程序员的工作中，我大量使用 Vim 和 Git。我说的很多是指<strong class="ji hv">很多</strong>！</p><p id="b013" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Vim 的最新版本将终端带到了 Vim。因此，将它用作窗口管理器并为 Vim 提供专用缓冲区应该更容易。你做你的工作，你去 Vim 专用缓冲区并提交你所有的修改。<br/>更好的是，Vim 已经有很多插件专门用于在 Vim 内部操作 Git。像<a class="ae ke" href="https://github.com/tpope/vim-fugitive" rel="noopener ugc nofollow" target="_blank">vim-逃犯</a>、<a class="ae ke" href="https://github.com/tpope/vim-git" rel="noopener ugc nofollow" target="_blank"> git-vim </a>或<a class="ae ke" href="https://github.com/airblade/vim-gitgutter" rel="noopener ugc nofollow" target="_blank"> vim-gitgutter </a>这样的插件浮现在脑海中。</p><p id="ef36" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但你知道我，我算是一个黑客…在某种意义上，我喜欢一起黑东西(不是邪恶的蒙面密码窃取者类型的黑客)。</p><p id="057f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我很快意识到，90%的时间我使用相同的 3 或 4 个基本 Git 命令，因为我们可以使用 bang(！)为了在 Vim 中从命令模式执行 shell 命令，我决定将几个命令和映射组合在一起，帮助我进行基本的 Git 使用，而不必离开 Vim，没有专用的终端缓冲区，也没有插件的开销。</p><p id="0a69" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我首先使用 bang 操作符在 Vim 中运行基本的 shell 命令。运行这些命令的结果显示在一个新窗口中。</p><p id="0c71" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">像这样的命令</p><p id="f682" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh kf kg kh ki b"><em class="kj">:!git diff<br/>:!git commit<br/>:!git log</em></code></p><p id="cf93" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">属于这一类。至此，我也意识到，常用的、经常使用的命令可以也应该被映射。例如:</p><p id="b49e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh kf kg kh ki b"><em class="kj">map &lt;F3&gt; :!git diff</em></code></p><p id="7ce3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这些是我在这个黑客项目中的第一次实验。但我很快意识到，涉及多个文件的命令，如<em class="kj"> add </em>或<em class="kj"> commit </em>以及可能有很长输出的命令，如<em class="kj"> diff </em>会导致一些问题。</p><p id="c744" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">那是我开始使用<strong class="ji hv"> % </strong>操作符的时刻。操作符包含了当前文件的路径。因此，类似以下的命令:</p><p id="8457" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh kf kg kh ki b"><em class="kj">:!git diff %<br/>:!git commit -m “Commit message nº1” %</em></code></p><p id="90be" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在只考虑当前文件。这样，我可以更好地管理我的提交，并在没有太大问题的情况下检查非常具体的差异。</p><p id="5099" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">另一个真正有用的命令是<em class="kj"> :r！</em>命令。这个命令一开始有点难以理解。在 Vim 帮助页面中，我们可以看到<em class="kj"> :r！</em>命令:</p><blockquote class="kk kl km"><p id="1897" class="jg jh kj ji b jj jk jl jm jn jo jp jq kn js jt ju ko jw jx jy kp ka kb kc kd hn dt translated">执行{cmd}并将其标准输出插入光标或指定行的下方。使用一个临时文件来存储命令的输出，然后将该输出读入缓冲区。</p></blockquote><p id="760d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">每当我想把一些输出粘贴到一个文件中时，我就使用这个命令。我习惯了使用类似<em class="kj"> :r 这样的命令！吉特差异</em>。这样，我在一个临时文件中保存了完整的 diff。</p><figure class="kr ks kt ku fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kq"><img src="../Images/d2ead0c39f11d31afcb68773299ab14e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JggJLMOPdaUrHEl0NM35HQ.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Storing output into files to parse with shell commands can be really useful.</figcaption></figure><p id="4488" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">经过一些反复试验，我最终得到了几个映射，它们反映了我最基本的 Git 用法。我一直在用的那种操作。对于像合并分支、创建分支、存储或分支创建这样的事情，我仍然喜欢启动终端，边打字边思考。</p><p id="5f92" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh kf kg kh ki b"><em class="kj">map &lt;F1&gt; :! git status<br/>map &lt;F2&gt; :! git diff %<br/>map &lt;F3&gt; :! git add %<br/>map &lt;F4&gt; :! git commit -m “This commit was automatically created with Vim” %<br/>map &lt;F5&gt; :! git log — oneline — abbrev-commit</em></code></p><p id="adbc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">仅仅使用这 5 行代码，我就能够在 Vim 中合理地提高我的 Git 使用速度。</p><p id="1716" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这对我很有效，这是一个很好的练习。我绝对推荐你尝试一下，但是也看看一些为这个效果创建的插件，因为它们有更多的功能和思想。</p><p id="2236" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后，我建议你测试所有的东西，但是只使用对你有效的东西！</p></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><figure class="kr ks kt ku fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lc"><img src="../Images/053f3cacbb0c0a4d951a5d9075cfbc3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ZjfXGpUJUWfbJIlMY0XtA.png"/></div></div></figure><p id="2ab2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">想了解更多关于 Vim 的知识？想学习如何将其用作 IDE？看看我的新书<a class="ae ke" href="https://leanpub.com/anidecalledvim" rel="noopener ugc nofollow" target="_blank">一个叫做 Vim </a>的 IDE。从基本的 Vim 使用到文件查找、自动完成、文件管理器等等，它都有。</p></div></div>    
</body>
</html>