<html>
<head>
<title>Competing Frameworks: Alibaba Puts SDK Flutter to the Test</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">竞争框架:阿里巴巴测试SDK Flutter</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/competing-frameworks-alibaba-puts-sdk-flutter-to-the-test-88eb8cf1f35a?source=collection_archive---------1-----------------------#2019-01-24">https://medium.com/hackernoon/competing-frameworks-alibaba-puts-sdk-flutter-to-the-test-88eb8cf1f35a?source=collection_archive---------1-----------------------#2019-01-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="243b" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated"><em class="jj">阿里巴巴二手交易平台闲鱼背后的团队探究了为什么其选择的SDK击败了其他竞争对手</em></h2></div><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff jk"><img src="../Images/68293d7dc380ba45e41c540dcbb8b505.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6V0zxof1-xUBKpBSDoXR_w.png"/></div></div></figure><p id="48fe" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated"><em class="ks">本文是阿里巴巴</em> <a class="ae kt" rel="noopener" href="/@alitech_2017/utilizing-flutter-best-practice-from-alibaba-236a53aa32c8"> <strong class="jy hv"> <em class="ks">利用旋舞</em> </strong> </a> <em class="ks">系列的一部分。</em></p><p id="eecc" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt">Behind the scenes of Alibaba’s second-hand trading platform Xianyu(闲鱼), a new-generation client architecture is at work supporting its unique business scenarios. Many following its technical development have wondered why this architecture uses the Flutter SDK over other cross-end solutions, generally focusing on the question of performance. In fact, while Flutter pages do show a performance advantage over Native pages in low-end models, the platform’s developers did not even consider performance optimization until after Flutter was already deployed.</p><p id="f636" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">对于Xianyu团队来说，Flutter的易实现性符合尽快将产品细节页面上线的目标，功能的实现是重中之重。为此，开发人员并没有将Flutter作为Native的替代品，而是将其作为增强的跨端解决方案的一部分。</p><p id="6a4d" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">根据一位领先的Xianyu开发者的见解，本文将基于Flutter的解决方案与React Native进行了优势对比，以说明为什么它为像Xianyu这样的应用程序提供了如此强大的支持结构。</p><h1 id="7e98" class="ku kv hu bd kw kx ky kz la lb lc ld le ja lf jb lg jd lh je li jg lj jh lk ll dt translated">为竞争创造条件</h1><p id="e8b8" class="pw-post-body-paragraph jw jx hu jy b jz lm iv kb kc ln iy ke kf lo kh ki kj lp kl km kn lq kp kq kr hn dt translated">Flutter是谷歌的开源SDK，用于高质量的原生iOS和Android移动界面，与现有代码一起工作，以创纪录的时间制作应用程序。为了测试，Xianyu团队将其与React Native (RN)的大规模重新架构进行了比较，React Native(RN)旨在提高灵活性，并更好地与混合JavaScript/原生应用中的原生基础设施集成。</p><p id="c4e3" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">该团队没有开发自己的测试应用，而是在Github上联系了跨终端开发专家Car Guo，他之前在Flutter和RN中开发了两个实用的应用。作为旨在帮助个人Github账户日常管理和维护的Github客户端应用，这些应用提供了极具代表性的比较基础。</p><p id="d6ca" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">在场景方面，团队为两个应用程序应用了四个挑战，如下所示:</p><p id="13b5" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">1.成功完成默认登录。</p><p id="c7e8" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">2.在动态页面，点击搜索按钮，搜索关键词“Java”；以正常速度浏览三页，然后在加载第四页后返回第三页。</p><p id="7d9f" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">3.单击“趋势”页面选项卡并浏览“订阅源”,直到到达页面底部。点击页面最末端的“项目”。进入“项目”后，浏览详细信息和三页信息，然后返回到“我的”选项卡页面。</p><p id="f477" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">4.在“我的”中查看Feeds到最后。点击右上角的搜索按钮，搜索关键词“C”。浏览三页后，等待第四页加载。</p><p id="d538" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">为了测试，该团队使用了iOS和Android设备。对于前者，在手机上测试(iOS端)依赖CPU和内存进行监控，使用仪器的核心动画来获取FPS对于后者，CPU、内存和FPS是通过基于adb的Shell脚本获得的。</p><p id="ec12" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">iOS的测试机型为iPhone 5c 9.0.1和iPhone 6S 10.3.2，分别为低端和中端机型；Android的测试型号是小米2S 5.0.2和三星S8 7.0，分别是低端和高端型号。</p><h1 id="095f" class="ku kv hu bd kw kx ky kz la lb lc ld le ja lf jb lg jd lh je li jg lj jh lk ll dt translated">数据分析:iOS</h1><p id="ad8b" class="pw-post-body-paragraph jw jx hu jy b jz lm iv kb kc ln iy ke kf lo kh ki kj lp kl km kn lq kp kq kr hn dt translated">下图分别详细描述了iPhone 5c和iPhone 6S试用版的测试结果。</p><h2 id="1c71" class="lr kv hu bd kw ls lt lu la lv lw lx le kf ly lz lg kj ma mb li kn mc md lk me dt translated">iPhone 5c 9.0.1</h2><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff mf"><img src="../Images/4bb82bf361dba27b01d806f3aa33a7ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X7OgoUYmGhv60-B5_x0jEw.png"/></div></div></figure><h2 id="6148" class="lr kv hu bd kw ls lt lu la lv lw lx le kf ly lz lg kj ma mb li kn mc md lk me dt translated">iPhone 6S 10.3.2</h2><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff mg"><img src="../Images/0bd160feba33180be717b35af5d9685c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lFkqJTrLTLLrND7Ed_OgvQ.png"/></div></div></figure><h2 id="b6b7" class="lr kv hu bd kw ls lt lu la lv lw lx le kf ly lz lg kj ma mb li kn mc md lk me dt translated">调查的结果</h2><p id="29ae" class="pw-post-body-paragraph jw jx hu jy b jz lm iv kb kc ln iy ke kf lo kh ki kj lp kl km kn lq kp kq kr hn dt translated">测试表明，Flutter在中低端iOS模型上的性能优于RN。CPU使用率方面，Flutter在低端机型上的表现略低于RN，但在中端机型上表现更好。</p><p id="aea9" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">内存性能是一个关键的比较因素，如上图中的红色箭头所示。尽管Flutter在低端型号上的起始内存与RN的大致相同，但在中档型号上，它比RN的高出约30M。(分析显示是Dart VM内存。)这是Flutter对低端和中档机型采用不同内存策略的结果。在可用内存较少的型号中，Dart VM的初始内存较少，并在运行时分配内存，这有助于解释为什么低端型号在CPU消耗方面显示出更大的损失。在中端机型中，为处理预分配了更多虚拟机内存，减少了CPU干预，提供了更流畅的体验。</p><p id="1f25" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">简而言之，为了提供更好的用户体验，Flutter团队似乎采取了更细致的方法来设计不同的型号。</p><h1 id="30f5" class="ku kv hu bd kw kx ky kz la lb lc ld le ja lf jb lg jd lh je li jg lj jh lk ll dt translated">数据分析:安卓</h1><p id="3e8e" class="pw-post-body-paragraph jw jx hu jy b jz lm iv kb kc ln iy ke kf lo kh ki kj lp kl km kn lq kp kq kr hn dt translated">下图分别详细描述了小米2S和三星S8的测试结果。</p><h2 id="57de" class="lr kv hu bd kw ls lt lu la lv lw lx le kf ly lz lg kj ma mb li kn mc md lk me dt translated">小米2S 5.0.2</h2><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff mh"><img src="../Images/3b6501816272249e3fbeef971b7eedf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BTOFf1U0VVUuzDwX7LTF6w.png"/></div></div></figure><h2 id="f3dd" class="lr kv hu bd kw ls lt lu la lv lw lx le kf ly lz lg kj ma mb li kn mc md lk me dt translated">三星S8 7.0</h2><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff mi"><img src="../Images/b8f7be9275c2d32eea84d50618c9a31d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H7lAu-yBfw3Tvu8QU3X31Q.png"/></div></div></figure><h2 id="584a" class="lr kv hu bd kw ls lt lu la lv lw lx le kf ly lz lg kj ma mb li kn mc md lk me dt translated">调查的结果</h2><p id="b187" class="pw-post-body-paragraph jw jx hu jy b jz lm iv kb kc ln iy ke kf lo kh ki kj lp kl km kn lq kp kq kr hn dt translated">在CPU使用率方面，Flutter在高端和低端机型上都优于RN，在低端的小米2S上优势尤为明显。对于Android机型，在原有的FPS参数上增加了平滑度指标，Flutter的平滑度表现明显超过RN。</p><p id="ab4d" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">在Android机型中，内存是一个特别值得注意的标准，小米2S上Flutter的启动内存比RN高出4000万。然而，RN的内存使用量在测试期间飙升，而Flutter的保持相对稳定。这是因为RN代码需要进行内存调整。对于给定的一组代码，Flutter的内存使用在Android和iOS上非常相似，而RN的只在这两个系统中的一个上进行调优。颤振因此在记忆范畴内超过RN。</p><p id="0380" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">奇怪的是，在三星S8型号上，Flutter和RN具有相同的初始内存。仙宇团队推测RN在高端Android机型上也预分配了一定量的内存，但需要进一步的研究来证实这一点。</p><h1 id="5793" class="ku kv hu bd kw kx ky kz la lb lc ld le ja lf jb lg jd lh je li jg lj jh lk ll dt translated">为胜利者加冕</h1><p id="a2f9" class="pw-post-body-paragraph jw jx hu jy b jz lm iv kb kc ln iy ke kf lo kh ki kj lp kl km kn lq kp kq kr hn dt translated">基于上述标准，在与React Native的竞争中，Flutter在经验和测试数据方面都是明显的赢家。由于开发人员Car Guo没有为测试应用程序投资重大的性能调整，这些评估提供了一个相当客观的基础，表明Flutter可以在跨端开发中提供更好的用户体验。</p><p id="25f6" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">测试之后，问题仍然存在，为什么Flutter能够提供比其他框架更好的平滑度，它如何优化渲染，以及Dart VM运行时如何工作。在以后的文章中，我们将深入探讨仙寓团队是如何寻找和发现这些问题的答案的。</p><p id="1516" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt"><strong class="jy hv"><em class="ks">(The original article is written by Wang Huayin王华胤)</em></strong></p></div><div class="ab cl mj mk hc ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hn ho hp hq hr"><h1 id="dbad" class="ku kv hu bd kw kx mq kz la lb mr ld le ja ms jb lg jd mt je li jg mu jh lk ll dt translated">阿里巴巴科技</h1><p id="01dc" class="pw-post-body-paragraph jw jx hu jy b jz lm iv kb kc ln iy ke kf lo kh ki kj lp kl km kn lq kp kq kr hn dt translated">关于阿里巴巴最新技术的第一手深度资料→脸书:<a class="ae kt" href="http://www.facebook.com/AlibabaTechnology" rel="noopener ugc nofollow" target="_blank"> <strong class="jy hv">“阿里巴巴科技”</strong> </a>。推特:<a class="ae kt" href="https://twitter.com/AliTech2017" rel="noopener ugc nofollow" target="_blank"> <strong class="jy hv">【阿里巴巴技术】</strong> </a>。</p></div></div>    
</body>
</html>