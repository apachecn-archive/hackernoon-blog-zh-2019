<html>
<head>
<title>How I Found Stored XSS in Thousands of Sites under Typepad</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何在Typepad下的数千个网站中找到存储的XSS</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-i-found-stored-xss-in-thousands-of-sites-under-typepad-ee7632e1c774?source=collection_archive---------9-----------------------#2019-02-12">https://medium.com/hackernoon/how-i-found-stored-xss-in-thousands-of-sites-under-typepad-ee7632e1c774?source=collection_archive---------9-----------------------#2019-02-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/16bac1cd8412b6f5e080b36a82a0a663.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OIPFXvOI-7bVNDHld9b8Gg.png"/></div></div></figure><p id="9846" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">注意——作者不会因为公开这个bug而对任何人造成的伤害负责。这是出于教育目的而出版的。</p><p id="03a9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这篇文章中，我将分享我的一个发现，我在由Typepad驱动的博客中发现了存储的xs。(<em class="ka">这个bug在很多网站还没有修复！0天？IDK :\) </em>)</p><h1 id="0d48" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated"><strong class="ak">打字本——那是什么？</strong></h1><p id="b565" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">Typepad是耐力国际集团旗下的博客服务，之前由SAY Media所有。它属于Wordpress、Blogger、Tumblr等顶级在线博客平台。</p><p id="c2e3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">根据维基百科的说法，Typepad目前被许多大型组织和媒体公司用来托管他们的博客，如美国广播公司、MSNBC、加拿大广播公司、英国广播公司和天空新闻。</p><p id="69e5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">除此之外，它还被用作一个个人博客平台，有自定义的网址和anysite.typepad.com格式。</p><h1 id="7b4b" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">查找存储的XSS</h1><figure class="lf lg lh li fq iv"><div class="bz el l di"><div class="lj lk l"/></div></figure><p id="3b5f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个bug是我去年发现并举报的。我在微软运行的一个子域中发现了这个存储的XSS问题。虽然微软通过将我的名字列入名人堂承认了这个问题，但他们建议我直接向Typepad报告这个问题，因为存储XSS是由评论框(由Typepad提供支持)引起的。</p><h1 id="4120" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">更多细节-</h1><p id="4a93" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在每篇Typepad博客文章之后，都有一个评论选项(允许使用html标签。)</p><p id="a0c5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">请注意，这适用于特殊类型的评论框，它允许使用标签。然而，在这篇文章发表后，我的黑客朋友可能会在其他人身上发现这一点。；)</p><figure class="lf lg lh li fq iv fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/4d0503d3795b5289a245c9d3c38e2d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*PNjsUk4CXoh-171M7n0x0w.png"/></div><figcaption class="lm ln fg fe ff lo lp bd b be z ek">Comment Box Vulnerable</figcaption></figure><p id="2447" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">嘿，但是XSS的有效载荷是什么呢？</p><blockquote class="lq lr ls"><p id="6e78" class="jc jd ka je b jf jg jh ji jj jk jl jm lt jo jp jq lu js jt ju lv jw jx jy jz hn dt translated"><p><a title="””" href="”wow/&quot;&gt;&lt;img" src="x" onerror="alert(‘hi’)&gt;”target=”_self”">&gt;&lt;</a></p></p></blockquote><p id="3c2f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">每当页面被加载时，这个有效负载触发一个永久存储的XSS。</p><figure class="lf lg lh li fq iv"><div class="bz el l di"><div class="lj lk l"/></div></figure><h1 id="fb5a" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated"><strong class="ak">即时预防步骤</strong></h1><p id="9a32" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我注意到在一段时间后，评论选项会自动关闭。我真的不知道这是否是业主定制的。</p><p id="d835" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">网站管理员也可以在评论直接发布到网站之前对其进行审核。</p><p id="ac3b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用Cloudfare的网站也会阻止这种有效载荷。</p><h1 id="2a31" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated"><strong class="ak">外卖</strong></h1><figure class="lf lg lh li fq iv fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/d48e3d6a347ba0895f14dc9c5cc968f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*31mYnH1qR3Pb9F7Q4lLapA.png"/></div></figure><p id="8b6e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">几个月前，当我在推特上向一名安全研究人员发布这个问题时，我犯了一个错误，没有检查它是否仍未修复！</p><p id="d053" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我注意到了这一点，同时检查了我最近提交的旧文件，并向他们索要感谢信。(大学佬。)</p><p id="fe87" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果一个网站在这么长时间后继续忽视这个问题，我相信如果我公开披露这一点，就不会有任何问题。:)</p></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><p id="17e8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最初在一年前，当我联系Typepad安全/客户支持团队时，我得到的回复是这样的！</p><figure class="lf lg lh li fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff me"><img src="../Images/fa48f98eec03b3cb4afcb9a614b4dd84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2IpRc8rCrVCrMPvv3WTIww.png"/></div></div></figure><p id="d2ef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">嗯，我完全尊重他们的观点，但我谦卑地认为，他们至少可以在这么长时间后尝试修补这个。</p><p id="0cdf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">前几天看了很多Typepad的博客。80%的人容易受到存储的xs的攻击。我真的不能确定他们是否做了一些事情来修复这个bug，因为他们唯一给我的回复是我们很感谢把这个问题带给我们！</p><p id="13f4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有些Typepad博客易受攻击，而有些则不然。</p><p id="f7e6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下面是我一年前创建的工作漏洞的链接。</p><div class="mf mg fm fo mh mi"><a href="https://www.hypebot.com/hypebot/2017/08/social-media-is-adding-1m-new-users-per-day-total-tops-3b-globally-charts.html" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab ej"><div class="mk ab ml cl cj mm"><h2 class="bd hv fv z el mn eo ep mo er et ht dt translated">社交媒体每天增加100万新用户，总数超过3B全球[图表]</h2><div class="mp l"><h3 class="bd b fv z el mn eo ep mo er et ek translated">来自We Are Social和Hootsuite的新全球数字统计显示，使用社交媒体的人数…</h3></div><div class="mq l"><p class="bd b gc z el mn eo ep mo er et ek translated">www.hypebot.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw ja mi"/></div></div></a></div><p id="21e8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">编辑-本文发表后，上述POC已从网站上删除。</em></p><p id="475a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Typepad有一个被称为“展示”的功能，它在那里张贴最好的博客。我发现这个网站只有通过那里。</p><p id="e44b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我分享一部分我的概念证明-</p><figure class="lf lg lh li fq iv"><div class="bz el l di"><div class="mx lk l"/></div></figure><p id="e237" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">希望这篇文章是有帮助的。你可以在推特上关注我的<a class="ae le" href="https://twitter.com/CircleNinja" rel="noopener ugc nofollow" target="_blank"> @Circleninja </a>。</p></div></div>    
</body>
</html>