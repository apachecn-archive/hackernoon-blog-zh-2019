<html>
<head>
<title>Choosing a React Native Stack That Doesn’t Suck.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">选择一个不烂的React原生栈。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/choosing-a-react-native-stack-that-doesnt-suck-70dde637c9fe?source=collection_archive---------5-----------------------#2019-03-12">https://medium.com/hackernoon/choosing-a-react-native-stack-that-doesnt-suck-70dde637c9fe?source=collection_archive---------5-----------------------#2019-03-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="f4c7" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">如果你想“学一次”，而不是到处都吸，该用什么，该避免什么。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/037f965105b8ae38001973607acf37c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bKtRahHTWWTQlPmednmkhQ.jpeg"/></div></div></figure><p id="386c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">React Native的承诺是“一次学习，随处书写”。此外，很大一部分吸引力是代码重用和利用新兴生态系统的可能性，以提高我们的开发速度和降低我们的可维护性成本。如果React Native做不到这一点，<strong class="jx hv">而不牺牲用户体验</strong>，那就不值得麻烦了。</p><h1 id="6153" class="kr ks hu bd kt ku kv kw kx ky kz la lb ja lc jb ld jd le je lf jg lg jh lh li dt translated"><strong class="ak">良好的第一印象</strong></h1><p id="2305" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">第一次潜入React Native时，我当然感觉到这“不是你爸爸的混合移动开发体验”，并且考虑到我们可以做什么，利用团队现有的JS知识，变得非常兴奋。问题是，当你尝试超越琐碎的入门应用程序时，这并不容易。</p><h2 id="b41c" class="lo ks hu bd kt lp lq lr kx ls lt lu lb ke lv lw ld ki lx ly lf km lz ma lh mb dt translated">容易进入的舱口</h2><p id="2c9b" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">与之前混合技术的承诺有一个微妙但<em class="mc">关键的不同</em>，因为React Native正努力通过javascript向本地世界提供一个跨平台的界面<em class="mc"/>,这就是问题所在。过度依赖javascript来实现应用的核心功能，而不是利用目标平台的原生功能，将会导致性能受限和体验质量下降。</p><blockquote class="md"><p id="f99c" class="me mf hu bd mg mh mi mj mk ml mm kq ek translated">当开始一个React原生项目时，你应该问的一个关键问题是“这实际上会改善或简化开发体验吗？”</p></blockquote><h2 id="a469" class="lo ks hu bd kt lp mn lr kx ls mo lu lb ke mp lw ld ki mq ly lf km mr ma lh mb dt translated">将其与本土发展进行比较</h2><p id="4e98" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">老实说，关于原生开发的许多难点，在使用React Native时仍然是难点。对于许多web开发人员来说，到处使用JS的诱惑很大，但根据我去年的经验，这不是学习Swift和Kotlin(或者java，如果你必须的话)进行原生开发，而是原生生态系统、供应、构建系统、依赖性管理、部署到应用商店、性能分析等。当使用React Native开始一个项目时，你应该问的一个关键问题是“这是否会在满足用户期望的同时真正改善或简化开发体验”。</p><h1 id="296d" class="kr ks hu bd kt ku kv kw kx ky kz la lb ja lc jb ld jd le je lf jg lg jh lh li dt translated">重大选择</h1><p id="5ece" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">有几个关键的交叉问题会影响用户体验，不管是什么应用，我们发现最大的决定如下。</p><h2 id="8d86" class="lo ks hu bd kt lp lq lr kx ls lt lu lb ke lv lw ld ki lx ly lf km lz ma lh mb dt translated">按指定路线发送</h2><p id="0a7c" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">React navigation(React Native中路由的JS解决方案)的受欢迎程度有了极大的提高。我，我肯定像许多人一样，起初觉得这很有意义，并且对它是JS解决方案这一事实感到满意。我对我们的选择很满意，直到我们发现，在一个简单的基于文本的演示应用程序中，一个简单的幻灯片动画在旗舰设备上运行时不会不流畅。现在已经做了广泛的研究，有一些方法可以改善这一点，但正如我稍后将提到的，我认为我们不应该为此付出如此大的努力，尤其是在我们甚至考虑到还有什么可能会争夺设备上宝贵的稀缺资源之前。</p><p id="c0a8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">输入Wix React Native Navigation v2。我不能说转移到这个解决方案是容易的，设置是艰巨的，文档需要很多帮助。也就是说，一旦我们把这些都连接起来，导航就变得流畅了，附带的好处是，我们的代码更整洁，也更容易推理。</p><h2 id="d277" class="lo ks hu bd kt lp lq lr kx ls lt lu lb ke lv lw ld ki lx ly lf km lz ma lh mb dt translated">后端</h2><p id="c853" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">除了自己动手，还有一些很有前途的选择，这完全取决于你的需求。对我们来说，除了授权和推送通知之外，我们最常构建跨平台的web和移动应用，最近还需要基于云的服务，如媒体编码、图形数据等。在过去使用过GCP(和Firebase)、Azure和AWS之后，我最初倾向于AWS，直到我发现了<a class="ae ms" href="https://rnfirebase.io/" rel="noopener ugc nofollow" target="_blank"> Firebase React原生项目</a>。</p><p id="015c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">虽然所有这些服务都很棒，但它们都有各自的优势和劣势。它们都没有为React Native提供第一方原生解决方案。Firebase在生产率方面也是一个胜利，超过了我以前用AWS实现的一个更好的后端。也就是说，我很失望地发现只有JS支持云函数。t</p><p id="7806" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">最终，我们的决定因素是能够安装原生SDK，这提供了一些额外的好处，在他们的文档中详细讨论了这些好处，并将其从JS线程中移除。</p><h2 id="6e73" class="lo ks hu bd kt lp lq lr kx ls lt lu lb ke lv lw ld ki lx ly lf km lz ma lh mb dt translated">用户界面库</h2><p id="159c" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">这似乎是一个与React Native一般的开放区域。有很多库，有些比其他的好，有些更灵活，但最终我对我们使用的每一个都感到失望。从react-native-elements，到native-base，react-native-paper，在构建生产应用程序时，似乎没有一个完全准备好。</p><p id="52fb" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">尽管作为一个整体库，在这个领域没有明显的赢家，但有许多非常有用的组件，我们会反复使用:</p><ul class=""><li id="b804" class="mt mu hu jx b jy jz kb kc ke mv ki mw km mx kq my mz na nb dt translated"><a class="ae ms" href="https://github.com/oblador/react-native-vector-icons" rel="noopener ugc nofollow" target="_blank">反应原生矢量图标</a></li><li id="b984" class="mt mu hu jx b jy nc kb nd ke ne ki nf km ng kq my mz na nb dt translated"><a class="ae ms" href="https://github.com/react-native-community/react-native-linear-gradient" rel="noopener ugc nofollow" target="_blank">反应自然线性渐变</a></li><li id="1bd0" class="mt mu hu jx b jy nc kb nd ke ne ki nf km ng kq my mz na nb dt translated"><a class="ae ms" href="https://github.com/lelandrichardson/react-native-maps" rel="noopener ugc nofollow" target="_blank">反应原生地图</a></li><li id="0d6a" class="mt mu hu jx b jy nc kb nd ke ne ki nf km ng kq my mz na nb dt translated"><a class="ae ms" href="https://github.com/react-native-community/react-native-image-picker" rel="noopener ugc nofollow" target="_blank"> React原生图像拾取器</a></li></ul><p id="d57e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">更小更简单的库似乎是一个更好的选择，因为更完整的库，如React Native Paper，虽然很有前途，但如果你想要对生产就绪型应用程序进行定制，最终将需要你分叉库。</p><p id="b3e7" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">查看我们的<a class="ae ms" href="https://github.com/madhavanmalolan/awesome-reactnative-ui" rel="noopener ugc nofollow" target="_blank">牛逼的react原生用户界面</a>，获取项目的详细列表。</p><h2 id="0252" class="lo ks hu bd kt lp lq lr kx ls lt lu lb ke lv lw ld ki lx ly lf km lz ma lh mb dt translated">状态管理和持久性</h2><p id="af68" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">这是我仍然和redux以及redux-sagas紧密结合的一个领域。两者都有助于将管理状态与管理UI分开，我们在web和移动中使用这一点。</p><p id="7b59" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">但对于原生应用来说，一个关键的区别是离线功能，没有离线功能，你实际上只是在设备上提供网络体验，而不是开发连接的移动体验。虽然redux-offline是一个非常受欢迎的选择，但我们选择了redux-persist，这是一个更简单的方法，并将其与RealmDB配对。</p><p id="93d2" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">虽然您有许多关于持久性的选择，无论是AsymcStorage、realm还是令人印象深刻的新WatermelonDB，这都需要在后端和前端架构的上下文中仔细考虑。</p><p id="a4b6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在我们的例子中，Firebase-react-native也自己处理一些问题，所以redux-persist似乎对我们来说已经足够了，尽管这取决于您的其他选择、您对redux的喜爱程度以及您与web前端保持的对等程度。</p><h1 id="9fef" class="kr ks hu bd kt ku kv kw kx ky kz la lb ja lc jb ld jd le je lf jg lg jh lh li dt translated">放弃</h1><p id="653b" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">这个论点有很大一部分，围绕着先选择本地人。有很多很棒的JS库，我很清楚有很多可以优化的地方。几年前我在Cordova亲自实现了手势驱动的60FPS动画，我可以证明这是可能的。也就是说，我们不应该为了原生平台能给我们的东西而努力工作。</p><p id="1f96" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">其次，不管是什么语言或平台，糟糕的代码就是糟糕的代码，简单地使用这些库，甚至切换到完全的原生代码都不是一个好办法，尤其是考虑到不可饶恕的本性或移动开发。</p><h1 id="4747" class="kr ks hu bd kt ku kv kw kx ky kz la lb ja lc jb ld jd le je lf jg lg jh lh li dt translated">TLDR:我用的是不太烂的RN堆栈</h1><p id="a4ed" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">以下是我的要点列表，基于我们最近的测试、研究和使用React Native的经验，您的选择可能会有所不同，但我希望它们会在原生环境中得到考虑。</p><ul class=""><li id="41bb" class="mt mu hu jx b jy jz kb kc ke mv ki mw km mx kq my mz na nb dt translated">使用Wix React本地导航v2进行路由</li><li id="5039" class="mt mu hu jx b jy nc kb nd ke ne ki nf km ng kq my mz na nb dt translated">单一UI库上的本机组件</li><li id="6722" class="mt mu hu jx b jy nc kb nd ke ne ki nf km ng kq my mz na nb dt translated">React Native Firebase和Google Cloud用于我们的后端</li><li id="ee8f" class="mt mu hu jx b jy nc kb nd ke ne ki nf km ng kq my mz na nb dt translated">复杂状态的Redux和Redux Sagas</li><li id="805c" class="mt mu hu jx b jy nc kb nd ke ne ki nf km ng kq my mz na nb dt translated">redux-persist使用RealmdB实现持久性</li></ul><p id="9750" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这些依赖关系的设置将会比简单的<code class="eh nh ni nj nk b">npm install…</code>或<code class="eh nh ni nj nk b">yarn add ...</code>更加复杂，并且在最初的一两天里你可能会感到沮丧。请记住，这与构建web应用程序是两码事。做一场持久战。将来你会感激的。</p><h1 id="9f2b" class="kr ks hu bd kt ku kv kw kx ky kz la lb ja lc jb ld jd le je lf jg lg jh lh li dt translated">记得在React Native里放NATIVE</h1><p id="c6b7" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">仔细考虑React Native应用中的每个组件、屏幕、库和架构决策。一个糟糕的选择可能会对您的最终用户以及您的开发人员体验产生真正的影响。记得把原生的放在你的React原生应用里。</p></div><div class="ab cl nl nm hc nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="hn ho hp hq hr"><p id="139c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><a class="ns nt gr" href="https://medium.com/u/65d064c2c3b2?source=post_page-----70dde637c9fe--------------------------------" rel="noopener" target="_blank"> Paul van Zyl </a>是一名全栈JS和Golang开发人员，屡获殊荣的产品设计师，也是适马数字公司的创始人，这是一个分散的产品设计和开发团队。<a class="ae ms" href="https://twitter.com/pushplaybang" rel="noopener ugc nofollow" target="_blank">在推特上关注他。</a></p></div></div>    
</body>
</html>