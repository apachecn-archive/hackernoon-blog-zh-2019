<html>
<head>
<title>How to create a list in iOS App?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在iOS App中创建列表？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-create-a-list-in-ios-app-efb0d1e76715?source=collection_archive---------10-----------------------#2019-02-10">https://medium.com/hackernoon/how-to-create-a-list-in-ios-app-efb0d1e76715?source=collection_archive---------10-----------------------#2019-02-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="1bbf" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">UICollectionView初学者指南</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/635653651b1f3dd08e2ac78c6cbeccac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g-7y1ibwA1ltJyS2pRtx1Q.png"/></div></div></figure><h1 id="f7dc" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">UICollectionView简介</h1><p id="271b" class="pw-post-body-paragraph kn ko hu kp b kq kr iv ks kt ku iy kv kw kx ky kz la lb lc ld le lf lg lh li hn dt translated"><code class="eh lj lk ll lm b">UICollectionView</code>是<code class="eh lj lk ll lm b">UIKit Framework</code>的一部分，使您能够在您的<a class="ae ln" href="https://hackernoon.com/tagged/ios" rel="noopener ugc nofollow" target="_blank"> iOS </a>应用中添加<a class="ae ln" href="https://hackernoon.com/tagged/list" rel="noopener ugc nofollow" target="_blank">列表</a>视图。这非常灵活，可以满足您的定制需求。你可以以任何方式显示列表，如水平列、垂直行和网格等。</p><p id="4c29" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">在本教程中，我们将看到如何以编程方式向<code class="eh lj lk ll lm b">ViewController</code>添加一个列表(我们不会使用<code class="eh lj lk ll lm b">storyboards</code>)。</p><h1 id="d1ae" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">项目设置</h1><p id="3862" class="pw-post-body-paragraph kn ko hu kp b kq kr iv ks kt ku iy kv kw kx ky kz la lb lc ld le lf lg lh li hn dt translated">创建一个新的<strong class="kp hv"> XCode项目。XCode准备项目并打开“常规”标签</strong></p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lt"><img src="../Images/bf47eb9624d4e02651c151a097a352aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FkMF-cDimt4FfQsQXxljWA.png"/></div></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Xcode project initial setup</figcaption></figure><p id="f649" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">由于我们不打算使用<code class="eh lj lk ll lm b">Storyboards</code>，我们需要做一些基本的操作。</p><ol class=""><li id="570a" class="ly lz hu kp b kq lo kt lp kw ma la mb le mc li md me mf mg dt translated">删除<strong class="kp hv"> Main.storyboard </strong>(从项目文件夹中)</li><li id="b5d7" class="ly lz hu kp b kq mh kt mi kw mj la mk le ml li md me mf mg dt translated">删除<strong class="kp hv">launch screen . story board</strong>(从项目文件夹中)</li><li id="6f36" class="ly lz hu kp b kq mh kt mi kw mj la mk le ml li md me mf mg dt translated">清除常规选项卡<strong class="kp hv">部署信息</strong>部分的<strong class="kp hv">主界面</strong>字段</li></ol><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mm"><img src="../Images/654b878d96e13e70d268938b1359d7ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oJWJHpYFEgULvbBdKsAg0Q.png"/></div></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Main Interface cleared</figcaption></figure><p id="f53b" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">如果我们现在运行应用程序，你会看到一个完全黑屏。默认情况下，应用程序中没有窗口。因此我们需要准备一个。</p><p id="afa0" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">打开AppDelegate.swift文件，导航到<code class="eh lj lk ll lm b">didFinishLaunchingWithOptions</code>方法并添加以下代码。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mn mo l"/></div></figure><p id="0064" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">现在去你的<code class="eh lj lk ll lm b">ViewController</code>添加一些背景色到ViewController。这将帮助您识别启动的正确视图控制器。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mn mo l"/></div></figure><p id="1a99" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">运行它，然后…我们明白了</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/bcb8ff4efbb8b46addd2ed43610f5683.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*gSFibv4nUDcBgsCHf0CAkQ.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">ViewController with red background</figcaption></figure><p id="3180" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">现在我们在我们的<code class="eh lj lk ll lm b">ViewController</code>，我们可以添加<code class="eh lj lk ll lm b">UICollectionView</code>到它。</p><h1 id="ca12" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">将UICollectionView添加到<code class="eh lj lk ll lm b">ViewController </code>(以编程方式)</h1><p id="dd48" class="pw-post-body-paragraph kn ko hu kp b kq kr iv ks kt ku iy kv kw kx ky kz la lb lc ld le lf lg lh li hn dt translated">在您的<code class="eh lj lk ll lm b">ViewController</code>中添加一个字段，并给它分配一个闭包。在此之后，我们需要将它添加为我们的<code class="eh lj lk ll lm b">ViewController</code>视图的子视图。比如，</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mn mo l"/></div></figure><blockquote class="mq mr ms"><p id="6733" class="kn ko mt kp b kq lo iv ks kt lp iy kv mu lq ky kz mv lr lc ld mw ls lg lh li hn dt translated">iOS中的每个视图都需要在屏幕上有一个位置。所以它需要一个框架或约束来放置自己。</p></blockquote><p id="6bbe" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">现在添加一个对其应用约束的helper方法。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mn mo l"/></div></figure><p id="7be0" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">并在添加collectionView后在<code class="eh lj lk ll lm b">viewDidLoad()</code>中调用该方法。</p><p id="153f" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">上述方法对collectionView应用约束以占据全屏。该视图将贴在<code class="eh lj lk ll lm b">ViewController</code>的所有边缘上</p><p id="849d" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">为了确认这一点，我们将为collectionView添加一些背景色。在添加子视图之前，在<code class="eh lj lk ll lm b">viewDidLoad()</code>方法中添加这一行。</p><p id="32ac" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated"><code class="eh lj lk ll lm b">collectionView.backgroundColor = UIColor.blue</code></p><p id="7b13" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">运行应用程序，你会得到一个完全蓝色(或任何你分配给它的颜色)的屏幕。这说明你的collectionView已经完全膨胀了。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/38bcfb9ac9edb6c1f531278bee3dd493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*IWLmmwy4sLMiWgufvrVXXg.png"/></div></figure><p id="3c93" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated"><em class="mt">现在我们可以将其背景颜色改为白色。</em></p><p id="69ae" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">在开始编写代码之前，让我们先了解一些基础知识。</p><p id="1d19" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">CollectionView需要一个<strong class="kp hv">布局对象</strong>和一个<strong class="kp hv">数据源</strong>来正确呈现其内容。</p><p id="19ec" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated"><strong class="kp hv">布局对象</strong>提供列表中每个单元格的布局信息。更具体地说，它提供了collectionView中每个单元格的<code class="eh lj lk ll lm b">frame</code>。<code class="eh lj lk ll lm b">frame</code>的型号为<a class="ae ln" href="https://developer.apple.com/documentation/coregraphics/cgrect" rel="noopener ugc nofollow" target="_blank"> <strong class="kp hv"> CGRect </strong> </a> <strong class="kp hv">。</strong>因此每个单元格都有x坐标、y坐标、高度和宽度。</p><p id="86c7" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">我们已经在CollectionView初始化时传递了这个布局对象。</p><p id="d3fb" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated"><code class="eh lj lk ll lm b">let layout = UICollectionViewFlowLayout()</code></p><p id="d66f" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated"><code class="eh lj lk ll lm b">let cv = UICollectionView(frame: .zero, collectionViewLayout: layout)</code></p><p id="807d" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated"><strong class="kp hv">数据源</strong>负责向其提供数据，例如集合视图中的项目数、单元格等。</p><h1 id="cba8" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">将DataSouce添加到UICollectionView</h1><p id="6518" class="pw-post-body-paragraph kn ko hu kp b kq kr iv ks kt ku iy kv kw kx ky kz la lb lc ld le lf lg lh li hn dt translated">遵循以下步骤:</p><ol class=""><li id="6f5e" class="ly lz hu kp b kq lo kt lp kw ma la mb le mc li md me mf mg dt translated">在<code class="eh lj lk ll lm b">viewDidLoad()</code>的底部增加<code class="eh lj lk ll lm b">collectionView.dataSource = self</code></li><li id="8922" class="ly lz hu kp b kq mh kt mi kw mj la mk le ml li md me mf mg dt translated">使您的ViewController符合<code class="eh lj lk ll lm b">UICollectionViewDataSource</code>和<code class="eh lj lk ll lm b">UICollectionViewDelegateFlowLayout</code>协议</li><li id="49bc" class="ly lz hu kp b kq mh kt mi kw mj la mk le ml li md me mf mg dt translated">添加协议后，Xcode会抛出一个错误，并强迫您添加一些方法存根。因此，展开错误并单击修复按钮。它将把2个存根(<code class="eh lj lk ll lm b">numberOfItemsInSection</code>和<code class="eh lj lk ll lm b">cellForItemAt)</code>添加到您的控制器文件中。</li></ol><p id="2fb3" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">4.从<code class="eh lj lk ll lm b">numberOfItemsInSection</code>方法返回一些单元格计数</p><p id="dea7" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">5.在<code class="eh lj lk ll lm b">viewDidLoad()</code>中注册一个虚拟单元。collectionView中的每个单元格都是<code class="eh lj lk ll lm b">UICollectionViewCell</code>的子单元格。CollectionView要求用标识符注册单元格。</p><p id="6ca6" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">6.从<code class="eh lj lk ll lm b">cellForItemAt</code>方法返回一个单元格。在上一步中，我们注册了一个单元。现在您需要使用相同的标识符将单元格出队并返回它。(单元格默认没有背景色，所以我们需要设置一个才能在屏幕上看到)。</p><p id="48b9" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">您的控制器文件应该类似于</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mn mo l"/></div></figure><p id="daf4" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">现在运行应用程序，您将得到6个蓝色方块。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/9ea01668c55885e4a83edb1824537dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*2oCAdy8_PERb3h17ptLiCQ.png"/></div></figure><p id="78e4" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated"><strong class="kp hv">幕后:</strong>既然我们知道布局对象使用框架提供了单元格大小、位置等布局属性。默认情况下，<code class="eh lj lk ll lm b">UICollectionViewFlowLayout</code>提供的单元格尺寸为50x50，因此您得到的是小正方形单元格。</p><p id="9f1c" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">既然我们想要改变单元格的大小，我们可以使用<code class="eh lj lk ll lm b">UICollectionViewDelegateFlowLayout</code>的<code class="eh lj lk ll lm b">sizeForItemAt</code>方法来实现。将以下方法添加到控制器中</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mn mo l"/></div></figure><p id="f13a" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">除此之外，你需要符合<code class="eh lj lk ll lm b">UICollectionViewDelegate</code>和<em class="mt">将控制器设置为集合视图</em>的代理，就像<code class="eh lj lk ll lm b">viewDidLoad()</code>中的<code class="eh lj lk ll lm b">collectionView.delegate = self</code></p><p id="44e7" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">运行应用程序，你会看到一个列表</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/6c1da057c45839bcd0b776fe6da681b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*0mN6ezYJ5IzKGHasw4dMjA.png"/></div></figure><p id="86db" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">现在细胞变大了。我们可以改变细胞的颜色，使其看起来更有活力。</p><p id="618c" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">让我们添加一个颜色数组，并根据项目的索引路径应用颜色。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mn mo l"/></div></figure><p id="bf39" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">现在你会得到，它现在看起来更好。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/391354893736e50c56fe6f46458a9901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*NNLWKILrkrkt1jFl-zD3PA.png"/></div></figure><p id="e141" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">最后，我们有一个带有彩色单元格的工作集合视图。</p><p id="1c9b" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated">你可以在<a class="ae ln" href="https://github.com/bxute/UICollectionViewExample" rel="noopener ugc nofollow" target="_blank">https://github.com/bxute/UICollectionViewExample</a>获得完整的源代码</p><h1 id="5fcc" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">接下来是什么？</h1><p id="61b5" class="pw-post-body-paragraph kn ko hu kp b kq kr iv ks kt ku iy kv kw kx ky kz la lb lc ld le lf lg lh li hn dt translated">到目前为止，我们已经学会了如何添加集合视图和虚拟单元格/项目。你一定对单元格中的一些文本、图像或其他组件感到疑惑。</p><p id="e886" class="pw-post-body-paragraph kn ko hu kp b kq lo iv ks kt lp iy kv kw lq ky kz la lr lc ld le ls lg lh li hn dt translated"><code class="eh lj lk ll lm b">UICollectionViewCell</code>的定制来了。在下一篇博客中，我们将学习如何准备一个自定义单元格，并在列表中显示一些真实数据。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mx mo l"/></div></figure></div></div>    
</body>
</html>