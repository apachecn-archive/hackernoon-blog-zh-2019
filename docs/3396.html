<html>
<head>
<title>Introduction to Message Brokers: Part 2: ActiveMQ vs Redis Pub/Sub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">消息代理简介:第 2 部分:ActiveMQ 与 Redis 发布/订阅</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/introduction-to-message-brokers-part-2-activemq-vs-redis-pub-sub-dd9e173e27a5#2019-05-31">https://medium.com/hackernoon/introduction-to-message-brokers-part-2-activemq-vs-redis-pub-sub-dd9e173e27a5#2019-05-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="7acb" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">在之前对最流行的消息传递系统的概述中，我们讨论了 Apache Kafka 与 RabbitMQ。现在，让我们看看功能不太强大，但仍然非常有用的消息代理。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/d44908940af2de6753e50b3133e15ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5m0TB4-1qzhHNbRFIGq2sA.png"/></div></div></figure><p id="3392" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们会考虑<strong class="jx hv"> ActiveMQ </strong>和<strong class="jx hv"> Redis Pub/Sub </strong>的利弊。尽管这些解决方案不太适合处理大数据，但它们为创建小型企业分析工具提供了坚实的基础。</p><h1 id="511c" class="kr ks hu bd kt ku kv kw kx ky kz la lb ja lc jb ld jd le je lf jg lg jh lh li dt translated"><strong class="ak">阿帕奇 ActiveMQ </strong></h1><p id="4fe8" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated"><strong class="jx hv">定价:</strong>免费</p><p id="313f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">官方网站:</strong>http://activemq.apache.org</p><p id="0046" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">有用资源:</strong> <a class="ae lo" href="https://aws.amazon.com/amazon-mq/?nc1=h_ls" rel="noopener ugc nofollow" target="_blank"> AmazonMQ </a></p><p id="d7e8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">优点:</strong></p><ul class=""><li id="64aa" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq lu lv lw lx dt translated">动态队列创建的机会</li><li id="f53c" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">队列管理的 Web 用户界面</li><li id="8e3a" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">代理可以通过 XML 进行配置</li><li id="b026" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">产品得到积极维护</li></ul><p id="1191" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">缺点:</strong></p><ul class=""><li id="ffb2" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq lu lv lw lx dt translated">消息必须发送到队列或主题</li></ul><p id="1a6b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">ActiveMQ 是用 Java 编写的 Apache 产品。不需要处理海量数据的开发人员通常更喜欢这种简单可靠的开源解决方案。消息代理由于其快速的工作以及与许多协议和先进技术的兼容性而变得流行。</p><h2 id="644b" class="md ks hu bd kt me mf mg kx mh mi mj lb ke mk ml ld ki mm mn lf km mo mp lh mq dt translated"><strong class="ak">ActiveMQ 开发的故事</strong></h2><p id="a5d8" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">在 ActiveMQ 开发的开始，有两个原因启动这个项目:</p><ol class=""><li id="f3bb" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq mr lv lw lx dt translated">那个时代最流行的信息工具的高价。</li><li id="26e0" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq mr lv lw lx dt translated">在一个完全符合 J2EE T21 的系统上工作的必要性(与 Apache 的许可兼容)。</li></ol><p id="47b1" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">与其竞争对手(EMS/TIBCO、SonicMQ、WebSphereMQ)不同，消息传递系统将可访问性与有用且有效的特性结合在一起。因此，它在主要行业的大公司中很受欢迎。LogicBlaze 在 2004 年开发了免费的消息代理。它是由 CodeHaus 主办的。2007 年，该系统被捐赠给 ASF。它的创始人继续开发产品。ActiveMQ 今天得到了积极的维护。</p><h2 id="0a8b" class="md ks hu bd kt me mf mg kx mh mi mj lb ke mk ml ld ki mm mn lf km mo mp lh mq dt translated"><strong class="ak"> ActiveMQ 功能</strong></h2><p id="b918" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">面向消息的中间件为 Java 开发人员提供了极好的机会。该系统基于 JMS 标准规范，支持异步通信。因此，它允许程序员在企业项目中组织快速稳定的消息传递过程。我可以定义消息传递系统的 3 个关键优势。</p><ol class=""><li id="46b5" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq mr lv lw lx dt translated"><strong class="jx hv">兼容性:</strong>可以将 ActiveMQ 与其他主流消息工具结合使用。我指的是<a class="ae lo" href="https://aws.amazon.com/sqs/" rel="noopener ugc nofollow" target="_blank">亚马逊简单排队服务</a>，<a class="ae lo" href="https://www.datadoghq.com/blog/monitoring-kafka-performance-metrics/" rel="noopener ugc nofollow" target="_blank">阿帕奇卡夫卡</a>，<a class="ae lo" href="https://www.datadoghq.com/blog/rabbitmq-monitoring/" rel="noopener ugc nofollow" target="_blank"> RabbitMQ </a>。此外，还有机会使用<a class="ae lo" href="https://aws.amazon.com/amazon-mq/" rel="noopener ugc nofollow" target="_blank">亚马逊 MQ </a>。它是 ActiveMQ 的实现，与 AWS 云解决方案集成。</li></ol><p id="f99f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv"> 2。便利:</strong>消息代理基于 JMS API。因此，创建、传输和接收消息的过程由统一的标准决定。除了 Java，ActiveMQ 客户端可以用其他编程语言编写。分别是 Python，Node.js，Ruby。</p><p id="de5c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv"> 3。灵活性:</strong>消息传递系统工作足够快，有助于使用企业集成模式和其他现代解决方案。同时，它很容易接近和习惯。消息代理的简单配置是实现企业项目的一个重要优势。而且 ActiveMQ 支持很多协议(WebSockets、<a class="ae lo" href="https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol" rel="noopener ugc nofollow" target="_blank"> AMQP </a>、REST、<a class="ae lo" href="https://en.wikipedia.org/wiki/OpenWire_(binary_protocol)" rel="noopener ugc nofollow" target="_blank"> OpenWire </a>、<a class="ae lo" href="https://en.wikipedia.org/wiki/Streaming_Text_Oriented_Messaging_Protocol" rel="noopener ugc nofollow" target="_blank"> STOMP </a>、MQTT 等)。</p><h2 id="07b4" class="md ks hu bd kt me mf mg kx mh mi mj lb ke mk ml ld ki mm mn lf km mo mp lh mq dt translated"><strong class="ak"> ActiveMQ 工作原理</strong></h2><p id="a582" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">就像其他消息传递系统一样，该程序将数据从一个应用程序(生产者)传输到另一个应用程序(消费者)。因此，其架构包括:</p><ul class=""><li id="a8a8" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq lu lv lw lx dt translated">经纪人</li><li id="6802" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">目标应用程序</li><li id="5966" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">客户端应用程序</li></ul><p id="7556" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">消息代理通过以下两种目的地之一路由每条消息:</p><ol class=""><li id="1449" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq mr lv lw lx dt translated">首先是一个<strong class="jx hv">队列</strong>。这是点对点消息传递的一部分，其中只有一个消费者。</li><li id="c5ed" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq mr lv lw lx dt translated">第二个是一个<strong class="jx hv">主题</strong>，包含在“发布/订阅”消息中，意味着几个消费者的参与。</li></ol><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ms"><img src="../Images/752445c35c4d3a5174f05e50b2643c0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BM2NCCzH5YG7N8X10KTcoQ.png"/></div></div></figure><h2 id="c342" class="md ks hu bd kt me mf mg kx mh mi mj lb ke mk ml ld ki mm mn lf km mo mp lh mq dt translated"><strong class="ak"> ActiveMQ 特性</strong></h2><p id="5e1a" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">由于消息传递的异步过程，消费者应用程序不需要立即接收消息。ActiveMQ 将这两项任务分开:</p><ul class=""><li id="c4bd" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq lu lv lw lx dt translated">制作人的任务是创建和发送信息</li><li id="2859" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated"><strong class="jx hv">消费者的</strong>取货任务</li></ul><p id="613b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">因此，这些应用程序是相互独立的。一旦生产者向代理发送消息，生产者的任务就完成了。消费者应用程序是否或何时获取信息并不重要。这种类型的消息传递被称为<strong class="jx hv">松耦合</strong>，为开发人员提供了一些好处。</p><ul class=""><li id="02d9" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq lu lv lw lx dt translated"><strong class="jx hv">生产力:</strong>生产者不需要等待消费者或经纪人的信号。所以，发送消息的过程非常快。该系统能够实现巨大的吞吐量。</li><li id="5c5e" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated"><strong class="jx hv">适应性:</strong>即使客户端应用暂时不可用(突然添加到系统中，或发生变化)，消息传递过程也不会中断或停止。</li><li id="49aa" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">异构性:独立的客户端可以用任何合适的语言编写，因为它们彼此不交互。</li></ul><p id="de17" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">总而言之，我推荐 Apache ActiveMQ 作为一个<strong class="jx hv">混合</strong>和<strong class="jx hv">灵活</strong>的消息代理。特别适合企业项目。ActiveMQ 在复杂的结构中相对容易建立，表现出良好的可靠性和高吞吐量。</p><h1 id="af6e" class="kr ks hu bd kt ku kv kw kx ky kz la lb ja lc jb ld jd le je lf jg lg jh lh li dt translated"><strong class="ak"> Redis 发布/订阅</strong></h1><p id="b136" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated"><strong class="jx hv">定价:</strong>免费</p><p id="e557" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">官网:</strong> <a class="ae lo" href="https://redis.io/" rel="noopener ugc nofollow" target="_blank"> https://redis.io </a></p><p id="8717" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">有用资源:</strong> <a class="ae lo" href="https://www.tutorialspoint.com/redis/redis_quick_guide.htm" rel="noopener ugc nofollow" target="_blank">教程</a></p><p id="da8b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">优点:</strong></p><ul class=""><li id="f3a5" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq lu lv lw lx dt translated">灵活性(重新路由消息、跟踪详细的服务器内指标等)</li><li id="c677" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">简单的安装、配置和维护</li><li id="a8d3" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">对数据库的高速访问</li><li id="7273" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">快速、基于集合的操作的绝佳选择</li></ul><p id="d3a6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">缺点:</strong></p><ul class=""><li id="c161" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq lu lv lw lx dt translated">具有挑战性的群集配置，尤其是具有多个写入节点的群集</li><li id="1af6" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">持久性会影响性能</li><li id="580c" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq lu lv lw lx dt translated">缺乏高级安全选项和访问控制</li></ul><p id="5a10" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">高级数据库是用 c 语言编写的。首先，Redis 执行存储数据的功能，但它也提供了传递消息的机会。它有助于创建快速、可伸缩的应用程序。Redis 是在 BSD 3 条款许可下发布的，在为中小型企业开发技术解决方案方面很受欢迎。</p><h2 id="1456" class="md ks hu bd kt me mf mg kx mh mi mj lb ke mk ml ld ki mm mn lf km mo mp lh mq dt translated"><strong class="ak">的故事</strong> Redis Pub/Sub <strong class="ak">开发</strong></h2><p id="6253" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">创建于 2009 年的<strong class="jx hv">RE</strong>mote<strong class="jx hv">D</strong>Ictionary<strong class="jx hv">S</strong>server 仍然是一个开源项目。其创始人在自己的欧洲创业公司工作。这是一个实时 web 日志分析器，需要增加可伸缩性。在使用传统数据库时，面对工作负载的一些挑战，程序员开始开发 Redis 的第一个版本。他将这个项目开源，并得到了 Ruby 社区的支持。Instagram 和 GitHub 是首批采用新数据库的伟大项目。上一个程序版本包括一个新的数据结构，用于存储多个字段和字符串值，具有自动的、基于时间的序列。</p><h2 id="058f" class="md ks hu bd kt me mf mg kx mh mi mj lb ke mk ml ld ki mm mn lf km mo mp lh mq dt translated">Redis Pub/Sub <strong class="ak">工作原理</strong></h2><p id="f792" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">Redis 发布/订阅实现了队列应用程序的消息传递系统，它使用 3 个主要术语:</p><ol class=""><li id="f5c0" class="lp lq hu jx b jy jz kb kc ke lr ki ls km lt kq mr lv lw lx dt translated"><strong class="jx hv">发布者</strong>(发送消息)</li><li id="6042" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq mr lv lw lx dt translated"><strong class="jx hv">用户</strong>(接收消息)</li><li id="03ed" class="lp lq hu jx b jy ly kb lz ke ma ki mb km mc kq mr lv lw lx dt translated"><strong class="jx hv">频道</strong>(链接发布者和订阅者)</li></ol><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ms"><img src="../Images/b2546fb02553248e3c4323a23c0ecb50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VouTkDyNjZtg2Q8TqIijwQ.png"/></div></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Original published at <a class="ae lo" href="https://freshcodeit.com" rel="noopener ugc nofollow" target="_blank">freshcodeit.com</a></figcaption></figure><p id="d3d4" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">同样重要的是，单个用户的频道数量不受限制。同时，发布者能够在一个通道上向任意数量的订阅者发送消息。由于发布者/订阅者平台中的所有消息都是一次性的，因此在没有确定订阅者的情况下，它们会被删除。</p><p id="9020" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="mx">注意:你应该知道“redis-cli”一旦进入订阅模式就不会接受任何命令。只能用 Ctrl-C 退出模式</em></p><h2 id="83ab" class="md ks hu bd kt me mf mg kx mh mi mj lb ke mk ml ld ki mm mn lf km mo mp lh mq dt translated">Redis 发布/订阅<strong class="ak">特性</strong></h2><p id="834e" class="pw-post-body-paragraph jv jw hu jx b jy lj iv ka kb lk iy kd ke ll kg kh ki lm kk kl km ln ko kp kq hn dt translated">就像 ActiveMQ 一样，Redis 发布/订阅发布者和订阅者是相互独立的。因此，当其中的第一个发送消息时，它不知道哪个接收器连接到该通道。对于订阅频道而不了解其他发布者的接收者来说也是如此。</p><p id="9788" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这项技术的主要优势之一是有机会使用用不同语言编写的客户端。你可以阅读完整的<a class="ae lo" href="https://redis.io/clients" rel="noopener ugc nofollow" target="_blank">列表</a>。它包括诸如 Ruby、Python、PHP、Objective-C、Node.js、Java、Clojure、C++、C#等流行的解决方案。</p><p id="cb3f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在您的基础设施中使用 Redis 的 Pub/Sub，您将享受到快速的消息传递和进程间的通信。代理的<strong class="jx hv">简单性</strong>和<strong class="jx hv">性能</strong>使其在广泛的用例中广受欢迎。考虑到著名的数据库和缓存特性，Redis 可以成为您未来项目的便利技术。</p><p id="d00b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在这里，我们结束了我们的<strong class="jx hv">自我部署</strong>消息传递系统之旅。让我知道你是否喜欢这样的评论和你对所有这些技术的看法。</p></div><div class="ab cl my mz hc na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="hn ho hp hq hr"><p id="42f0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="mx">原文</em> <a class="ae lo" href="https://freshcodeit.com/freshcode-post/introduction-to-message-brokers-activemq-vs-redis-pub-sub" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> <em class="mx">消息经纪人简介。第二部分:ActiveMQ vs Redis Pub/Sub</em></strong></a><strong class="jx hv"><em class="mx"/></strong><em class="mx">发布于</em><a class="ae lo" href="http://freshcodeit.com" rel="noopener ugc nofollow" target="_blank"><strong class="jx hv"><em class="mx">freshcodeit.com</em></strong></a><em class="mx">。</em></p></div></div>    
</body>
</html>