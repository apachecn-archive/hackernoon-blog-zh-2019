<html>
<head>
<title>DNTFrameworkCore as a Lightweight Infrastructure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为轻量级基础设施的 DNTFrameworkCore</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/dntframeworkcore-as-a-lightweight-infrastructure-e14283cdb523#2019-02-23">https://medium.com/hackernoon/dntframeworkcore-as-a-lightweight-infrastructure-e14283cdb523#2019-02-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/de683512b041c5d5c766398bd3078d0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-ALzZrc4nEN0x0TD"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Photo from pexels.com</figcaption></figure><p id="7599" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore" rel="noopener ugc nofollow" target="_blank">dntframeworcore</a>是一个轻量级、可扩展的基础设施，用于构建基于 ASP.NET 核心的高质量 Web 应用，其目标如下:</p><ul class=""><li id="5315" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated">各种应用中的通用结构，如横切关注点等</li><li id="f03c" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">遵循 DRY 原则，专注于主要业务逻辑</li><li id="ffcc" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">减少开发时间</li><li id="d4b8" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">减少 bug 并阻止 bug 传播</li><li id="4f13" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">减少缺乏面向对象和面向对象知识的新开发人员的培训时间</li></ul></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><figure class="lb lc ld le fq iv fe ff paragraph-image"><div class="fe ff la"><img src="../Images/acc5209fab213097d9f9c710a569b758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*jggTOD000KUNE6Vu8jtx7g.jpeg"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Blog Entity CRUD API</figcaption></figure><figure class="lb lc ld le fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lf"><img src="../Images/8d13b1d5d93c8b4bafbf34f191f33352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BmXbNOJnXabDQv9ieo4iFQ.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Blog Entity CRUD Service</figcaption></figure><h1 id="646e" class="lg lh hu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md dt translated">特征</h1><p id="bb2e" class="pw-post-body-paragraph jg jh hu ji b jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd hn dt translated">这个框架有各种特性，我在下面列出了它们:</p><ul class=""><li id="ce76" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/blob/master/test/DNTFrameworkCore.Tests/Validation/ValidationInterceptorTests.cs" rel="noopener ugc nofollow" target="_blank">自动输入验证和业务验证</a></li><li id="239c" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/blob/master/test/DNTFrameworkCore.Tests/Transaction/TransactionInterceptorTests.cs" rel="noopener ugc nofollow" target="_blank">自动交易管理</a></li><li id="28bd" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/blob/master/src/DNTFrameworkCore.EntityFramework/Application/CrudService.cs#L155" rel="noopener ugc nofollow" target="_blank">事件</a></li><li id="ab4b" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/blob/master/src/DNTFrameworkCore/Domain/Entities/ITrackedEntity.cs" rel="noopener ugc nofollow" target="_blank">具有跟踪状态机制的聚合更新(主-详细信息)</a></li><li id="ea39" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/test/DNTFrameworkCore.EntityFramework.Tests/Numbering" rel="noopener ugc nofollow" target="_blank">自动编号</a></li><li id="c9cf" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore/Functional" rel="noopener ugc nofollow" target="_blank">功能编程错误处理，而不是使用异常进行流程控制</a></li><li id="70d3" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore.Web/Authorization" rel="noopener ugc nofollow" target="_blank">动态权限授权</a></li><li id="535d" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore.EntityFramework/Application" rel="noopener ugc nofollow" target="_blank"> CrudService </a></li><li id="3c63" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/blob/master/src/DNTFrameworkCore.Web/API/CrudController.cs" rel="noopener ugc nofollow" target="_blank"> CrudController </a></li><li id="40d2" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore.EntityFramework/Logging" rel="noopener ugc nofollow" target="_blank">数据库记录器提供商</a></li><li id="db3e" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore.EntityFramework/Auditing" rel="noopener ugc nofollow" target="_blank">审计</a></li><li id="8188" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore.EntityFramework/DataProtection" rel="noopener ugc nofollow" target="_blank">数据保护密钥数据库</a></li><li id="9cc3" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore.EntityFramework/Configuration" rel="noopener ugc nofollow" target="_blank">名值设置管理</a></li><li id="62d2" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore.EntityFramework/Context/Internal" rel="noopener ugc nofollow" target="_blank">挂钩</a></li><li id="dedd" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/blob/master/src/DNTFrameworkCore/Domain/Entities/ISoftDeleteEntity.cs" rel="noopener ugc nofollow" target="_blank">软删除</a></li><li id="dbd3" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/blob/master/src/DNTFrameworkCore/Domain/Entities/ITenantEntity.cs" rel="noopener ugc nofollow" target="_blank">多重租赁</a></li><li id="397e" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore/Domain/Entities/Tracking" rel="noopener ugc nofollow" target="_blank">跟踪机制(CreatorUserId，CreationDateTime，LastModifierUserId，…) </a></li><li id="ec8c" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore.FluentValidation" rel="noopener ugc nofollow" target="_blank"> FluentValidation 集成</a></li><li id="6d38" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCore/tree/master/src/DNTFrameworkCore/Threading/BackgroundTasks" rel="noopener ugc nofollow" target="_blank">背景任务队列</a></li><li id="4281" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">CQRS(即将推出)</li><li id="d37c" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">实体历史(即将推出)</li></ul></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="2bd6" class="lg lh hu bd li lj mj ll lm ln mk lp lq lr ml lt lu lv mm lx ly lz mn mb mc md dt translated">装置</h1><p id="d6a4" class="pw-post-body-paragraph jg jh hu ji b jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd hn dt translated">要基于 DNTFrameworkCore 创建您的第一个项目，您可以安装以下软件包:</p><pre class="lb lc ld le fq mo mp mq mr aw ms dt"><span id="53ee" class="mt lh hu mp b fv mu mv l mw mx">PM&gt; Install-Package DNTFrameworkCore<br/>PM&gt; Install-Package DNTFrameworkCore.EntityFramework<br/>PM&gt; Install-Package DNTFrameworkCore.EntityFramework.SqlServer<br/>PM&gt; Install-Package DNTFrameworkCore.Web<br/>PM&gt; Install-Package DNTFrameworkCore.Web.EntityFramework<br/>PM&gt; Install-Package DNTFrameworkCore.FluentValidation<br/>PM&gt; Install-Package DNTFrameworkCore.Web.MultiTenancy</span></pre><p id="7832" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">运筹学</p><p id="12c8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">1-运行以下命令，安装基于 ASP.NET 核心 Web API 和 DNTFrameworkCore 的<a class="ae ke" href="https://github.com/rabbal/DNTFrameworkCoreTemplate" rel="noopener ugc nofollow" target="_blank">样板项目</a>模板:</p><pre class="lb lc ld le fq mo mp mq mr aw ms dt"><span id="a4b2" class="mt lh hu mp b fv mu mv l mw mx">dotnet new --install DNTFrameworkCoreTemplateAPI::*‌‌</span></pre><p id="128b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">2-使用已安装的模板创建新项目:</p><pre class="lb lc ld le fq mo mp mq mr aw ms dt"><span id="a666" class="mt lh hu mp b fv mu mv l mw mx">dotnet new dntcore-api</span></pre><p id="9433" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，您有了一个如下所示的解决方案，它包含完整的身份管理功能，包括用户、角色和动态权限管理，并且还集成了持久 JWT 身份验证机制:</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div class="fe ff my"><img src="../Images/2ad65339a67cf051e1c99ff715d11295.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*o3zWmEQspaPChLSS0DhdOg.jpeg"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Multi Project Solution</figcaption></figure><h1 id="7400" class="lg lh hu bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md dt translated">介绍已安装模板中的各种项目</h1><p id="e798" class="pw-post-body-paragraph jg jh hu ji b jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd hn dt translated"><strong class="ji hv">域</strong>项目包含应用程序的“域模型”。例如，在该模板中设计了身份管理系统的贫血域模型。</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div class="fe ff mz"><img src="../Images/e16edd5ffb01eb1c2b82318ad5bc9ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*MAMg7FzbiSFBkJXsE6RG7Q.jpeg"/></div></figure><p id="4504" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">基础设施</strong>项目包含 DbContext、映射和 EF 核心迁移。</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div class="fe ff na"><img src="../Images/24a6a772832824282cf7b7758b915309.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*K9dLMHLMDD3Lo0p_36EwKA.jpeg"/></div></figure><p id="ef92" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">应用</strong>项目包含与领域实体、验证器、应用服务和事件处理器相关的 DTOs 模型。</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div class="fe ff nb"><img src="../Images/34828997bc8b25bea3a71a6e5a619803.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*rCdaW627YoRpG-R34O2qfQ.jpeg"/></div></figure><p id="aa79" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">资源</strong>项目包含 resx 文件。</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/2a8415076c0ae9b26bdd4f8ede82d026.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/1*Q6R68jKDyHHlDTfuKBhzhg.jpeg"/></div></figure><p id="5437" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">项目包含了你的应用程序的单元测试。例如，您可以在下图中看到 UserValidatorTests 和 RoleValidatorTests 的结果:</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nd"><img src="../Images/1ac3abf471d2ebc7cc5126b4d839a965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-wLYarjvWMtAFMT6xXBYcw.jpeg"/></div></div></figure><p id="c344" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv"> IntegrationTests </strong>项目包含应用程序的集成测试。例如，您可以在下图中看到 RoleServiceTests 和 UserServieTests 的结果:</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ne"><img src="../Images/87bf3e531091c45651458640a7932d05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i9LwJ02cU4JNcxr5iBn19Q.jpeg"/></div></div></figure><p id="1723" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv"> API </strong>项目包含控制器、集线器和 JWT 认证基础设施。例如，您可以在下图中看到角色控制器、用户控制器和授权控制器:</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/72fb0326888c4c4aefacf5a7c95e0e67.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/1*pwrOlTKXaZsKHxjt6NKHlw.jpeg"/></div></figure><p id="3384" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后，如果这个基础设施是有用的，分享它。</p></div></div>    
</body>
</html>