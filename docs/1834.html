<html>
<head>
<title>VMs vs. Containers for Microservices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微服务的虚拟机与容器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/vms-vs-containers-for-microservices-a6f559970704#2019-03-19">https://medium.com/hackernoon/vms-vs-containers-for-microservices-a6f559970704#2019-03-19</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="dcef" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">什么对企业更有意义？</em></p><p id="72d9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在我之前的<a class="ae jq" href="https://hackernoon.com/https-medium-com-spruha-pandya-of-microservices-containers-6f0ea25dac3" rel="noopener ugc nofollow" target="_blank">博客</a>中，我谈到了企业如何使用微服务和容器实现应用的持续交付。在这里，我将从微服务架构的角度更深入地比较容器和虚拟机。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff jr"><img src="../Images/27b26ff6d89735259fe4bea1bb9fe8d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KnQX_SYIMaEtMahM6vgaOA.jpeg"/></div></div></figure><p id="e2b4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这个不断发展的软件时代，我们听到很多关于使用微服务容器和需要更新单一应用程序的讨论。但是，对于企业来说，总是有一个迫在眉睫的问题，这个问题很少被解决——<strong class="it hv">为什么不使用虚拟机而不是容器？</strong></p><p id="0e90" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jq" href="https://pubs.vmware.com/vsphere-51/index.jsp?topic=%2Fcom.vmware.vsphere.vm_admin.doc%2FGUID-CEFF6D89-8C19-4143-8C26-4B6D6734D2CB.html" rel="noopener ugc nofollow" target="_blank">虚拟机</a>提供硬件和操作系统的虚拟化，并创建真实机器的高效、隔离副本。在<a class="ae jq" href="https://www.docker.com/resources/what-container" rel="noopener ugc nofollow" target="_blank">容器</a>的情况下，只有操作系统而不是硬件被虚拟化，创建了一个容纳应用程序和相关资产的轻量级环境。自 2014 年以来，容器继续受到欢迎，虚拟机已经存在了很长时间，两者之间的<a class="ae jq" href="https://blog.docker.com/2016/03/containers-are-not-vms/" rel="noopener ugc nofollow" target="_blank">差异</a>众所周知。随着世界不断比较这两者，我们必须记住，两者都有不同的目的。</p><blockquote class="kd ke kf"><p id="828c" class="ir is jp it b iu iv iw ix iy iz ja jb kg jd je jf kh jh ji jj ki jl jm jn jo hn dt translated">我倾向于认为虚拟机对于容器就像火车对于飞机一样。虽然飞机提供了更快的移动性，但我们总是会在飞机无法应对的一些旅程中使用火车。同样，在某些业务情况下，容器化可能是首选，在某些情况下，虚拟化也是首选。</p></blockquote><p id="2a3a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是当微服务出现时，问题是“容器化还是虚拟化？”似乎很频繁。</p><h1 id="f333" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">对于微服务，使用容器优于虚拟机的优势</h1><h2 id="ce02" class="lh kk hu bd kl li lj lk kp ll lm ln kt jc lo lp kx jg lq lr lb jk ls lt lf lu dt translated">降低成本</h2><p id="a935" class="pw-post-body-paragraph ir is hu it b iu lv iw ix iy lw ja jb jc lx je jf jg ly ji jj jk lz jm jn jo hn dt translated">虚拟机通过虚拟化硬件和操作系统，可以轻松地在微服务之间划分执行环境。当您通过单独的虚拟机执行每个微服务时，也需要复制操作系统。这将增加许可成本。在单个虚拟机中执行多个微服务是可能的，但这将抵消将单个应用程序分解为易于执行的小微服务的最大优势。冲突的库和应用程序组件的问题仍然没有解决。</p><p id="70f9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">容器提供了操作系统级别的隔离。因此，单个操作系统可以支持多个容器，每个容器在其自己的、独立的执行环境中运行。通过在单个操作系统上运行多个组件，您可以降低许可成本。</p><h2 id="999c" class="lh kk hu bd kl li lj lk kp ll lm ln kt jc lo lp kx jg lq lr lb jk ls lt lf lu dt translated">效率更高</h2><p id="36cb" class="pw-post-body-paragraph ir is hu it b iu lv iw ix iy lw ja jb jc lx je jf jg ly ji jj jk lz jm jn jo hn dt translated">众所周知，虚拟机通常会耗尽可用于运行应用程序的服务器处理周期，从而带来巨大的<a class="ae jq" href="https://arxiv.org/pdf/1807.01842.pdf" rel="noopener ugc nofollow" target="_blank">性能损失</a>。每个虚拟机都在单独的操作系统副本上运行自己的执行环境，耗尽了原本可以用来运行应用程序的服务器处理周期。</p><p id="a9b2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另一方面，容器在操作系统级别执行环境隔离。这样，单个操作系统可以支持多个容器，每个容器都运行在自己独立的环境中。通过在单个操作系统上运行多个组件，容器减少了服务器处理周期的开销，从而为其他应用程序组件释放了处理能力。</p><h2 id="39af" class="lh kk hu bd kl li lj lk kp ll lm ln kt jc lo lp kx jg lq lr lb jk ls lt lf lu dt translated">灵活存储</h2><p id="6eea" class="pw-post-body-paragraph ir is hu it b iu lv iw ix iy lw ja jb jc lx je jf jg ly ji jj jk lz jm jn jo hn dt translated">虚拟机有多种存储选项。它们可以是本地或基于网络的存储类型。无论您选择哪个选项，总会有一个物理磁盘空间分配给每个虚拟机，它与虚拟机本身是隔离的。因此，在任何时候，虚拟机的操作系统、程序文件和数据都会占用专用存储磁盘上的存储空间，即<a class="ae jq" href="http://storagegaga.com/my-dilemma-of-stateful-storage-marriage/" rel="noopener ugc nofollow" target="_blank">状态存储</a>。</p><p id="c137" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">相反，容器提供了有状态和无状态的选择。当容器被创建并随着它的删除而被丢弃时，存储空间被创建或占用。编辑容器图像时会创建一个沙盒层，用于存储所有数据。该层仅作为容器的一部分处于活动状态。因此，您的微服务应用程序的每个服务都可以有自己的存储，可以与其他服务的存储不同地进行管理，从而提供更多的灵活性和控制。</p><h2 id="c30f" class="lh kk hu bd kl li lj lk kp ll lm ln kt jc lo lp kx jg lq lr lb jk ls lt lf lu dt translated">更好的隔离</h2><p id="4431" class="pw-post-body-paragraph ir is hu it b iu lv iw ix iy lw ja jb jc lx je jf jg ly ji jj jk lz jm jn jo hn dt translated">如上所述，容器为微服务提供了独立的执行环境，同时允许在单个操作系统上共存。数据库以及微服务的环境是完全独立的，尽管部署在单个操作系统上。如果试图在单个虚拟机上运行多个微服务，可能会有重叠的环境，最终可能会阻塞服务器。</p><p id="4a0d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有了容器，人们可以通过智能应用程序处理充分利用给定的硬件。例如，一些微服务需要大量的处理能力，而另一些微服务可能会产生大量的网络流量。借助容器内的智能工作负载分配，应用程序开发人员可以高效利用服务器资源，确保网络容量不会闲置。</p><h2 id="6829" class="lh kk hu bd kl li lj lk kp ll lm ln kt jc lo lp kx jg lq lr lb jk ls lt lf lu dt translated">缩减尺寸</h2><p id="f79c" class="pw-post-body-paragraph ir is hu it b iu lv iw ix iy lw ja jb jc lx je jf jg ly ji jj jk lz jm jn jo hn dt translated">众所周知，虚拟机比容器占用更多的存储空间。容器通常小至 10MB，而虚拟机至少占用几 GB 的存储空间。当使用微服务架构隔离复杂的应用时，其中每个功能都是单独的微服务，隔离将需要大量的虚拟机或容器。虚拟机必然需要大量空间，而容器则不需要。同一个物理服务器可以容纳比虚拟机多得多的容器。因此，考虑到需要确保企业应用程序不会变得过于庞大，容器化通常是首选。</p><h2 id="6d9a" class="lh kk hu bd kl li lj lk kp ll lm ln kt jc lo lp kx jg lq lr lb jk ls lt lf lu dt translated">更快的执行</h2><p id="6d93" class="pw-post-body-paragraph ir is hu it b iu lv iw ix iy lw ja jb jc lx je jf jg ly ji jj jk lz jm jn jo hn dt translated">虚拟机是由虚拟机管理程序创建的，虚拟机管理程序在开始时需要做出许多配置决策，包括运行应用程序的来宾操作系统、所需的存储空间量、网络首选项以及许多此类设置。尽管 VMWare 在其虚拟机创建向导中提供了预设的默认值，但该过程仍然非常复杂，需要几分钟才能在平台上执行。另一方面，由于缺少虚拟机管理程序，容器的创建速度比虚拟机快。容器图像存储在一个存储库中，可以根据需要通过几个快捷的命令从那里提取它们。因此，Docker 容器的启动时间从几毫秒到几秒不等，这使得它比 VM 快得多。</p><p id="52fe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">通过使用像 Kubernetes 和 Docker Swarm 这样的<a class="ae jq" href="https://containerjournal.com/2017/05/29/container-orchestrator-anyway/" rel="noopener ugc nofollow" target="_blank">容器编排器</a>，可以进一步简化大规模执行容器化的微服务。Docker 容器可以用这种编排器快速启动、退出和大规模替换。为了进一步增强<a class="ae jq" href="https://blog.imaginea.com/microservices-deployment-using-docker/" rel="noopener ugc nofollow" target="_blank">与微服务</a>和容器的合作，人们可以使用专为克服企业现代交付挑战而设计的应用交付平台。一个应用交付平台可以<a class="ae jq" href="https://www.hyscale.io/platform-overview/" rel="noopener ugc nofollow" target="_blank">帮助加速、标准化和维持</a>集装箱化和随后交付给编排者的完整流程。</p><p id="0b25" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">实际上，每个企业都有自己的需求、要求和遗留系统。在虚拟机和容器之间选择，后者更适合打包微服务。因此，如果一个人正在为他们的团队寻找一个可伸缩的、灵活的现代架构，容器是他们确保持续交付的最佳选择。</p></div></div>    
</body>
</html>