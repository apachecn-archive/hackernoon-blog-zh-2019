# 如何降低成本，提高云服务开发效率

> 原文：<https://medium.com/hackernoon/how-to-reduce-costs-and-increase-efficiency-of-cloud-service-development-ee0d6cb3d315>

![](img/70b2c54e852785de6cfa32feca229071.png)

*Image credit:* [*Unsplash*](https://unsplash.com/photos/jh2KTqHLMjE)

每个云服务都由几个组件组成。因此，最终用户访问的功能只是冰山一角。还有许多与基础设施相关的功能，这些功能对用户来说是不可见的，但对解决方案的启动和运行至关重要。

# **在云服务的罩下**

云服务新租户的注册就是这种特性的一个完美例子。如果我们在谈论一个 CRM 系统或会计软件，用户不能只是登录到系统。通常，在此之前，他们登陆一个网站，注册服务，通过电子邮件确认注册，登录网站，选择定价计划，支付费用(或选择免费演示计划)，最后进入应用程序。

一旦选择了计划，我们需要为用户创建一个租户，在这个租户中执行与服务引擎的所有交互。应该用相关数据填充这个租户实体。几个用户帐户可能使用一个租户，所以如果租户管理员希望使用不同的权限打开这样的访问，我们应该为他们提供这样的功能。

所有这些事情，如注册、保费计划、备份计划或访问管理数据共享，都与业务管理或会计无关。然而，它们对于整体用户体验是必不可少的。

# **为什么这不好**

对于开发人员来说，这意味着除了解决方案本身的编程之外，还要编写数千行代码。管理与基础设施相关的功能通常比编写核心云服务功能的代码花费更多的时间和资源。

在开发[会计套件](https://bit.ly/2DMgTcw)云软件时，我们自己也经历过这种情况。开发团队最终分成了两个不同的小组——一个小组继续开发核心功能，而第二个小组的工程师则致力于支持前端解决方案，如计费和注册模块。

这种方法会导致许多问题。其中最大的一个是不一致的发展。后端开发需要使用不同的平台、编程语言和框架，这些平台、编程语言和框架与用于核心功能开发的技术体系完全不同。

这种做法效率低下，而且核心堆栈和基础架构之间的距离不断加大。

# **如何解决这个问题**

如果我们可以使用相同的技术同时为核心服务及其底层组件创建特性，会怎么样？这会节省我们大量的时间和资源。这就是为什么我们决定在现实中实现这种方法。

为此，我们在基础架构中引入了一个新的实体。它被称为服务管理器，是特定云服务的所有基础设施相关数据的数据库。我们在那里存储了该服务的租户数量、用户列表及其权限、支付细节和订阅信息等等。

这个数据库是使用 [1C:Enterprise](https://bit.ly/2HJq7dy) 平台开发的。使用服务管理器，我们可以注册新用户，向他们发送电子邮件邀请，为每个用户应用不同的数据库/配置集，等等。

因此，我们最终转向使用构建云服务的相同技术来设计云服务的服务器端。服务管理器告诉云应用程序每个用户应该拥有什么程度的访问权限，或者何时应该终止访问。

# **最后的想法**

这种方法的第一个优点是减少了编写的代码行数。如果你已经有了大量与服务器相关的代码，可以应用到新的云应用程序中，这将使一切变得更加容易和快速。

第二个优势是灵活性。对前端和后端部分使用相同的技术堆栈可以让您最大限度地利用功能。