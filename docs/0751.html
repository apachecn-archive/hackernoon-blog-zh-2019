<html>
<head>
<title>An introduction to npx, the npm package runner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">npm 包运行程序 npx 简介</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/npx-npm-package-runner-7f6683e4304a#2019-01-31">https://medium.com/hackernoon/npx-npm-package-runner-7f6683e4304a#2019-01-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/1f61b9e0f3a4c49a719bfe760bfb84fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*doRIz__JZ4aU-A5VbpyXgQ.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">npm — package runner</figcaption></figure><p id="2f3a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您可以与节点模块交互并运行它们，而不需要将它们下载到本地，那会怎么样？如果你能直接运行 GitHub gist 的代码会怎么样？听起来不太可能？事实上是的。</p><p id="52a0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本文中，我们将讨论<strong class="je hv">npx(</strong>package runner)——它是什么，我们为什么需要它，以及从命令行运行节点包时该工具有用的用例。</p><h1 id="3a05" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">背景</h1><p id="cb4a" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated"><strong class="je hv"> npm </strong>(节点包管理器)这些年来有了很大的改进，为<a class="ae ld" href="https://www.microverse.org/" rel="noopener ugc nofollow" target="_blank">开发者</a>提供了一种全局和本地安装包的方式。有时候你需要检查一个包并尝试命令，或者你甚至想去掉<code class="eh le lf lg lh b">devDependencies</code>。从<strong class="je hv"> npm@5.2.0 </strong>开始，npm 开始安装一个新的二进制文件，与通常的 npm 一起被称为<strong class="je hv"> npx。</strong></p><blockquote class="li lj lk"><p id="43ee" class="jc jd ll je b jf jg jh ji jj jk jl jm lm jo jp jq ln js jt ju lo jw jx jy jz hn dt translated"><code class="eh le lf lg lh b"><em class="hu">npx</em></code> <em class="hu"> : </em> <strong class="je hv"> <em class="hu">一个 npm 包运行程序——帮助执行包，而无需显式安装。</em>T24】</strong></p></blockquote><p id="9f91" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh le lf lg lh b">$ which npx</code></p><p id="2816" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果由于某种原因它不可用，请按如下方式安装或更新它:</p><p id="99c6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh le lf lg lh b">$ npm install -g npx</code></p><p id="9534" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh le lf lg lh b">npx</code>使安装和管理托管在 npm 注册表中的依赖关系变得容易。它简化了过程，并为可执行文件提供了更好的。</p><p id="688f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh le lf lg lh b">$ npx &lt;command&gt; //command: package to be installed</code></p><h1 id="6e41" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">使用案例:</h1><ul class=""><li id="3780" class="lp lq hu je b jf ky jj kz jn lr jr ls jv lt jz lu lv lw lx dt translated">执行一次性命令</li><li id="4589" class="lp lq hu je b jf ly jj lz jn ma jr mb jv mc jz lu lv lw lx dt translated">使用基于<code class="eh le lf lg lh b">gist</code>的脚本</li><li id="998e" class="lp lq hu je b jf ly jj lz jn ma jr mb jv mc jz lu lv lw lx dt translated">使用不同版本的 npm 模块</li><li id="e0a8" class="lp lq hu je b jf ly jj lz jn ma jr mb jv mc jz lu lv lw lx dt translated">如果您没有全局安装它的权限。</li></ul><h2 id="c9f4" class="md kb hu bd kc me mf mg kg mh mi mj kk jn mk ml ko jr mm mn ks jv mo mp kw mq dt translated">执行一次性命令:</h2><figure class="ms mt mu mv fq iv fe ff paragraph-image"><div class="fe ff mr"><img src="../Images/52c8fbc51cdac41b2dcd03fe84e46d72.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/1*KW0xqEllNkD2tfHVBr64vA.gif"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Uses create-react-app execution to create a new app without installing in global</figcaption></figure><p id="3915" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有时候你想尝试一些 CLI 工具，但如果只是运行一次就把它安装在全局(或本地)就很烦人了。npx 是解决这个问题的好方法。使用<code class="eh le lf lg lh b">npx &lt;command&gt;</code>启动包的执行。如果<strong class="je hv"> &lt;命令&gt; </strong>不在您的<strong class="je hv"> $PATH 中，npx </strong>将从 npm 注册表安装软件包并调用它。<strong class="je hv"> npx </strong>不会在全局中维护包，所以你不用担心污染你的全局。</p><p id="4076" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">像<code class="eh le lf lg lh b">create-react-app</code>这样的工具只是偶尔调用一次。如果你已经在你的全局中安装了这些，当你使用的时候，你可能已经过时了。您可能不得不在每次想要使用时运行 install。<strong class="je hv"> npx </strong>是解决这个问题的好办法。</p><h2 id="2b47" class="md kb hu bd kc me mf mg kg mh mi mj kk jn mk ml ko jr mm mn ks jv mo mp kw mq dt translated">执行基于要点的脚本:</h2><figure class="ms mt mu mv fq iv fe ff paragraph-image"><div class="fe ff mw"><img src="../Images/3b53cc30c1a1bf075c800446d8792302.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/1*XNTxn6d5EMJSa9it-6fQNg.gif"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">gist execution</figcaption></figure><p id="71e2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以使用<a class="ae ld" href="https://gist.github.com/" rel="noopener ugc nofollow" target="_blank">gist.github.com</a>来共享任何实用程序脚本，而不是创建 git 存储库。npx 可以考虑执行 npm 执行的任何说明符。您可以使用 npx 直接调用 gist。</p><blockquote class="li lj lk"><p id="ec23" class="jc jd ll je b jf jg jh ji jj jk jl jm lm jo jp jq ln js jt ju lo jw jx jy jz hn dt translated"><strong class="je hv">确保在执行时通读 gists，因为如果脚本有一些恶意进程，它们可能会导致严重的问题。</strong></p></blockquote><h2 id="2747" class="md kb hu bd kc me mf mg kg mh mi mj kk jn mk ml ko jr mm mn ks jv mo mp kw mq dt translated">外壳自动回退:</h2><p id="0dc9" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">当您在命令行中键入带有<code class="eh le lf lg lh b">@</code>的内容，但没有找到该命令时，您可以将 npx 配置为默认的回退命令。这包括安装在本地前缀中也找不到的软件包。</p><blockquote class="li lj lk"><p id="f761" class="jc jd ll je b jf jg jh ji jj jk jl jm lm jo jp jq ln js jt ju lo jw jx jy jz hn dt translated">默认情况下，Mac OS X 运行 bash 版本&lt; 4。因为 OS X 没有更新到 GPLV3 许可的 bash 的最新版本。这里是原因 <a class="ae ld" href="https://www.gnu.org/licenses/gpl-faq.html#Tivoization" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">为什么</strong> </a></p></blockquote><p id="9226" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Zsh 是 bash 的替代品，可以和 OS X 一起使用。<a class="ae ld" href="https://stackabuse.com/zsh-vs-bash/" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">bash vs Zsh</strong></a><strong class="je hv">&amp;</strong>安装并制作<a class="ae ld" href="https://rick.cogley.info/post/use-homebrew-zsh-instead-of-the-osx-default/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> zsh </strong> </a>作为你的默认 shell</p><p id="aa41" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">安装后重新启动外壳。因为这是外壳更新后的第一次。，<strong class="je hv"> zsh </strong>会要求几个初始设置。现在，您可以设置自动回退。</p><p id="bb93" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">允许当前 shell 会话进行回退</p><p id="14e1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh le lf lg lh b">$ source &lt;(npx --shell-auto-fallback &lt;shell&gt;)</code></p><p id="362e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要永久安装，根据需要将<code class="eh le lf lg lh b">npx --shell-aut-fallback &lt;shell&gt;</code>添加到您的<code class="eh le lf lg lh b">~/.bashrc</code>、<code class="eh le lf lg lh b">~/.zshrc</code>、<code class="eh le lf lg lh b">~/.config/fish/config.fish</code></p><p id="cc22" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh le lf lg lh b">&lt;shell&gt;</code>:可以是<strong class="je hv"> zsh，bash (≥4)(或)fish </strong></p><pre class="ms mt mu mv fq mx lh my mz aw na dt"><span id="1b2d" class="md kb hu lh b fv nb nc l nd ne">$ mocha@4.1.0 --version<br/>mocha@4.1.0 is not found. Trying with npx ...<br/>npx: installed 24 in 2.243s<br/>4.1.0</span></pre><p id="c944" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，你可以尝试安装任何像<code class="eh le lf lg lh b">$ npm run mocha@3.2</code>这样的包，它会尝试在项目级别找到 webpack，如果没有，它会自动退回到使用<strong class="je hv"> npx。</strong></p><p id="fa67" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">egghead.io 里有<a class="ae ld" href="https://egghead.io/courses/execute-npm-package-binaries-with-the-npx-package-runner" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">npx</strong></a><strong class="je hv"/>的课程(有兴趣的话)</p><h2 id="ffbd" class="md kb hu bd kc me mf mg kg mh mi mj kk jn mk ml ko jr mm mn ks jv mo mp kw mq dt translated">结论</h2><p id="17fe" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">npx 帮助解决安装不必要的软件包只是为了浏览的问题。这是避免版本问题和依赖性问题的简单方法。就像我常说的，会有更多有趣的话题回来。干杯！</p><p id="325c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh le lf lg lh b"><strong class="je hv">code</strong> = <strong class="je hv">co</strong>ffee + <strong class="je hv">de</strong>veloper</code></p></div><div class="ab cl nf ng hc nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="hn ho hp hq hr"><figure class="ms mt mu mv fq iv fe ff paragraph-image"><a href="https://www.microverse.org"><div class="fe ff nm"><img src="../Images/a45c333e155b06751ad110f0ed334a4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ScBgj_drfjvd8bqPIjhMPQ.png"/></div></a></figure></div></div>    
</body>
</html>