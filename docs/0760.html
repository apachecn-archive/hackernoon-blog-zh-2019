<html>
<head>
<title>How to develop a WYSIWYG editor in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 Android 中开发一个所见即所得编辑器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-develop-a-wysiwyg-editor-in-android-just-like-medium-30e0d4c8471f#2019-01-31">https://medium.com/hackernoon/how-to-develop-a-wysiwyg-editor-in-android-just-like-medium-30e0d4c8471f#2019-01-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="8489" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">一天开发一个 Android 的所见即所得编辑器。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/89202961f83102d74e5fd71fa81b3655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*crnMp7iHv8eEufQtY6ZB9A.png"/></div></div></figure><p id="8068" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果你是一个开发者，你可能尝试过 Medium 的编辑器。这是为博客提供的世界级服务，其用户体验是博客网站的行业标准。</p><p id="5545" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">指标— </strong></p><ol class=""><li id="242e" class="kr ks hu jx b jy jz kb kc ke kt ki ku km kv kq kw kx ky kz dt translated">什么是<a class="ae la" href="https://hackernoon.com/tagged/wysiwyg" rel="noopener ugc nofollow" target="_blank">所见即所得</a>编辑器？</li><li id="ea13" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">编辑器的内部架构。</li><li id="0451" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">如何存储内容？</li></ol><p id="3658" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这个博客将帮助你了解当你想要建立一个编辑器时应该如何思考，构建模块是什么，以及你必须注意的基本规则。</p><p id="07cb" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我还在这篇博客的末尾给出了我的示例的链接，供您参考，以防您在某个地方遇到困难，或者您想直接浏览代码。</p><p id="1ac4" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">那么让我们开始吧，</strong></p></div><div class="ab cl lg lh hc li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hn ho hp hq hr"><h1 id="3cef" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ja ly jb lz jd ma je mb jg mc jh md me dt translated"><strong class="ak">什么是所见即所得编辑器？</strong></h1><p id="d7d7" class="pw-post-body-paragraph jv jw hu jx b jy mf iv ka kb mg iy kd ke mh kg kh ki mi kk kl km mj ko kp kq hn dt translated">所见即所得是“所见即所得”的缩写。WYSIWYG 编辑器是一个系统，在该系统中，内容可以以非常类似于其作为最终文档打印或显示时的外观的形式进行编辑。</p><h2 id="cb90" class="mk lo hu bd lp ml mm mn lt mo mp mq lx ke mr ms lz ki mt mu mb km mv mw md mx dt translated">媒体编辑看起来怎么样？</h2><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff my"><img src="../Images/c0eef8a85f35812aa25da7cd8ec08b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*4V7arzDmzqS4mtbE5A7aNA.png"/></div><figcaption class="mz na fg fe ff nb nc bd b be z ek">Medium Editor (Android)</figcaption></figure><p id="5a95" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">以上是编辑器的截图，是一个干净直观的界面。所有编辑工具都显示在底部工具栏上。用户可以输入他们的内容并相应地格式化。</p><p id="2a63" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这似乎是一个定制的<a class="ae la" href="https://developer.android.com/reference/android/widget/EditText" rel="noopener ugc nofollow" target="_blank"> EditText </a>，它使用<a class="ae la" href="https://developer.android.com/reference/android/text/Spannable" rel="noopener ugc nofollow" target="_blank">span ables</a>来格式化它的内容。但是，使用<em class="nd"> spannable </em>很难管理像 10k 单词这样的长文本格式。根据文件显示，</p><blockquote class="ne"><p id="e809" class="nf ng hu bd nh ni nj nk nl nm nn kq ek translated">这是可以附加和分离标记对象的文本接口。</p><p id="88cd" class="nf ng hu bd nh ni nj nk nl nm nn kq ek translated">将指定的标记对象附加到文本的范围<code class="eh no np nq nr b">start...end</code>中。</p></blockquote><p id="e303" class="pw-post-body-paragraph jv jw hu jx b jy ns iv ka kb nt iy kd ke nu kg kh ki nv kk kl km nw ko kp kq hn dt translated">在核心处，<em class="nd">span enable</em>从其<code class="eh no np nq nr b">start</code>到<code class="eh no np nq nr b">end</code>索引执行字符串搜索操作，然后应用<code class="eh no np nq nr b"><a class="ae la" href="https://developer.android.com/guide/topics/text/spans" rel="noopener ugc nofollow" target="_blank">Spans</a></code>的类型。在<code class="eh no np nq nr b">edittext</code>中的每一个角色变化，它都必须更新跨度。这涉及到在有限的时间内进行大量的操作，因此它会影响 UI 的渲染性能，并且当用户试图快速键入或快速删除任何内容时，会产生糟糕的体验。</p><p id="90d1" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">为了验证这一点，让我们深入观察一下<em class="nd">‘混凝土后面的栅栏’。</em></p></div><div class="ab cl lg lh hc li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hn ho hp hq hr"><h1 id="ea79" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ja ly jb lz jd ma je mb jg mc jh md me dt translated">编辑器的内部架构</h1><h2 id="1d4e" class="mk lo hu bd lp ml mm mn lt mo mp mq lx ke mr ms lz ki mt mu mb km mv mw md mx dt translated">编辑的 x 光片</h2><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff my"><img src="../Images/bdd2a51eb25880ddef92b438ff527463.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*I4tQlfvDh8deqd527JS5Gg.png"/></div><figcaption class="mz na fg fe ff nb nc bd b be z ek">Layout bounds of editor</figcaption></figure><p id="dfaf" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">给定的图片是在开发者模式下打开的中型应用程序。活动光标在一个框内。这个盒子还是一个<code class="eh no np nq nr b">editext</code>。现在我们来看另一个我们输入东西时的截图</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff my"><img src="../Images/0b8c63ef290bcd65f9aee6b634e9c1fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*9CMzX-oqmejBai3N2ZN8_w.png"/></div><figcaption class="mz na fg fe ff nb nc bd b be z ek">On Typing something</figcaption></figure><p id="cce2" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当我们按回车键时，光标移动到新行，另一个框被创建。因此我们可以得出结论，这不是一个单一的<code class="eh no np nq nr b">editext</code>和<code class="eh no np nq nr b">Spans</code>都没有使用。</p><p id="38a4" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果我们继续按回车键，新的盒子就会被添加。这是一个概念—</p><blockquote class="nx ny nz"><p id="4c7d" class="jv jw nd jx b jy jz iv ka kb kc iy kd oa kf kg kh ob kj kk kl oc kn ko kp kq hn dt translated">把编辑器想象成一个容器，根据用户的动作(如<code class="eh no np nq nr b">enter</code>或<code class="eh no np nq nr b">backpressed</code>)向其中添加或从中删除元素。每个元素都是可独立设置样式的实体，可以是粗体、H2 或块引用、图像或列表项等。</p></blockquote><p id="e8a4" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">现在让我们对此进行更多的探索，</p><h2 id="14c0" class="mk lo hu bd lp ml mm mn lt mo mp mq lx ke mr ms lz ki mt mu mb km mv mw md mx dt translated">内部架构的基础</h2><p id="3f05" class="pw-post-body-paragraph jv jw hu jx b jy mf iv ka kb mg iy kd ke mh kg kh ki mi kk kl km mj ko kp kq hn dt translated">有一个按垂直顺序添加视图的父视图。在<a class="ae la" href="https://hackernoon.com/tagged/android" rel="noopener ugc nofollow" target="_blank">安卓</a>中，它简直可以是竖<code class="eh no np nq nr b">orientation</code>中<code class="eh no np nq nr b">LinearLayout</code>的扩展版。</p><p id="4167" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">最初，有一个<code class="eh no np nq nr b">edittext</code>被添加到堆栈并被聚焦。直到用户按下回车键，内容进入相同的<code class="eh no np nq nr b">edittext</code>。</p><p id="d7ad" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">按下回车键后，一个新的<code class="eh no np nq nr b">edittext</code>被插入堆栈。父视图跟踪添加到堆栈中的每个视图的索引以及焦点视图。看看这个骨架—</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff od"><img src="../Images/fd548ca879bc5b54e099ef3962f36566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*dDalcjLvl3U32_0pB6GWtg.png"/></div><figcaption class="mz na fg fe ff nb nc bd b be z ek">Skeleton of our editor</figcaption></figure><p id="b87a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我认为内部结构很清楚。现在，让我们看看格式化部分。</p><h2 id="a9b3" class="mk lo hu bd lp ml mm mn lt mo mp mq lx ke mr ms lz ki mt mu mb km mv mw md mx dt translated">编辑器的基本构件</h2><p id="7dc3" class="pw-post-body-paragraph jv jw hu jx b jy mf iv ka kb mg iy kd ke mh kg kh ki mi kk kl km mj ko kp kq hn dt translated">在我们的基本编辑器中，我们将支持—</p><ol class=""><li id="1721" class="kr ks hu jx b jy jz kb kc ke kt ki ku km kv kq kw kx ky kz dt translated">标题风格像 H1，H2…H5</li><li id="dd47" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">粗体，斜体</li><li id="481e" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">大宗报价</li><li id="0c0f" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">图像</li><li id="ae78" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">有序/无序列表</li><li id="3d75" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">水平分隔线</li></ol><p id="0478" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们可以对列表进行排序，并将它们分成如下几组。</p><p id="dba8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">组 1 </strong>:标题样式、粗体、斜体、块引号、列表</p><p id="42d0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">第二组:</strong>图像</p><p id="c00f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">第三组:</strong>水平分隔线</p><p id="8c70" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这里，我们根据呈现元素所需的属性对元素进行了分组。换句话说，文本、图像(多媒体)和水平分隔线。</p><h2 id="f8aa" class="mk lo hu bd lp ml mm mn lt mo mp mq lx ke mr ms lz ki mt mu mb km mv mw md mx dt translated"><strong class="ak">我们可以对组 1 执行的操作— </strong></h2><ol class=""><li id="7e78" class="kr ks hu jx b jy mf kb mg ke oe ki of km og kq kw kx ky kz dt translated">我们可以使用<code class="eh no np nq nr b">Edittext</code>来获取输入。</li><li id="7bce" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">使用字体应用标题样式。</li><li id="f0f0" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">通过改变<code class="eh no np nq nr b">edittext</code>的背景视图显示区块报价。</li></ol><p id="2173" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">因此我们可以创建一个自定义的<code class="eh no np nq nr b">edittext</code>。该视图将存储所有应用的配置。当我们收集编辑器数据(稍后介绍)并存储在设备上或发送到服务器时，我们将阅读它们。</p><blockquote class="nx ny nz"><p id="58b6" class="jv jw nd jx b jy jz iv ka kb kc iy kd oa kf kg kh ob kj kk kl oc kn ko kp kq hn dt translated"><strong class="jx hv">对于组 1 </strong>:我们可以有一个包含所有参数的自定义视图。该块(视图)将在编辑器中添加或删除。</p></blockquote><h2 id="587b" class="mk lo hu bd lp ml mm mn lt mo mp mq lx ke mr ms lz ki mt mu mb km mv mw md mx dt translated"><strong class="ak">我们可以对组 2 执行的操作— </strong></h2><ol class=""><li id="f871" class="kr ks hu jx b jy mf kb mg ke oe ki of km og kq kw kx ky kz dt translated">我们使用<code class="eh no np nq nr b">ImageView</code>来显示图像。</li><li id="6fe5" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">可以通过<code class="eh no np nq nr b">Edittext</code>拍摄图像字幕。</li></ol><p id="af0f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这可以是一个自定义视图，由一个<code class="eh no np nq nr b">ImageView</code>和一个<code class="eh no np nq nr b">Edittext</code>(用于图像上的标题)组成。它将负责上传图像到服务器，并存储回 URL 本身。此外，它需要存储输入到<code class="eh no np nq nr b">EditText</code>中的文本。</p><blockquote class="nx ny nz"><p id="5e92" class="jv jw nd jx b jy jz iv ka kb kc iy kd oa kf kg kh ob kj kk kl oc kn ko kp kq hn dt translated"><strong class="jx hv">对于组 2: </strong>我们可以使用 ImageView 和 Edittext 定制视图。</p></blockquote><h2 id="a3f0" class="mk lo hu bd lp ml mm mn lt mo mp mq lx ke mr ms lz ki mt mu mb km mv mw md mx dt translated"><strong class="ak">我们可以对组 3 执行的操作— </strong></h2><p id="1533" class="pw-post-body-paragraph jv jw hu jx b jy mf iv ka kb mg iy kd ke mh kg kh ki mi kk kl km mj ko kp kq hn dt translated">这是最简单的部分，这将是一个简单的视图，它将画一条线。</p><blockquote class="nx ny nz"><p id="3766" class="jv jw nd jx b jy jz iv ka kb kc iy kd oa kf kg kh ob kj kk kl oc kn ko kp kq hn dt translated"><strong class="jx hv">对于第 3 组:</strong>我们可以有一个可画线的视图。</p></blockquote><p id="53a8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">为了制作一个稳定的编辑器，我们需要让它的反应真实。所以有一些需要遵守的基本规则。</p><h2 id="7c8d" class="mk lo hu bd lp ml mm mn lt mo mp mq lx ke mr ms lz ki mt mu mb km mv mw md mx dt translated">编辑规则</h2><ol class=""><li id="a4d6" class="kr ks hu jx b jy mf kb mg ke oe ki of km og kq kw kx ky kz dt translated">最初，会有一个光标在上面的<code class="eh no np nq nr b">editext</code>。</li><li id="99c3" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">如果用户正在输入一个段落并按下回车键，我们需要添加另一行(<code class="eh no np nq nr b">edittext</code>)。</li><li id="f48a" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">如果用户应用一个样式，它将适用于块的全部内容。</li><li id="ea84" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">如果用户将光标放在文本中间并按 enter 键，则获取光标之后的内容—&gt;插入新块—&gt;将内容复制到其中。</li><li id="281c" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">如果用户试图插入图像，则获取当前聚焦视图的索引，并在其下方插入新的图像块。此外，在图像下方插入一个<code class="eh no np nq nr b">EditText</code>块(这样用户可以点击图像下方并继续书写)。</li><li id="067f" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">如果用户删除了一个块的全部内容，带他到前一个编辑块。</li></ol><p id="e33f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这些是许多规则中的一些基本规则，可以以类似的方式应用。</p></div><div class="ab cl lg lh hc li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hn ho hp hq hr"><h1 id="c5dc" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ja ly jb lz jd ma je mb jg mc jh md me dt translated">如何存储内容(文本、图像……)？</h1><p id="c514" class="pw-post-body-paragraph jv jw hu jx b jy mf iv ka kb mg iy kd ke mh kg kh ki mi kk kl km mj ko kp kq hn dt translated">到目前为止，我们已经讨论了编辑器的结构部分。现在让我们来看一下内容存储。我们不能直接存储纯文本和 URL，因为涉及到很多样式。这一部分将介绍文本应该如何存储在服务器和设备上，以及如何正确呈现。</p><h2 id="2a79" class="mk lo hu bd lp ml mm mn lt mo mp mq lx ke mr ms lz ki mt mu mb km mv mw md mx dt translated">数据存储结构</h2><p id="cfa6" class="pw-post-body-paragraph jv jw hu jx b jy mf iv ka kb mg iy kd ke mh kg kh ki mi kk kl km mj ko kp kq hn dt translated">我们将有一个助手类，它将遍历父容器并从每个组收集以下信息。我们之前定义的群体。</p><ul class=""><li id="8df3" class="kr ks hu jx b jy jz kb kc ke kt ki ku km kv kq oh kx ky kz dt translated"><strong class="jx hv">来自组 1: </strong>实体(文本)、文本和样式的类型。</li><li id="ad64" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq oh kx ky kz dt translated"><strong class="jx hv">来自第 2 组:</strong>实体(图像)类型、图像 URL 和标题文本</li><li id="1651" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq oh kx ky kz dt translated"><strong class="jx hv">来自第三组:</strong>实体类型。</li></ul><p id="59d8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这是存储博客的结构之一—</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff oi"><img src="../Images/85344e471c4fa46d57e87c2ad2c94405.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eMiO1gKttZIuF0qlp1-WjQ.png"/></div></div><figcaption class="mz na fg fe ff nb nc bd b be z ek">A basic structure of editor data</figcaption></figure><p id="a66f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在我们以这种格式收集数据后，我们可以将它发送到服务器或将其存储为草稿。</p><h2 id="01cd" class="mk lo hu bd lp ml mm mn lt mo mp mq lx ke mr ms lz ki mt mu mb km mv mw md mx dt translated">呈现数据</h2><p id="7d04" class="pw-post-body-paragraph jv jw hu jx b jy mf iv ka kb mg iy kd ke mh kg kh ki mi kk kl km mj ko kp kq hn dt translated">现在，如果用户回到博客的草稿版本，我们需要读取 JSON 结构，然后根据它准备视图。这是如何做到的—</p><ol class=""><li id="7fc4" class="kr ks hu jx b jy jz kb kc ke kt ki ku km kv kq kw kx ky kz dt translated">遍历 JSON 数据中的实体数组。</li><li id="d8dd" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">实例化特定类型的实体(文本、图像或 HR ),并用给定的数据配置它们。</li><li id="c0b6" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">将实体添加到父视图。</li><li id="e375" class="kr ks hu jx b jy lb kb lc ke ld ki le km lf kq kw kx ky kz dt translated">把注意力集中到第一个孩子身上。</li></ol><p id="2aa3" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们现在已经成功地从原始数据中恢复了草稿的结构。</p></div><div class="ab cl lg lh hc li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hn ho hp hq hr"><h1 id="4371" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ja ly jb lz jd ma je mb jg mc jh md me dt translated"><strong class="ak">参考样本库— </strong></h1><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff oj"><img src="../Images/a11d55391b4c5649249f76575643c0e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*dTosVbNDmOAIXVQvsa039g.jpeg"/></div></figure><p id="6bb4" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我实现了一个 editor 版本，它是一个 WYSIWYG Markdown 编辑器。它目前正被用于<a class="ae la" href="https://play.google.com/store/apps/details?id=com.hapramp" rel="noopener ugc nofollow" target="_blank">1 lamp 应用</a>(一款社交媒体应用)。</p><p id="b498" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你可以在<a class="ae la" href="https://github.com/bxute/MarkDEditor" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上查看源代码。</p><p id="a789" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">欢迎在评论中提出你的疑问。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ok ol l"/></div></figure></div></div>    
</body>
</html>