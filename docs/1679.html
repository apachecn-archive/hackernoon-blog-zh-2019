<html>
<head>
<title>Commit, push, deploy — Git in the Microsoft Azure Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提交、推送、部署—微软Azure云中的Git</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/commit-push-deploy-git-in-the-microsoft-azure-cloud-403fb135bcf4?source=collection_archive---------27-----------------------#2019-03-11">https://medium.com/hackernoon/commit-push-deploy-git-in-the-microsoft-azure-cloud-403fb135bcf4?source=collection_archive---------27-----------------------#2019-03-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/642770143b10fdedfb802bc28cf71c9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ytQItLytgkJxIRChRrOF7A.jpeg"/></div></div></figure><p id="0bb0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<a class="ae ka" href="https://twitter.com/chris_noring" rel="noopener ugc nofollow" target="_blank">推特</a>上关注我，很高兴接受你对主题或改进的建议/Chris</p><blockquote class="kb"><p id="baa8" class="kc kd hu bd ke kf kg kh ki kj kk jz ek translated">自从Git发布以来，我们就开始依赖它作为我们的默认版本控制工具，它已经成为事实上的标准，即使存在其他选择。Git帮助我们管理我们的源代码，将它分成分支，甚至通过允许我们创建拉/合并请求，帮助我们与其他开发者在GitHub或GitLab等地方合作。如果当我们将应用程序迁移到云中时，Git可以在那里帮助我们，这不是很好吗？</p></blockquote><p id="583d" class="pw-post-body-paragraph jc jd hu je b jf kl jh ji jj km jl jm jn kn jp jq jr ko jt ju jv kp jx jy jz hn dt translated">本文将涵盖以下内容:</p><ul class=""><li id="7d50" class="kq kr hu je b jf jg jj jk jn ks jr kt jv ku jz kv kw kx ky dt translated"><strong class="je hv">下载</strong>一个示例应用程序，我们希望专注于理解使用Git的部署，所以我们将采用一些现成的代码</li><li id="112c" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated">在本地运行应用程序只是为了确保它的工作，这是必须的，如果它在本地工作，它至少有机会在云中工作</li><li id="8eb3" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">配置一个部署用户</strong>，该部署用户是web app的<code class="eh le lf lg lh b">FTP</code>和<code class="eh le lf lg lh b">local Git deployment</code>所必需的</li><li id="5315" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">创建一个资源组</strong>，如果您需要一个新的逻辑分组来完成我们将要做的事情，</li><li id="2735" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">创建一个服务计划</strong>，我们将需要它来指定我们将如何为此付费，以及我们将创建什么样的容器</li><li id="f00a" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">创建web应用程序</strong>，我们将需要运行一个命令来创建实际的web应用程序，我们将需要在这里说明我们如何部署它，我们将选择<code class="eh le lf lg lh b">git deploy</code>，更多信息请见下文</li><li id="127e" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">访问</strong>生成的网站，我们当然要享受我们的劳动成果</li><li id="7287" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">使用<code class="eh le lf lg lh b">git deploy</code>将源代码推送到</strong>站点</li><li id="5215" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">管理更新</strong>，让我们学习如何更新我们的应用程序并推送更改，使用Git，这种部署不是一次性的，我们可以随时更改代码并重新部署</li></ul><h1 id="ee88" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">为什么是云，为什么是Git？</h1><p id="e038" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">如今，云几乎是开发者部署新应用的默认位置。原因有很多，比如它具有成本效益、可伸缩性、弹性，并且对安全性有一些很好的内置支持(尽管我们不能完全依赖云)。</p><p id="c673" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Git是一个我们很可能已经在使用的工具，当我们编码来管理我们的源代码时，尤其是当我们有许多开发人员维护相同的代码库时。将云计算和部署等技能添加到您的工具带上的最佳方式是使用您已经了解的技术。这就是，利用你已经知道的东西，加入一些云。希望你喜欢这篇文章:)</p><h1 id="d504" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">资源</h1><p id="3f00" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">在本文中，我们确实参考了一些文档页面，所以在这里，您可以了解更多信息:</p><ul class=""><li id="81df" class="kq kr hu je b jf jg jj jk jn ks jr kt jv ku jz kv kw kx ky dt translated"><a class="ae ka" href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?wt.mc_id=devto-blog-chnoring&amp;view=azure-cli-latest" rel="noopener ugc nofollow" target="_blank">安装Azure CLI </a>，我们将需要Azure CLI的一切。Azure CLI非常强大，可以让你在门户中执行几乎所有你能做的事情。</li><li id="23cb" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><a class="ae ka" href="https://docs.microsoft.com/en-us/azure/app-service/deploy-local-git?wt.mc_id=devto-blog-chnoring" rel="noopener ugc nofollow" target="_blank">本地Git部署到Azure应用服务</a>，这一页展示了如何使用Git将你的应用部署到Azure，但也谈了一点Azure DevOps build</li><li id="d4b2" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated">Git部署快速入门，这是一个比本文更快的版本。它的速度更快，因为它为资源组、应用服务计划使用了一些智能默认设置，并且它还使用了一种叫做<code class="eh le lf lg lh b">zip deploy</code>的东西，这是另一种类型的部署，而不是我们在这里描述的<code class="eh le lf lg lh b">git deploy</code></li></ul><h1 id="ed93" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">下载并运行一个示例应用程序</h1><p id="557b" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">先来一个样例app。最简单的方法是安装Git(如果您还没有安装的话),并从GitHub中获取示例项目:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="1fd6" class="mt lj hu lh b fv mu mv l mw mx">git clone https://github.com/Azure-Samples/python-docs-hello-world cd python-docs-hello-world</span></pre><p id="8438" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">上面的应用程序是一个Python应用程序，使用库<code class="eh le lf lg lh b">Flask</code>为我们提供了一个REST API。这个知识库给了我们什么？</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="0bbd" class="mt lj hu lh b fv mu mv l mw mx">application.py // this is where our application lives</span><span id="6468" class="mt lj hu lh b fv my mv l mw mx">requirements.txt // this is a list of libraries that needs to be installed for our app to work</span><span id="8090" class="mt lj hu lh b fv my mv l mw mx">.gitignore // just a file Git reads so it knows what files to NOT include when we push changes to the repo</span></pre><p id="7ec3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们看看<code class="eh le lf lg lh b">application.py</code>以及它是如何为我们设置一些路线的:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="a4f9" class="mt lj hu lh b fv mu mv l mw mx">// application.py</span><span id="021d" class="mt lj hu lh b fv my mv l mw mx">from flask import Flask</span><span id="ec8f" class="mt lj hu lh b fv my mv l mw mx">app = Flask(__name__)<br/></span><span id="162e" class="mt lj hu lh b fv my mv l mw mx">@app.route("/")</span><span id="98de" class="mt lj hu lh b fv my mv l mw mx">def hello():</span><span id="cd66" class="mt lj hu lh b fv my mv l mw mx">    return "Hello World!"</span></pre><p id="f548" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">上面的代码所做的是定义一条路线<code class="eh le lf lg lh b">/</code>，它让方法<code class="eh le lf lg lh b">hello</code>处理提到的路线，并输出文本<code class="eh le lf lg lh b">Hello World</code>，这是一个非常标准的短语，当你第一次使用新的编程语言或库时。</p><h2 id="80e7" class="mt lj hu bd lk mz na nb lo nc nd ne ls jn nf ng lw jr nh ni ma jv nj nk me nl dt translated">在本地运行应用程序</h2><p id="3734" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">好了，现在我们对摆在我们面前的东西有了更多的了解。下一步是尝试在本地运行这个应用程序，然后再将它部署到云中。</p><p id="e54c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要启动并运行Python应用程序，我们需要安装Python和它附带的依赖库。根据我们使用的操作系统(Windows、Linux或Mac ),相关说明会有所不同。如果你在Mac上，你已经安装了Python。然而，您将需要包管理器<code class="eh le lf lg lh b">Pip</code>，我们可以通过运行以下命令来获得它:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="f378" class="mt lj hu lh b fv mu mv l mw mx">sudo easy_install pip</span></pre><p id="8888" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你是一个认真的Python开发者，那么看一下即将到来的链接是值得的。如果你不是，你只是为了Git和Azure而来，请随意跳过下面的段落。</p><blockquote class="nm nn no"><p id="8d51" class="jc jd np je b jf jg jh ji jj jk jl jm nq jo jp jq nr js jt ju ns jw jx jy jz hn dt translated"><a class="ae ka" href="http://flask.pocoo.org/docs/0.12/installation/#installation" rel="noopener ugc nofollow" target="_blank">http://flask.pocoo.org/docs/0.12/installation/#installation</a></p></blockquote><p id="e93f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">简而言之，它要求你安装一个叫做<code class="eh le lf lg lh b">virtualenv</code>的东西。它创建了不同的工作环境，所以如果你需要一个单独的Python版本或一些库的单独版本，这是前进的方向。</p><p id="9134" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来我们需要做的是安装依赖库，我们通过在终端中调用以下命令来完成:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="e091" class="mt lj hu lh b fv mu mv l mw mx">sudo pip install -r requirements.txt</span></pre><p id="7bcf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">快速浏览一下<code class="eh le lf lg lh b">requirements.txt</code>文件，就会发现我们有一些应用程序需要的依赖库。正如我们在下面看到的，这是我们的API框架<code class="eh le lf lg lh b">Flask</code>和一些支持库:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="6630" class="mt lj hu lh b fv mu mv l mw mx">click==6.7<br/><strong class="lh hv">Flask==1.0.2</strong><br/>itsdangerous==0.24<br/>Jinja2==2.10<br/>MarkupSafe==1.0<br/>Werkzeug==0.14.1%</span></pre><p id="1313" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后我们只需要设置环境变量<code class="eh le lf lg lh b">FLASK_APP</code>指向我们的启动文件<code class="eh le lf lg lh b">application.py</code>，就像这样:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="d8a2" class="mt lj hu lh b fv mu mv l mw mx">FLASK_APP=application.py</span></pre><p id="bf45" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="f240" class="mt lj hu lh b fv mu mv l mw mx">python -m flask run</span></pre><p id="3b65" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将在<code class="eh le lf lg lh b">http://localhost:5000</code>启动我们的应用程序，就像这样:</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff fg"><img src="../Images/ace77b7dd92a3987274e14f292294f93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hGlk3VUyGp1xeV-AwB_DRQ.png"/></div></div></figure><p id="e351" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">太好了，我们已经为下一步做好了准备，部署到云。</p><h1 id="bec5" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">配置部署用户</h1><p id="bd76" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">要对Azure进行任何类型的部署，你都需要一个所谓的<code class="eh le lf lg lh b">deployment user</code>。该部署用户需要有一个全球唯一的名称<em class="np">。</em></p><p id="62ef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了创建我们的部署用户，我们需要使用命令<code class="eh le lf lg lh b">az webapp deployment</code>。然后我们需要在<code class="eh le lf lg lh b">--user-name</code>标志后提供一个用户，在<code class="eh le lf lg lh b">--password</code>标志后提供一个密码。密码长度至少需要8个字符，并且包含以下三个元素中的两个:字母、数字和符号。因此，我们需要运行的完整命令如下所示:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="a0d1" class="mt lj hu lh b fv mu mv l mw mx">az webapp deployment user set --user-name &lt;username&gt; --password &lt;password&gt;</span></pre><p id="92a9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下面是调用上述命令的一个例子。让我们调用用户<code class="eh le lf lg lh b">deployment-user-chris</code>并给它密码<code class="eh le lf lg lh b">test1234</code>。因此，我们的命令现在看起来像这样:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="f1a2" class="mt lj hu lh b fv mu mv l mw mx">az webapp deployment user set --user-name deployment-user-chris --password test1234</span></pre><p id="040a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这应该会产生如下所示的输出:</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nt"><img src="../Images/039833649cb495d7990030e4dfbecc17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iucjsA0nGR-xCAQi.png"/></div></div></figure><p id="b970" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">上面的输出意味着我们的命令成功了，我们可以继续进行下一步。</p><h1 id="9514" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">创建资源组</h1><p id="a6ea" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">资源组是一个逻辑分组，您可以将所有的东西放在其中，如数据库、服务计划、应用程序等等，我们几乎做任何事情都需要一个资源组。</p><p id="75f2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以使用现有的资源组之一，也可以创建一个新的资源组，在这种情况下，您可以键入以下内容:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="a511" class="mt lj hu lh b fv mu mv l mw mx">az group create \ <br/>--name [your name for a resource group] \ <br/>--location westeurope</span></pre><h1 id="46c4" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">创建服务计划</h1><p id="77fc" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">Azure中的应用服务计划为应用的运行定义了一组计算资源。这相当于更传统的Web托管中的服务场。服务计划附带一个定价层。定价层决定您获得的应用服务功能以及您为计划支付的费用。这里还有很多需要了解的，感兴趣的读者可以看看下面的<a class="ae ka" href="https://docs.microsoft.com/en-us/azure/app-service/overview-hosting-plans?wt.mc_id=devto-blog-chnoring" rel="noopener ugc nofollow" target="_blank">链接</a>来更详细地了解它是如何工作的。</p><p id="6baa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于本文来说，理解所有运行在AppService上的应用程序都需要一个服务计划作为先决条件就足够了。</p><p id="4b62" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">创建服务计划的完整命令如下:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="bddf" class="mt lj hu lh b fv mu mv l mw mx">az appservice plan create --name [your name for an app service plan] --resource-group [you name for a resource group] --sku B1 --is-linux</span></pre><p id="7f01" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">值<code class="eh le lf lg lh b">B1</code>意味着我们有一个基本的服务计划(相对便宜，所以你可以测试一下),<code class="eh le lf lg lh b">--is-linux</code>意味着我们将得到一个Linux容器</p><p id="c7c9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们使用上面的<code class="eh le lf lg lh b">appservice</code>命令和子命令<code class="eh le lf lg lh b">plan</code>来创建我们的服务计划。这也应该给我们一个JSON响应，返回值为<code class="eh le lf lg lh b">Succeeded</code>的<code class="eh le lf lg lh b">provisioningState</code>键</p><h1 id="07e1" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">创建web应用程序</h1><p id="39cc" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">下面是创建web应用程序的命令。我们将需要陈述应用程序的<code class="eh le lf lg lh b">resource group</code>、<code class="eh le lf lg lh b">pricing plan</code>、<code class="eh le lf lg lh b">name</code>、Python的版本，以及最后我们将如何部署它，即<code class="eh le lf lg lh b">git deploy</code>:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="29e4" class="mt lj hu lh b fv mu mv l mw mx">az webapp create --resource-group [your name for a resource group] --plan [your name for a service plan] --name [your name for an app name] --runtime "PYTHON|3.7" --deployment-local-git</span></pre><p id="a3c6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对上述命令的一个评论是<code class="eh le lf lg lh b">app name</code>需要是<em class="np">全局唯一的</em>。</p><p id="a502" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在JSON对此的回应中，我们寻找两条有趣的信息:</p><ul class=""><li id="c33d" class="kq kr hu je b jf jg jj jk jn ks jr kt jv ku jz kv kw kx ky dt translated">git存储库的名称，查找名为<code class="eh le lf lg lh b">deploymentLocalGitUrl</code>的键。</li><li id="ef01" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated">公共URL，查找名为<code class="eh le lf lg lh b">defaultHostName</code>的密钥</li></ul><p id="2651" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您所完成的是一个启用了git部署的空web应用程序。空的原因是因为我们还没有放任何代码进去。</p><h1 id="18c8" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">访问网站</h1><p id="ee2b" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">尽管我们还没有把任何代码放到我们的网站上，但是它仍然包含了一些我们可以访问的默认登陆页面。要访问网站，请转到<code class="eh le lf lg lh b">http://&lt;app name&gt;.azurewebsites.net</code></p><p id="cde0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将向您显示一个默认站点，如下所示:</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nu"><img src="../Images/679766e4c3a4643c9049624d2408d646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*irQl4nvIsOjsqbh_.png"/></div></div></figure><p id="5532" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这似乎行得通，太好了！好了，我们已经完成了大部分繁重的工作，现在是时候卷起袖子，打开指关节了，因为我们要让我们的网站变得生动起来。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff nv"><img src="../Images/96844d2d3b0c90c8f15010531d5363ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/1*ZmnH_QQQWKqELXLBluzexQ.gif"/></div></figure><h1 id="2dad" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">将代码推送到网站</h1><p id="7396" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">好了，最后一步是正确设置git deploy并推送代码，然后查看站点是否用您的代码进行了更新。我们通过键入以下命令设置了<code class="eh le lf lg lh b">git deploy</code>:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="bca2" class="mt lj hu lh b fv mu mv l mw mx">git remote add azure &lt;deploymentLocalGitUrl-from-create-step&gt;</span></pre><p id="d03b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在是时候输入代码了，所以我们只需输入:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="b4b6" class="mt lj hu lh b fv mu mv l mw mx">git push azure master</span></pre><p id="41e0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将提示您输入部署用户密码。只需键入它，您的部署正在进行中。</p><p id="74ac" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将需要一点时间，所以去喝一杯热饮料:)它应该最终转储出一长串日志，以下列结尾:</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nw"><img src="../Images/fb7efddfe3f890c7d1ebbd79e258c4e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WFwnNIgk3_tCPE1G.png"/></div></div></figure><p id="ac75" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这意味着您的应用已成功部署，现在您可以返回到您的应用URL，您应该会看到以下内容:</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/7af24380274e8f60b19d12093aa89b48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZVmoqpTpca0mK-Xq.png"/></div></div></figure><p id="70ef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，就是这么做的。现在，庆祝…:)</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff ny"><img src="../Images/38590a59d99cef34999297a2275eb288.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*UcSn9pjTjMm4vRuiCYVxvg.gif"/></div></figure><h1 id="4c3a" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">管理变更和重新部署</h1><p id="5ae6" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">这很容易，因为我们已经激活了git deploy。让我们执行以下操作:</p><ul class=""><li id="594c" class="kq kr hu je b jf jg jj jk jn ks jr kt jv ku jz kv kw kx ky dt translated">对文件进行一些更改</li><li id="09c0" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated">提交更改</li><li id="98d1" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated">将代码发送到我们的远程分支机构</li></ul><h1 id="832d" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">做一些改变</h1><p id="cfa2" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">让我们进入<code class="eh le lf lg lh b">application.py</code>并将其更改为:</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nz"><img src="../Images/593284807b5da9d27cd2429b48edd721.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eJQgObVAIT67iOEk.png"/></div></div></figure><h1 id="5312" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">提交更改</h1><p id="a770" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">我们像通常在git中一样提交:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="542e" class="mt lj hu lh b fv mu mv l mw mx">git commit -am "changed text"</span></pre><h1 id="f5d3" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">把密码推到我们的遥控器上</h1><p id="70d8" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">现在，让我们通过键入以下命令进入我们的远程分支:</p><pre class="ml mm mn mo fq mp lh mq mr aw ms dt"><span id="bf11" class="mt lj hu lh b fv mu mv l mw mx">git push azure master</span></pre><p id="688a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将生成一堆日志条目，并以<code class="eh le lf lg lh b">deployment successful</code>结束。让我们通过访问我们的应用程序url来验证这一点:</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff oa"><img src="../Images/8194b52c5f9dc51a5a38e609f6eedfda.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/0*0YRWRmr7AB_Uaonk.png"/></div></figure><p id="e28d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">那看起来不错:)</p><h1 id="e1d2" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">摘要</h1><p id="cbe7" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">我们已经了解了如何将应用部署到Azure，甚至更新和重新部署。一篇文章就这么多。让我们简单看一下我们为此采取的步骤:</p><ul class=""><li id="0760" class="kq kr hu je b jf jg jj jk jn ks jr kt jv ku jz kv kw kx ky dt translated"><strong class="je hv">下载了</strong>一个样本应用。显然，在真实的场景中，我们会创建自己的代码，而不是像在这种情况下使用Python和Flask的示例应用程序</li><li id="fc9c" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">创建了一个部署用户</strong>，这是我们的部署所需要的。这也促使我们选择部署类型，我们选择的是<code class="eh le lf lg lh b">git deployment</code>。</li><li id="cbf2" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">创建了资源组</strong>。这为我们的应用程序创建了一个逻辑组。这是一个组，我们可以重用其他事情，如添加数据库或应用程序可能需要存在的其他东西。</li><li id="023b" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">创建了服务计划</strong>。这意味着我们决定如何为此付费，以及我们希望应用程序在什么样的容器中运行。</li><li id="1581" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">创建了网站本身</strong>，或者说是一个我们的应用程序可以存在的占位符。</li><li id="e406" class="kq kr hu je b jf kz jj la jn lb jr lc jv ld jz kv kw kx ky dt translated"><strong class="je hv">使用git将我们的代码</strong>推送到新创建的网站。我们还展示了如何使用git来更新我们的网站和重新部署。</li></ul><p id="0ab4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这教会了我们使用Azure开发web应用程序的基础知识，并为我们未来的冒险做好了准备。敬请关注云中的更多乐趣:)</p><blockquote class="kb"><p id="9024" class="kc kd hu bd ke kf kg kh ki kj kk jz ek translated">最后，从这篇文章中你需要记住的几乎所有东西就是使用Git，然后推送，你已经成功地实现了云计算…</p></blockquote><figure class="oc od oe of og iv fe ff paragraph-image"><div class="fe ff ob"><img src="../Images/da3cda172fc395532a2d4932858e37a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*DjBoEGqmtEhn-GePnMb3fQ.gif"/></div></figure></div></div>    
</body>
</html>