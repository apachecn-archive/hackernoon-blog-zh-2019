<html>
<head>
<title>Practical Istio (A Dockercon 2019 Recap)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实用Istio(2019年Dockercon摘要)</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/practical-istio-a-dockercon-2019-recap-513c6bf6b96c?source=collection_archive---------23-----------------------#2019-06-03">https://medium.com/hackernoon/practical-istio-a-dockercon-2019-recap-513c6bf6b96c?source=collection_archive---------23-----------------------#2019-06-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk ir is it iu"><div class="bz el l di"><div class="iv iw l"/></div></figure></div><div class="ab cl ix iy hc iz" role="separator"><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc jd"/><span class="ja bw bk jb jc"/></div><div class="hn ho hp hq hr"><figure class="jf jg jh ji fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="fe ff je"><img src="../Images/3c163a82e347e564374409a0c778896c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*65bJSLM2_dD-muf5YEDm9w.png"/></div></div></figure><p id="48ee" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">凯尔苏斯的乔恩·克里斯滕森和克里斯·希克曼以及Secret Stache的里奇·斯塔茨回顾了扎克·布彻的DockerCon 2019年会议，题为，<em class="kn">实用Istio </em>。</p><p id="9b6f" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><strong class="jr hv">展览的一些亮点包括:</strong></p><ul class=""><li id="fd29" class="ko kp hu jr b js jt jw jx ka kq ke kr ki ks km kt ku kv kw dt translated">可伸缩性范围:需要服务网格或Istio的复杂程度</li><li id="6a66" class="ko kp hu jr b js kx jw ky ka kz ke la ki lb km kt ku kv kw dt translated">Istio:这一切都是为了什么，它对你的业务是否有意义</li><li id="d4b1" class="ko kp hu jr b js kx jw ky ka kz ke la ki lb km kt ku kv kw dt translated">服务网格是软件构件的通信骨干；通常用于微服务和容器架构</li><li id="af43" class="ko kp hu jr b js kx jw ky ka kz ke la ki lb km kt ku kv kw dt translated">服务网格提供流量管理、安全性和可观察性</li><li id="0c9c" class="ko kp hu jr b js kx jw ky ka kz ke la ki lb km kt ku kv kw dt translated">Istio:开源、平台无关项目的快速接受、采用和发展</li><li id="723a" class="ko kp hu jr b js kx jw ky ka kz ke la ki lb km kt ku kv kw dt translated">概念验证、评估、小规模与可行必要性以及生产实施之间的差异</li><li id="fd1d" class="ko kp hu jr b js kx jw ky ka kz ke la ki lb km kt ku kv kw dt translated">Istio建筑的五个主要组成部分:<br/>-特使<br/>-厨房<br/>-飞行员<br/>-混音器<br/>-城堡</li><li id="7d2c" class="ko kp hu jr b js kx jw ky ka kz ke la ki lb km kt ku kv kw dt translated">安全是一个多层蛋糕；重点放在路由和安全上，但并不意味着它是安全的</li><li id="0066" class="ko kp hu jr b js kx jw ky ka kz ke la ki lb km kt ku kv kw dt translated">遥测:你的系统中正在进行的任何种类的数据点</li><li id="bc64" class="ko kp hu jr b js kx jw ky ka kz ke la ki lb km kt ku kv kw dt translated">部署和集成Istio与应用程序以满足需求的演示</li><li id="4f24" class="ko kp hu jr b js kx jw ky ka kz ke la ki lb km kt ku kv kw dt translated">成功采用的特点:专注于单个棘手问题，创建冠军团队，投入时间学习，只公开配置的子集，并长期参与其中</li></ul><p id="f699" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><strong class="jr hv">链接和资源</strong></p><p id="85a6" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://www.docker.com/dockercon/2019-videos?watch=practical-istio" rel="noopener ugc nofollow" target="_blank">实用Istio </a></p><p id="c028" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://istio.io/" rel="noopener ugc nofollow" target="_blank"> Istio </a></p><p id="0104" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://www.docker.com/dockercon/" rel="noopener ugc nofollow" target="_blank"> DockerCon 2019 </a></p><p id="2c76" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://www.docker.com/dockercon/2019-videos?watch=just-what-is-a-service-mesh-and-if-i-get-one-will-it-make-ev" rel="noopener ugc nofollow" target="_blank">什么是“服务网格”，如果我得到一个，它会使一切正常吗？</a></p><p id="8a2a" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://aws.amazon.com/serverless/" rel="noopener ugc nofollow" target="_blank"> AWS无服务器</a></p><p id="638e" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://aws.amazon.com/app-mesh/" rel="noopener ugc nofollow" target="_blank"> AWS应用网格</a></p><p id="9f99" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">来自HashiCorp的领事</p><p id="371e" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://www.envoyproxy.io/" rel="noopener ugc nofollow" target="_blank">特使代理</a></p><p id="a70e" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a></p><p id="0c9b" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://www.sketch.com/" rel="noopener ugc nofollow" target="_blank">草图</a></p><p id="8a4c" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="http://gluecon.com/" rel="noopener ugc nofollow" target="_blank">胶水图标</a></p><p id="0180" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://kelsus.com/" rel="noopener ugc nofollow" target="_blank">凯尔苏斯</a></p><p id="e1a4" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae lc" href="https://www.secretstache.com/" rel="noopener ugc nofollow" target="_blank">秘密存储媒体</a></p><p id="6dd8" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><strong class="jr hv">转录</strong></p><p id="6209" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Rich:在Mobycast的第62集，我们回顾了DockerCon 2019年的另一场会议。这本书关注的是扎克·布彻的实用Istio。欢迎来到Mobycast，这是一个关于云原生开发、AWS和构建分布式系统的每周对话。让我们直接开始吧。</p><p id="3fb2" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:欢迎，克里斯和里奇。又是一集Mobycast。</p><p id="fb28" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">嘿，伙计们。回来真好。</p><p id="99bc" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:里奇，我们已经想你好几个星期了。你最近在忙什么？</p><p id="9ed2" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">里奇:我们正全力以赴地招聘人才。我们要从代理界招聘一名客户经理。他将是兼职，希望最终是全职。至少一个，但可能两个以上的开发者。对我来说这是一种疯狂的滚动。我不确定我在做什么。我只是觉得我在一件事和另一件事之间跳来跳去，只是想让一切都漂浮起来。这几周很有挑战性。</p><p id="1460" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:如果你在听，如果你想和里奇一起工作，我认为这是个好主意，尽管他说他不知道自己在做什么。你知道在哪里能找到我们。你只需登录mobycast.fm，就可以通过这种方式与我们取得联系。你呢，克里斯？我们上周谈过了。有新发现吗？</p><p id="4c56" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。在繁忙的春游之后，能在这里喘口气真好。在下一次旅行之前，我要在办公室呆几个星期，所以我只是坐下来做些事情。</p><p id="19db" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:很好。我们已经在一个节目中谈论了很多关于我如何回到开发中，用无服务器和AWS做这做那。现在，我已经从建立那个完美的概念转到基于那个完美的概念做一些线框图。我不得不告诉你，对我来说，我真的不知道一件事是否比另一件更难，但对我来说，线框化更难，因为我无法专注于它。我可以让自己放松10分钟，然后我发现自己在推特上。擅长线框制作并能连续工作八小时的人，哇。我印象深刻。但是很好玩。还是很好玩的。我强迫自己回到，我用的是Adobe XD，这很有趣。但我想我更喜欢素描，但我想用一些与Mac的死亡世界无关的东西。只是加入一点有争议的声明。</p><p id="92a5" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">里奇:我不会咬人的。</p><p id="8f2a" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Jon:上周，我们讨论了服务网格。我和克里斯争论了又争论，因为我只是想把这件事搞清楚。有时候我就是这样理解事情的，通过质疑它们的存在。本周我们将继续讨论服务网格的话题，并更具体地探讨Istio，上周我们已经暗示过了。我想，这来自于DockerCon 2019的另一段话。你介意说这是谁送的吗，克里斯？</p><p id="5103" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:是的。这是一个名为“实用Istio”的演讲，由Tetrate的创始工程师Zack Butcher主讲。</p><p id="426c" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:酷。这对我们来说是一种背离。正如我们上周提到的，我真的不认为我们会在Kelsus得到一个需要服务网格的项目。我甚至不知道我们会想要它，因为我们在较低的可伸缩性范围中有一个最佳位置。我们并不试图让我们正在做的项目拥有1000万、2000万、3000万或1亿用户。我认为你甚至可以不用Istio或者没有服务网。我们不仅仅是在复杂程度上构建我们此时需要的服务网络，我们也不打算这么做，因为这对我们来说很难扩大公司规模。</p><p id="d34b" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">尽管我们并不想这么做，但这是一个很多人都感兴趣的话题。我认为，就像开发人员一样，了解超高规模公司与什么竞争以及他们与什么合作真的很有趣。然后，我认为对于许多听众来说，他们可能会认为他们没有使用服务网格而错过了机会。这是DevOps之旅的一部分，包括微服务、基础架构、代码，以及最终的服务网格。先说说Istio到底是怎么回事。然后，人们可以自己决定这对他们的组织是否有意义。概述一下怎么样，克里斯？</p><p id="0ab9" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。因此，最好回顾一下上一集，看看什么是服务网格以及它的好处。再说一遍，TLDR，这是一个为你服务的通信备份计划。[…]它不一定是特定于容器或特定于微服务的。但在大多数情况下，它肯定与微服务架构和容器架构有关，因为它的价值随着系统中活动部件的数量而增加。</p><p id="e96e" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">同样，服务网格的三个主要方面是流量管理、安全性和可观察性。记住这些事情，我们现在讨论一个服务网格的实际实现，它是Istio。Istio是一个开源项目。它是平台不可知的。它首先出现在现场，0.1版本，如果你愿意，在2017年问世。整整两年前。</p><p id="d6ab" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:打断一下，克里斯。据宣布我将参加的GlueCon。亲爱的听众，当你在听这个的时候，我会在GlueCon。下周我会在GlueCon，但我在那里的时候你会听到它。向Gluecon大声呼喊，这是我最喜欢的会议之一。</p><p id="73c0" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:酷。一年后为0.1，次年为1.0。很快被社区接受。周围有很多[……]。很多人被这个吸引了。我们讨论了三个主要好处:流量管理、安全性，以及处理可观察性。所有这些都引起了微服务架构人员的共鸣。我认为这里有很多活动。很多人想为它做贡献。非常快速的增长。它是最佳的。Istion绝对是为Kubernetes优化的。随着它的发展，它变得越来越复杂。</p><p id="fa3d" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:是的。抱歉打扰了，克里斯。你刚刚提到的几件事让我印象深刻，因为当我们从这里开始说，“哦，我们可能不会这样做。”即使没有这些，您也可以构建支持许多许多用户的系统。有趣的是，它被采用的速度如此之快，而且与Kubernetes齐头并进。我不知道这是什么意思，但我猜这意味着，“嘿，有许多拥有非常复杂系统的大公司只是需要一些解决方案，因为他们只是让人们一次又一次地构建安全性、可观察性和他们架构的其他部分。他们已经厌倦了，他们需要一个地方来管理所有这些。”</p><p id="f772" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">这是一个更有争议的问题，开发运营团队和运营团队都有时间，他们渴望打造一些又酷又大的东西，他们正在这样做。他们就像，“嘿，这就是我们要去的地方，不管我们是否真的需要它。”也许这正在发生。我敢肯定，它至少发生了一点点，但我的天哪。像这样大的东西，很快就被采用了。思考其中的原因很有意思。</p><p id="2f9e" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:我们之前已经讨论过这个问题了。最终，开发人员通常会被闪亮的东西所吸引。一些新的和热门的东西肯定是要去看看，评估，并开始使用等等。</p><p id="d4c3" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">做概念验证、评估或小规模实施之类的事情，与做你需要的、已经投入生产并真正100%使用的事情，肯定是有区别的。Docker也是如此。我总是被这些DockerCon会议所震撼，看到很多Docker的新成员，这一比例总是很高。其次，在生产中使用它的人相对较少。这两者之间肯定有一点差距，可以说您正在使用它，摆弄它，甚至为它做出贡献，而实际上对它有非常可行的需求，并将其作为运行生产环境所需的一部分。</p><p id="f180" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:对。</p><p id="8cab" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Chris:再一次，我们已经讨论了服务网格的一般情况，因为你有更大的系统，它们几乎成为一种必需品。这并不一定意味着你不能从更小的系统中获得价值。有些人很可能从较小的系统中获得价值。只是他们已经决定投入大量的时间和精力来应对学习曲线。也许他们确实有一个独立的行动小组来帮忙，全职处理这件事。不同的子集。</p><p id="a4c9" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:酷。好吧。</p><p id="0206" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Chris:也许我会再次指出，Istio是服务网格的实现之一。还有其他的，比如AWS应用Mesh，还有HashiCorp的Consul，Linkerd。还有其他的实现，但是Istio是目前为止最[…]的一个，你会听说的。我认为其中很大一部分也是基于特使代理。我认为，特使代理是那里的第一个组件。我不认为这很具体。人们利用了这一点，我认为这是一种导致统治地位的重力意志，如果你愿意的话。有了这些，也许我们可以谈论一下Istio的组件以及它是如何构建的。</p><p id="4e82" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在扎克的演讲中，这是关于Istio的全部内容。你需要的实践知识，它是如何构建的，以及一些用例场景。其中，他谈到了Istio的五个主要组成部分。第一个是特使。我们已经谈过一点了。这是位于应用程序旁边的代理。这是边车部署。正如我们上周谈到的服务网格，你的软件不直接与其他软件对话。相反，它与代理交谈，然后代理与其他相应的代理交谈，然后代理将它转发到实际的软件上。这都是代理对代理的通信，这就是网格基本实现的地方。特使是代理人。这是Istio的关键组成部分。</p><p id="c38c" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">下一个组件是厨房。我想，这是你上周提到的“奇怪的航海名”我们将在这里讨论它。Galley是admin，用于配置控制点的UI工具。这基本上是管理UI。这是厨房飞行员用来配置边车代理。它负责通过galley传播您系统中定义的配置，然后将其发送到您系统中的所有代理。那是飞行员。</p><p id="e217" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">第四个组件是混合器。“混合器”负责执行政策和捕捉遥测数据。当您的mini envoy代理收到请求时，它将与mixer协商进行策略检查，以验证是否允许该请求发送到它所代理的实际软件上。那是搅拌机。</p><p id="845b" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">第五个叫做城堡。Citadel基本上负责安全。它在做像分配X.509身份这样的事情。它负责实现安全通信，特别是建立在SPIFFE标准之上。这是Istio部署的五个主要组成部分。再说一遍，一点也不轻便。这只是一个复杂的系统。</p><p id="4b00" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:是的。很有意思。关于所有这些组件的一种评论是，看起来它们中的一些都是关于认证、授权和安全性的。然而，众所周知，如果您正在运行Kubernetes，您最好确保Kubernetes正在运行的工作负载，如果有一些交叉数据或一些数据，这并不是一件可怕的事情。基本上，把你的客户分开。不要将两个不允许查看的不同客户或两个不允许相互了解的不同工作负载放在同一个Kubernetes之外。从这个角度来看，这对我来说很有趣。这就像围绕安全性做了很多工作，但运行它的底层东西并不真正可信。</p><p id="06a3" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。像这样的东西在运行容器时不能处理放置策略之类的东西。</p><p id="0092" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:是的。我想现在的共识是，如果你在运行容器，你在运行所有的容器，它们可以互相交流，它们都在同一个网络上，它们应该，我不知道该怎么说，工作负载应该是互补的，但这就是它们应该的。它们不应该是工作负载，此时我不想在与微软相同的Kubernetes集群上运行苹果的工作负载。</p><p id="905b" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。这肯定会涉及到安全性、容器以及所有的工作。当然，隔离容器的工作负载，将它们分成不同的类别。您可能有一些非常敏感的应用程序，如安全至上，它们不需要访问开放的互联网。您可以在集群的某个子集上运行它们。您可能不会像前端应用程序那样通过导入与外界交流，将它们放在一起运行。</p><p id="09e5" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:是的。我想，就像我说的那样，在路由和安全性方面做了很多工作，但这并不意味着它是安全的。这并不意味着它就像，“哦，是啊。这就像一个平台即服务。只要你在上面，就去跑一跑。”</p><p id="a0f9" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。这是一个很好的观点。毫无疑问，安全性是一个多层蛋糕。这更多是为了基础设施。通信层面确保你有加密的通信渠道，你可以用密码验证玩家的身份，但你有很多层。只是处理，谁有很多话要跟谁说，您有多租户问题吗工作负载的放置。我们讨论了[…]就像CDEs、操作系统加固和其他一切。这绝对是其中的一部分。当然，这只是一件作品。</p><p id="b346" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:对不起。提醒我一下CDEs代表什么？</p><p id="719d" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:指的是漏洞列表。我忘了这个缩写到底代表什么。CDE是指在软件产品中发现公开披露的安全违规或漏洞。那里有CBE数据库。"哦，在Linux的Fedora发行版的这个特定包中可以找到一些东西."或者，“TLS 1.0有问题。”这种事有CDE奖。</p><p id="ab2b" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:酷。</p><p id="e6c5" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:酷。在浏览了Istio的主要组件和架构之后，Zack简单介绍了一下整个系统的工作原理。我们已经触及到了这一点，但只是为了让它更清楚一点。envoy代理负责拦截这些发往其代理的软件的请求，它通过IPtables或BPF配置来完成这一任务，玩弄名称空间。一旦它截获请求，它将查看该请求，并确定新的目的地应该是什么。那将来自于一张由飞行员推动的写字台。这就像是负责将配置传播到侧车的组件。</p><p id="01a4" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">接收代理将通过调用mixer来查询系统中定义的策略。如果策略检查通过，它会将其发送到目标应用程序。作为其中的一部分，这两个代理将向mixer报告遥测数据。现在，我们可以洞察呼叫者和被呼叫者。从他们那里获取信息。现在的默认行为实际上只是自由端遥测，但您可以对其进行配置，因此您可以看到两端。</p><p id="eb9b" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:我想我和我的听众会从告诉我们遥测术的含义中受益，因为你知道，这是一个由聪明人在会议上谈论的词，从来没有人问它是什么意思。</p><p id="0940" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:它只是关于你系统中正在发生的事情的数据。遥测只是任何种类的数据点。在这个特殊的例子中，遥测和那些例子仅仅意味着这样一个事实，“哦，这个特殊的呼叫是在这两个组件之间进行的。”有源头，就有目的地。那里会有一个关于花了多长时间的信息。有关于成功与否的信息。所有的信息，只是遥测。这是一连串的事件。我认为它来自，甚至更常见的像卫星通讯。你从卫星上收到了遥测信号。这只是一个数据输入。数据包传过来，你就能知道发生了什么。</p><p id="7906" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:这可能就是这个词令人生畏的地方。这很复杂，告诉我你正在通过某种长馈给来定位天空。那是困难的事情。就像，不管你有什么数据，让我发给你。那是遥测技术。我只是在想，这有点可笑，就理解卫星定位而言，这是一个如此核心的概念，在计算机科学世界里，这就像伐木一样。</p><p id="c327" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。遥测可能是部分记录。它可以是度量标准。可能是一切。这可能是我们使用它的原因之一，因为它是一个总括。</p><p id="d131" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:我想这也有点回到我们刚刚在这几集里接触到的一些东西，只是不断回到这是一个非常棒的计算机编程。它使用了像遥测和控制播放这样的硬核花哨词汇。直到有人说，“哦，好吧。这只是一件简单的事情。”会使关于它的谈话变得不透明，这对于某些人来说是一块磁铁。“让我来解释一下。让我理解那不透明的东西，这样我就能说同样的语言。”</p><p id="2e52" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。这有一整套行话。它在不断发展。比如单一玻璃。我们上次谈到过，我以前怎么没听过棕色地带这个词。它在不断发展。有人想出了这个名字，他们就说话，或者写博客，或者写论文，它就开始流行，Twitter世界接受并使用它或诸如此类的东西。这只是你字典里必须有的东西。不是看，[…]，跑；[……]行话的类型。</p><p id="4ba3" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:这一点在扎克身上一点也没有表现出来，因为我认为他不仅理解这一点，还做了这个演讲，这是在做一件好事。但是帮助人们克服这个中心，比如解释Istio是如何工作的，对于已经知道Istio是如何工作的人来说是一种挖掘工作。我们对此表示感谢。</p><p id="ba3f" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。顺便说一下，我认为这个演讲也是一个黑带级别的演讲。当然，不是介绍。归根结底，这就是Istio的工作方式。是特使代理做了大部分工作。他们正在咨询来自pilot的配置，以确定他们应该如何进行路由等等。调音台负责确保遵守允许什么与什么对话的规则。更多的是在授权方面。Citadel用于系统中的认证[]。</p><p id="44e5" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:非常酷。</p><p id="7ad7" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Chris:正如我们上次谈到的，旋转Kubernetes集群并在其上放置Istio。我们在之前的演讲中已经说过了。大概有59个容器被旋转起来，只是为了让Istio运行起来。相当复杂的系统。</p><p id="8658" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:是的。</p><p id="e0b5" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">嘿，你好。这是丰富的。请原谅我的突然打断。我们最近突破了30，000名听众的内部里程碑。我想花点时间感谢你的支持。我还希望鼓励你去iTunes给我们留下评论。积极的反馈和建设性的批评对我们来说都非常重要。告诉我们进展如何，我们将保证每周发布新的剧集。好吧，我们继续吧。</p><p id="9ca2" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:在讨论了组件及其工作原理之后，我们进行了几次演示。节奏相当快，只是在笔记本电脑上打字，并展示你可以用Istio做什么。这些演示演示了两件主要的事情。</p><p id="9379" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">第一个演示是，“嘿，我有两个集群。现在，我想在这些群集之间进行负载平衡，并且有选择地将所有流量路由到一个群集，而不是两个群集，反之亦然。”你可以通过Istio和Istio支持的核心DNS扩展来实现。所有这些都是在没有VPN或配对网络的情况下完成的。它实际上都使用了公共IP地址。每个集群都有公共IP地址作为出口点。</p><p id="66ae" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:我在想，你可能是指入口？</p><p id="cad2" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对，实际上是入口。也有相应的出口代理。入口意味着入站流量。出口基本上是向外。对于这两个群集，对于入站流量，它们都有一个公共IP地址，这是您与特定群集对话的方式。之后，服务网格和特使管理其他一切。您可以通过这些公共IP地址在互联网上获得群集到群集的流量、跨群集的流量，这很好，因为现在您不必担心滑动范围冲突等问题，除非您在后端系统中构建这种情况。</p><p id="42ce" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">这是第一次演示。同样，您真正需要做的只是进入系统，并根据系统中的命名更改一些配置。</p><p id="0f29" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Jon:我意识到，滑块范围冲突，这意味着如果你有两个不同的集群，并且说每个集群中都有一台计算机，它们的IP地址都在0-5之间，这很好。如果你真的将这两个网络连接在一起，通常不会有问题，那么你就会有IP地址冲突。但是如果你把Istio放在他们中间，听起来没问题。</p><p id="336e" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:是的，的确如此。第二个演示展示了你如何使用类似Istio的东西来帮助你完成一个普通的任务，用一个立面类型的建筑来分解一个整体。基本上，这个想法是，你将通过把功能分割成新的微服务来分解你的整体。你可以通过这个路由外观来实现，它现在可以托管或基于路径的路由，这样当请求进来时，调用者不需要知道，“哦，它是整体服务还是微服务A、B或C？”所有这些都是路由智能的一部分。它可以处理。</p><p id="92ff" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">这就是这个演示的基础。这与AWS应用程序负载平衡器提供的基于主机和路径的路由非常相似。即使在功能上不完全相同，也非常相似。但这只是像Istio这样的东西能给你提供的功能之一。相当强大。</p><p id="bdb6" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Jon:他也一直在说，通过这次演讲，你得到的许多功能都是我们依赖AWS进行许多工作的功能，如ALB，路径基础平衡。在某种程度上，它看起来像是Istio，有点像超级智能负载平衡器。AWS也在构建非常智能的负载平衡器。如果你不需要AWS，它可以了解你的整个系统，知道如何根据非常复杂的规则安排事情，然后你可以使用AWS，这会让你走得很远。但是，如果你不能完全使用AWS，如果你处于紧急状态，或者如果你跨云，或者只是有一个首席信息官不允许你做一些会导致你被锁定的事情，那么Istio开始变得非常好。</p><p id="dbba" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Chris:请记住，这些服务网格非常全面，其功能可以分为三类——流量管理、安全性和可见性。交通管理，如果这真的是你使用它的目的，你可以选择替代方案。无论是AWS的负载平衡器，那都很好，这可能是你所需要的。</p><p id="9975" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:[……]。</p><p id="8e13" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:几乎所有这些东西都有类比和类似的服务，你可以去使用。你可以通过选择其他服务来构建你自己的等价服务网。</p><p id="a7ff" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:但是你选择的其他人，我觉得他们更喜欢这个。这是完全开源的，涵盖了你能想到的每一件事情，并且可以在任何地方工作——任何你能让电脑互相交流的地方。我知道这很诱人。</p><p id="0ede" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。外面是一个完全不同的世界。有些人肯定把这作为他们需求的一部分。它们需要在开源软件上运行，并且需要能够在各种公共云提供商以及私有云中运行，如onprem。如果像Kubernetes和Istio这样的东西最终几乎成为[……]那是他们必须要做的。</p><p id="a0bf" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:是的。这次谈话也让我想起了我们的另一次谈话，关于AWS接手大型开源项目并运行最好的托管服务。Istio的本质是，我不记得你在开始时用了什么词，但它本质上就像是整个部署的控制器，是用来管理整个部署的东西。AWS这样做有点对立，因为这就是他们，他们为什么要这样做？有点像，“哦，不要用我们的任何工具。用这个。”那根本没有任何意义。AWS也有自己的服务网格。Istio看起来确实是一个开源项目。如果你没有得到AWS的治疗，这可能有点好的定位。</p><p id="7014" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。AWS有App Mesh，这基本上就是他们提供的特使代理。这是他们的集装箱系统ECS，EKS，等等。没有飞行员。没有城堡式的东西。这实际上是将它用于通信控制平面，并提供服务对服务。沟通实际上关注的是服务发现之类的事情。当你有很多容器时，服务发现实际上是AWS中一个非常大的痛点。他们在这一领域有几项不同的计划。这是他们为人们提供的服务之一。</p><p id="d928" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:酷。你想通过总结成功的网状适配器的特点？</p><p id="ef57" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:是的。在给出这两个演示之后，这种结论指出了成功采用服务网格的人的特征。考虑到扎克共事过的人，这是他们看到的共性。他提出的第一点是，他们只关注一个痛点。</p><p id="83e2" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Jon:不要一开始就试图挤压SEO的所有功能。</p><p id="d18c" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:没错。这是一个非常庞大复杂的系统。挑一个最疼的东西，用网格来解决这个问题。如果是服务发现，那就是你的痛点，然后真正关注它。如果是“嘿，我真的想在我所有的容器之间有相互的TLS通信。”专注于此。不要从第一天开始就试图全盘接受。这是第一个提示。</p><p id="1261" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">第二个是拥有一个小团队，他们是组织中服务网络的冠军。有一些小团队。他们有责任成为服务网络的专家。他们是倡导者。他们也应该是正在经历痛苦的人。在你的组织中有一群冠军。</p><p id="3063" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">第三个建议是确保你在学习曲线上投入时间。这里有很多。很容易只是编造一些东西，而不真正理解发生了什么。你肯定需要投入时间去学习它。只要对它做出承诺。</p><p id="258e" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">第四个技巧是只向使用它的开发人员公开一小部分配置。我们之前已经讨论过这一点，服务网格是反开发的。它们太复杂了。配置这么多。这里面有一个很大的学习曲线，你需要专门的团队来使用和管理这些东西。这是一种分裂，开发和运营。你真的有一个专门的运营团队负责此事。开发人员只是不能花时间和投资去了解这一点。Zach在这里的观点是不要用服务网格来压倒你的开发人员。相反，air倾向于给他们更少的信息，一次一勺地给他们，这样开发者的反对就更少了。</p><p id="8afa" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">他举了一个例子，如果您只是想解决系统中的流量管理，而这正是您使用网格的目的，那么只需给开发人员一个文件，告诉他们需要在其中更改虚拟服务配置，以影响他们正在构建的应用程序的流量管理。他们对服务网格的看法是，“哦，有这个配置文件，这个gamma文件，我进去，这是我放服务条目的地方，”所以这对他们来说并不可怕，而且是一个很大的学习曲线。</p><p id="50de" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">这里的最后一个特点是，如果你是长期投资的话。一旦你做到这一点，这是新的服务网格，你开始把它纳入你的整体系统架构。这是一个相当大的组成部分。第一，将它集成到您的系统中并不容易，反过来，将它取出来也不容易。你会意识到这是一个长期的投资，你将在你的系统。</p><p id="baeb" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:是的。这是Istio锁定。</p><p id="3f70" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。肯定是服务网锁定。是啊，很可能也是Istio锁定。就像Kubernetes这样的系统一样，如果你使用Kubernetes来运行你的容器，就很难切换到其他系统。</p><p id="fb88" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:是的。我就想，真的吗？想象一下你有Kubernetes那种你的过度建造，你只有几个容器。然后，你在Kubernetes跑步，那些都在Docker。如果它们不是那么复杂，但是你只是在Kubernetes中运行它们，那么切换它们可能并不困难，比如说，Istio，但是是的。当然，如果你有一个大系统。</p><p id="8796" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。我们可以就此多谈一些。这取决于人们习惯了什么。我相信[…]做起来非常简单明了，但Kubernetes世界的某个人是ike，“等等，什么是规模组的发布配置？这些是怎么联系在一起的？什么是任务定义文件？”这完全是另一套行话和做事方式。即使你有一个简单的系统，它仍然可能是大量的工作。</p><p id="e3fe" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">乔恩:是的。非常感谢。在这一点上，酷的事情是，我们所有的听众都希望有同样的事情。这就像，“虽然我可能不会在未来或不久的将来成为一个服务网络，但随着他们的进步和新事物的发生，我不会被冷落。我会说一点点这种语言。”那很酷。谢谢你。</p><p id="ce63" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:对。</p><p id="4a9e" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Jon:也谢谢Zach Butcher在DockerCon的演讲。好吧。克里斯，瑞奇，我们下周再见。</p><p id="8707" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">克里斯:好的，再见。</p><p id="18d8" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">亲爱的听众，你坚持到了最后。感谢您抽出时间，并邀请您继续与我们在线交流。这一集，以及显示笔记和其他宝贵的资源可在mobycast.fm/62.如果你有任何问题或额外的见解，我们鼓励你给我们留下评论。谢谢你，我们下周再见。</p></div></div>    
</body>
</html>