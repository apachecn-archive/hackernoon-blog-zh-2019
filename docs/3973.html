<html>
<head>
<title>A Crypto-Powered Alarm You Can’t Snooze!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个你不能打盹的加密闹钟！</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-crypto-powered-alarm-you-cant-snooze-a22240b527c9#2019-07-03">https://medium.com/hackernoon/a-crypto-powered-alarm-you-cant-snooze-a22240b527c9#2019-07-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><a href="https://youtu.be/fNesUejfYeQ"><div class="fe ff ir"><img src="../Images/f04016296accdaae7ed33d424c3f77ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*MewFXNsKUJ6VDC3RKVWWRw.png"/></div></a></figure><figure class="iz ja jb jc fq iv fe ff paragraph-image"><div class="fe ff iy"><img src="../Images/5245ecf392683ce349874cdc569b6c94.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*fG3kb6iY7uEzEdNpH85l-w.png"/></div></figure><p id="75c6" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">如果这看起来像你典型的闹钟应用程序屏幕，那么你需要一些帮助来唤醒！</p><p id="e646" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">对于我们的日常斗争，制造商社区从来没有用完替代的硬件解决方案，这些解决方案是有趣的、可调整的和具有挑战性的。</p><p id="1fc7" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">有些人试图这样醒来:</p><figure class="iz ja jb jc fq iv fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/26e45e78c4ca49c784d6bd564b6940a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/0*OLuA90YumtWhpP7y"/></div></figure><p id="202a" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">然而，对睡眠动力学和“如何被闹钟叫醒”背后的科学的研究可以致力于复制密码驱动的闹钟，这种闹钟会迫使你醒来，否则你最终会失去一笔财富:d。它也可以成为摆弄以太坊和接触一些硬件和区块链概念的良好入门。</p><figure class="iz ja jb jc fq iv"><div class="bz el l di"><div class="kc kd l"/></div></figure><p id="fee0" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">该报警器使用<a class="ae ke" href="https://elk.cc/?utm_source=alarm&amp;utm_medium=medium" rel="noopener ugc nofollow" target="_blank"> Elk </a>区块链开发板和一个声音传感器。它是声音激活的，这意味着你可以马上用它来启动你的个人闹钟，没有太多的麻烦或调整。当声音传感器检测到您的闹钟响起时，它会在一段时间内开始计数(您在代码中设置)，在这段时间内，您必须起床，并通过您选择的硬件操作或简单地按下按钮来关闭它。</p><p id="59dd" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">发生的情况是，最初每次警报响起时，一定量的乙醚被锁定在智能合约中。智能合约仅根据您的硬件状态进行控制。您是否在试验的时间框架内完成了硬件操作，或者未能完成；董事会一直在倒计时。如果你在试验结束前做了，那么你不会失去你从你的帐户锁定的指定乙醚，它会撤回到你的帐户。如果没有，你就完全失去了它，它会被送到你选择的任何一个慈善机构的地址。</p><p id="a0c9" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">使用的智能合约功能有:</strong></p><figure class="iz ja jb jc fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fe ff kf"><img src="../Images/5193247fabbc2527e1715ac0a8346a78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FkRFUM1X1T77Y1h1Mh1Tjg.png"/></div></div></figure><p id="054a" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">链接到代码片段:<a class="ae ke" href="https://pastebin.com/R585FCsp" rel="noopener ugc nofollow" target="_blank">https://pastebin.com/R585FCsp</a></p><p id="0ccb" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">典型的 Arduino C 用于支持 Elk SDK 的 Platform.io IDE 上警报的其余逻辑。声音传感器与一个中断引脚相关联，一旦它发出声音检测信号(来自传感器的低信号)，中断就会发生，并启动 millis()计数器进行试用，并使用</p><pre class="iz ja jb jc fq kk kl km kn aw ko dt"><span id="6309" class="kp kq hu kl b fv kr ks l kt ku">function lockMyMoney(address _alarmAddress) public payable{</span><span id="87ee" class="kp kq hu kl b fv kv ks l kt ku">userComittedMoney[msg.sender] = msg.value;</span><span id="c4b6" class="kp kq hu kl b fv kv ks l kt ku">alarmAddress[msg.sender] = _alarmAddress;</span></pre><p id="8355" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">如果您按下按钮使闹铃静音，则会出现另一个中断，并将 Win 标志设置为 true，并收回您的钱</p><pre class="iz ja jb jc fq kk kl km kn aw ko dt"><span id="c9b1" class="kp kq hu kl b fv kr ks l kt ku">function withdrawMoney(address _alarmAddress) public {</span><span id="93ef" class="kp kq hu kl b fv kv ks l kt ku">require(alarmAddress[msg.sender] == _alarmAddress &amp;&amp; userComittedMoney[msg.sender]&gt;0);</span><span id="bc10" class="kp kq hu kl b fv kv ks l kt ku">msg.sender.transfer(userComittedMoney[msg.sender]);</span></pre><p id="4683" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">如果你输了，钱会转到预定的慈善地址</p><pre class="iz ja jb jc fq kk kl km kn aw ko dt"><span id="4d5e" class="kp kq hu kl b fv kr ks l kt ku">function spend(address _alarmAddress, uint _amount) public{</span><span id="3523" class="kp kq hu kl b fv kv ks l kt ku">require(userComittedMoney[msg.sender] &gt;= _amount &amp;&amp; alarmAddress[msg.sender]== _alarmAddress);</span><span id="018d" class="kp kq hu kl b fv kv ks l kt ku">charityAddress.transfer(_amount);</span><span id="1d8f" class="kp kq hu kl b fv kv ks l kt ku">userComittedMoney[msg.sender]-=_amount;</span></pre><p id="54ea" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">处理动作的代码如下。</p><pre class="iz ja jb jc fq kk kl km kn aw ko dt"><span id="d393" class="kp kq hu kl b fv kr ks l kt ku">ContractMethodParam param1("AlarmAddress");<br/>ContractMethodParam param2(AMOUNT_OF_MONEY_IN_GWEI);</span><span id="2e92" class="kp kq hu kl b fv kv ks l kt ku">void loop(){</span><span id="4d38" class="kp kq hu kl b fv kv ks l kt ku">if(win) //winning condition</span><span id="225b" class="kp kq hu kl b fv kv ks l kt ku">{</span><span id="c23e" class="kp kq hu kl b fv kv ks l kt ku">win = false;</span><span id="d7e6" class="kp kq hu kl b fv kv ks l kt ku">Ethereum.sendContractMethodCallTransaction("m/44'/60'/0'/0/0",CONTRACT_ADDRESS,AMOUNT_OF_MONEY_IN_GWEI,50000,20,"withdrawMoney(address)",&amp;param1);</span><span id="ac27" class="kp kq hu kl b fv kv ks l kt ku">display.clearDisplay();</span><span id="52b3" class="kp kq hu kl b fv kv ks l kt ku">display.fillScreen(BLACK);</span><span id="4e56" class="kp kq hu kl b fv kv ks l kt ku">display.setCursor(37,7);</span><span id="e264" class="kp kq hu kl b fv kv ks l kt ku">display.println(“WINNER!”);</span><span id="c21e" class="kp kq hu kl b fv kv ks l kt ku">display.setCursor(20,30);</span><span id="35a3" class="kp kq hu kl b fv kv ks l kt ku">display.println(“You’ve Earned”);</span><span id="3ded" class="kp kq hu kl b fv kv ks l kt ku">display.setCursor(20,40);</span><span id="42e5" class="kp kq hu kl b fv kv ks l kt ku">display.println(“0.016 ETH”);</span><span id="eaba" class="kp kq hu kl b fv kv ks l kt ku">display.display();</span><span id="b8f4" class="kp kq hu kl b fv kv ks l kt ku">for(int i = 0; i&lt;=3 ; i++)</span><span id="fda7" class="kp kq hu kl b fv kv ks l kt ku">analogWrite(LedPin, 90);</span><span id="6420" class="kp kq hu kl b fv kv ks l kt ku">delay(500);</span><span id="2674" class="kp kq hu kl b fv kv ks l kt ku">analogWrite(LedPin, 0);</span><span id="b8e4" class="kp kq hu kl b fv kv ks l kt ku">delay(500);</span><span id="66d0" class="kp kq hu kl b fv kv ks l kt ku">}</span><span id="259b" class="kp kq hu kl b fv kv ks l kt ku">if (!win &amp;&amp; millis()-timer &gt;= trial ) //losing condition</span><span id="1093" class="kp kq hu kl b fv kv ks l kt ku">{</span><span id="cdc3" class="kp kq hu kl b fv kv ks l kt ku">//You LOSING money!</span><span id="8902" class="kp kq hu kl b fv kv ks l kt ku">Ethereum.sendContractMethodCallTransaction("m/44'/60'/0'/0/0",CONTRACT_ADDRESS,AMOUNT_OF_MONEY_IN_GWEI,50000,20,"spend(address,uint)",&amp;param1,&amp;param2);</span><span id="f60b" class="kp kq hu kl b fv kv ks l kt ku">display.clearDisplay();</span><span id="1bee" class="kp kq hu kl b fv kv ks l kt ku">display.fillScreen(BLACK);</span><span id="ac59" class="kp kq hu kl b fv kv ks l kt ku">display.setCursor(35,7);</span><span id="3342" class="kp kq hu kl b fv kv ks l kt ku">display.println(“SLEEPY HEAD!”);</span><span id="a8ce" class="kp kq hu kl b fv kv ks l kt ku">display.setCursor(33,30);</span><span id="7752" class="kp kq hu kl b fv kv ks l kt ku">display.println(“You’ve lost”);</span><span id="dc1a" class="kp kq hu kl b fv kv ks l kt ku">display.setCursor(33,40);</span><span id="326b" class="kp kq hu kl b fv kv ks l kt ku">display.println(“0.016 ETH”);</span><span id="9249" class="kp kq hu kl b fv kv ks l kt ku">delay(3000);</span><span id="597f" class="kp kq hu kl b fv kv ks l kt ku">display.clearDisplay();</span><span id="9f81" class="kp kq hu kl b fv kv ks l kt ku">display.fillScreen(BLACK);</span><span id="79f2" class="kp kq hu kl b fv kv ks l kt ku">display.display();</span><span id="042f" class="kp kq hu kl b fv kv ks l kt ku">}</span></pre><p id="768b" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">最后，在 Fusion 360 上制作了一个简单而时尚的外壳，以一种可展示的形式包含所有组件。</p><figure class="iz ja jb jc fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fe ff kw"><img src="../Images/e7a9acd775170c2728e6ee454520a8d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*00scl0nrZNo2JNns3bK2fw.png"/></div></div></figure><p id="686a" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">这个闹钟让你别无选择，只能要么按时醒来，要么做一个慷慨的人，在这两种情况下，你都做了一些好事，不管是对你自己还是对这个世界。</p><p id="d547" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">有了 Elk，构建区块链互联设备变得简单了。麋鹿将很快在 Kickstarter 上发布，一旦它发布，请在这里注册<strong class="jf hv"/><a class="ae ke" href="https://elk.cc/?utm_source=alarm&amp;utm_medium=medium" rel="noopener ugc nofollow" target="_blank"><strong class="jf hv"/></a><strong class="jf hv">。</strong></p><figure class="iz ja jb jc fq iv"><div class="bz el l di"><div class="kx kd l"/></div></figure></div></div>    
</body>
</html>