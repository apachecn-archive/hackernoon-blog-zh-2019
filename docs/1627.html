<html>
<head>
<title>Manage table resources in serverless</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在无服务器中管理表资源</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/manage-table-resources-in-serverless-df429f2fa58a?source=collection_archive---------12-----------------------#2019-03-08">https://medium.com/hackernoon/manage-table-resources-in-serverless-df429f2fa58a?source=collection_archive---------12-----------------------#2019-03-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/b8a0ddfd78f856a66196747de9975e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d5lcGhJ0YDxFaKZXDUgmtg.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Photo by <a class="ae ih" href="https://unsplash.com/@blakeparkinson" rel="noopener ugc nofollow" target="_blank">Blake Parkinson</a> on <a class="ae ih" href="https://unsplash.com/photos/3IX-Tz_0ZN0" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="e7f5" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">无服务器是管理无服务器基础设施的绝佳平台。它大大减少了设置服务和定义功能的样板代码。它甚至允许为不受开箱即用支持的东西定义特定于平台的资源。问题是服务提供商可能需要复杂的模板来支持基本的基础设施。例如，AWS CloudFormation要求在单个表的两个不同字段下定义DynamoDB键。因此，我创建了一个插件来简化表格定义，减少样板代码，并拥有智能默认值:<code class="eh kf kg kh ki b"><a class="ae ih" href="https://github.com/chris-feist/serverless-plugin-tables" rel="noopener ugc nofollow" target="_blank">serverless-plugin-tables</a></code>。</p><h1 id="2647" class="kj kk ik bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">让我们看一个例子</h1><p id="6ffe" class="pw-post-body-paragraph jh ji ik jj b jk lh jm jn jo li jq jr js lj ju jv jw lk jy jz ka ll kc kd ke hn dt translated">下面是在<a class="ae ih" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.CoreComponents.html" rel="noopener ugc nofollow" target="_blank"> DynamoDB文档</a>中描述的表的两个示例<code class="eh kf kg kh ki b">servlerless.yml</code>定义。第一个例子是使用<a class="ae ih" href="https://serverless.com/framework/docs/providers/aws/guide/resources#configuration" rel="noopener ugc nofollow" target="_blank">标准云形成模板</a>，第二个例子是使用<code class="eh kf kg kh ki b">serverless-plugin-tables</code>。</p><figure class="lm ln lo lp fq hw"><div class="bz el l di"><div class="lq lr l"/></div></figure><figure class="lm ln lo lp fq hw"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="2389" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如您所见，<code class="eh kf kg kh ki b">serverless-plugin-tables</code>的实现显著减少了样板文件(1/3的代码行)。它也有相同的默认值，使用<a class="ae ih" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ReadWriteCapacityMode.html#HowItWorks.OnDemand" rel="noopener ugc nofollow" target="_blank">按需计费模式</a>和字符串作为默认数据类型。尽管定义如此简单，但它是完全可定制的，在发布时支持每个云形成选项。参见自述文件中的完整<a class="ae ih" href="https://github.com/chris-feist/serverless-plugin-tables#aws-example" rel="noopener ugc nofollow" target="_blank">示例。</a></p><h1 id="27d2" class="kj kk ik bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">听起来很棒！还是并入吧！</h1><p id="6362" class="pw-post-body-paragraph jh ji ik jj b jk lh jm jn jo li jq jr js lj ju jv jw lk jy jz ka ll kc kd ke hn dt translated">首先，将依赖项添加到现有的无服务器项目中:</p><p id="d5e6" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh kf kg kh ki b">yarn add -D serverless-plugin-tables</code></p><p id="235f" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在将插件添加到您的服务文件中:</p><pre class="lm ln lo lp fq ls ki lt lu aw lv dt"><span id="e056" class="lw kk ik ki b fv lx ly l lz ma"># serverless.yml</span><span id="f709" class="lw kk ik ki b fv mb ly l lz ma">plugins:<br/>  - serverless-plugin-tables</span></pre><p id="f5c3" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在定义“资源”部分(如果还没有的话)，添加一个<code class="eh kf kg kh ki b">tables</code>属性，并开始创建表🤩</p><pre class="lm ln lo lp fq ls ki lt lu aw lv dt"><span id="34e4" class="lw kk ik ki b fv lx ly l lz ma"># serverless.yml</span><span id="5493" class="lw kk ik ki b fv mb ly l lz ma">resources:<br/>  tables:<br/>    # Start defining tables here</span></pre><p id="8afb" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">下面是另一个用户表格示例，配置稍微多一点:</p><figure class="lm ln lo lp fq hw"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="2408" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">要了解更多配置选项，请查看GitHub自述文件，它描述了每个选项以及AWS文档的链接。</p><h2 id="d182" class="lw kk ik bd kl mc md me kp mf mg mh kt js mi mj kx jw mk ml lb ka mm mn lf mo dt translated">其他提供商和数据库呢？</h2><p id="e7c4" class="pw-post-body-paragraph jh ji ik jj b jk lh jm jn jo li jq jr js lj ju jv jw lk jy jz ka ll kc kd ke hn dt translated">我通过为AWS DynamoDB实现它来开始这个项目。然而，我将它设计成可以轻松扩展以支持其他服务提供商和数据库平台。因此，如果您希望支持另一个平台，请在此发表评论或在<a class="ae ih" href="https://github.com/chris-feist/serverless-plugin-tables" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上提交问题。</p></div><div class="ab cl mp mq hc mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="hn ho hp hq hr"><p id="7513" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我知道你的想法。请在下面留下评论，给我一些掌声。你按拍手按钮的时间越长，我得到的就越多👏👏👏</p></div></div>    
</body>
</html>