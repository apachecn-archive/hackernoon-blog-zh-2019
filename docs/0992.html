<html>
<head>
<title>3 Common Mistakes To Avoid When Building Your First Shopify App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建第一个Shopify应用程序时要避免的3个常见错误</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/3-common-mistakes-to-avoid-when-building-your-first-shopify-app-cc9006f06009?source=collection_archive---------3-----------------------#2019-02-09">https://medium.com/hackernoon/3-common-mistakes-to-avoid-when-building-your-first-shopify-app-cc9006f06009?source=collection_archive---------3-----------------------#2019-02-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/8d7c879cc197a10095a6e32328585146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*qLp1B4THul_pr7Fu.jpg"/></div></figure><p id="fc0c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">Shopify从根本上改变了我们对电子商务和建立在线业务的看法，现在你可以创建一个漂亮的电子商务网站，列出产品，并在不到一天的时间内开始赚钱，因为Shopify，在这个世界上，Shopify的市值超过180亿美元，<a class="ae jw" href="https://expandedramblings.com/index.php/shopify-statistics/" rel="noopener ugc nofollow" target="_blank">超过60万商家</a>，Shopify的合作伙伴和开发人员<a class="ae jw" href="https://www.shopify.com/partners" rel="noopener ugc nofollow" target="_blank">在服务和应用程序方面赚了超过4.3亿美元</a>，难怪越来越多的人对建立和赚钱Shopify应用程序感兴趣。</p><p id="b991" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我应该知道这一点，因为我开发的第一个Shopify应用就是为了做这个。</p><p id="9087" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">但是，在开发和获得我的第一个Shopify应用程序后，我也学到了一些东西——Shoppy:一个更好的Slack Bot——在App store上发布，我想分享我在制作第一个应用程序时犯的3个常见错误，这样你就可以避免它们，更快地上市。</p><p id="9b68" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">开始了…</p><h1 id="7cfb" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated"><strong class="ak"> 1。忘记设置authenticated _ controller . Rb</strong></h1><figure class="kv kw kx ky fq iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/3ff22517f62288ea2193cda77ad26bb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*uWmyDaRD_PhDghV3do3A-Q.gif"/></div></figure><p id="c4b5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">制作Shopify应用程序最重要的第一步是认证新商店，并使用该会话数据来做一些事情，如使用商店/订单/产品数据、响应网络挂钩或处理收费。</p><p id="91f0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">当我第一次设置我的应用程序时，我在每个控制器上使用以下代码来确保我已经正确地验证了会话:</p><pre class="kv kw kx ky fq kz la lb lc aw ld dt"><span id="1965" class="le jy hu la b fv lf lg l lh li">session = ShopifyApp::SessionRepository.retrieve(1)ShopifyAPI::Base.activate_session(session)<br/>class ShopifyController &lt; ApplicationController</span></pre><p id="3a3a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这是令人难以置信的低效，并导致了非常令人沮丧的错误，如果我继承了一个处理所有与Shopify相关的认证的认证控制器，这些错误本来是可以很容易避免的。</p><p id="e589" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">那么，确保我们始终认证我们的会话以访问API和商店数据的最佳方式是什么？</strong></p><p id="1b80" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">解决方案:</strong>确保您已经正确设置了<code class="eh lj lk ll la b">AuthenticatedController</code>，并确保任何需要Shopify认证的控制器都继承了以下内容:</p><pre class="kv kw kx ky fq kz la lb lc aw ld dt"><span id="fc75" class="le jy hu la b fv lf lg l lh li">class AuthenticatedController &lt; ActionController::Base<br/>  include ShopifyApp::Localization<br/>  include ShopifyApp::LoginProtection<br/>  include ShopifyApp::EmbeddedApp</span><span id="0875" class="le jy hu la b fv lm lg l lh li">protect_from_forgery with: :exception<br/>  before_action :login_again_if_different_shop<br/>  around_action :shopify_session<br/>end</span><span id="cc7d" class="le jy hu la b fv lm lg l lh li">...</span><span id="f283" class="le jy hu la b fv lm lg l lh li">class ShopifyController &lt; AuthenticatedController</span></pre><h1 id="9fca" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">2.在控制器中检索商店信息时，使用Shopify的“域”字段</h1><figure class="kv kw kx ky fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff ln"><img src="../Images/691fc546e294c6b5ab713927269bf444.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ysdVHKzMfLgHSa2I.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek">Literally the screen my first alpha user saw because of this mistake.</figcaption></figure><p id="7d8f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在开发过程中，您可能会创建一个调试存储，以便安装应用程序和测试数据。使用Shopify，商店是自动生成的，所以如果你的调试商店叫做<code class="eh lj lk ll la b">Debug Store</code>，Shopify会给你的商店一个类似于<code class="eh lj lk ll la b">debug-store.myshopify.com</code>的域名。</p><p id="6868" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这个Shopify域将存储在两个字段中:<code class="eh lj lk ll la b">myshopify_domain</code>和<code class="eh lj lk ll la b">domain</code>。</p><p id="5cf7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在开发过程中，您可以直观地设置各种商店查找，如下所示:</p><pre class="kv kw kx ky fq kz la lb lc aw ld dt"><span id="5cd6" class="le jy hu la b fv lf lg l lh li">@shop = Shop.where(shopify_domain: ShopifyAPI::Shop.current.domain).first</span></pre><p id="453d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">事实上，我能找到的大多数回复和教程都是从<code class="eh lj lk ll la b">domain</code>中查找的，因为在开发中这是有意义的。<code class="eh lj lk ll la b">myshopify_domain</code>和<code class="eh lj lk ll la b">domain</code>一模一样！</p><p id="5bca" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">但是，在生产中，大多数用户都设置了自己的自定义域，这将产生如下数据:</p><pre class="kv kw kx ky fq kz la lb lc aw ld dt"><span id="defe" class="le jy hu la b fv lf lg l lh li">myshopify_domain: "example.myshopify.com", domain: "example.com"</span></pre><p id="a9c5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我第一次让alpha用户安装Shopy时就发现了这一点，应用程序完全崩溃了。</p><p id="1077" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我发现，Shopify为你提供了<code class="eh lj lk ll la b">myshopify_domain</code>商店链接，让你存储在应用程序的数据库中，因此如果你进行商店查询并依赖<code class="eh lj lk ll la b">domain</code>，那么如果商店设置了自定义域，查询将不会正确匹配，从而导致崩溃。</p><p id="36b1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">那么，您如何确保在生产中正确匹配从Shopify获得的域名呢？</strong></p><p id="626d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">解决方案:</strong>当你在控制器中检索关于你的店铺的信息时，总是使用<code class="eh lj lk ll la b">myshopify_domain</code>而不是<code class="eh lj lk ll la b">domain</code>。这可确保您在用户完成安装后，将用户的域名与您收到的Shopify域名正确匹配。</p><p id="933d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">因此，调整后的生产代码应该如下所示:</p><pre class="kv kw kx ky fq kz la lb lc aw ld dt"><span id="bc9b" class="le jy hu la b fv lf lg l lh li">@shop = Shop.where(shopify_domain: ShopifyAPI::Shop.current.  myshopify_domain).first</span></pre><h1 id="5b69" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">3.在提交你的应用程序进行审核时犯容易导致你被拒绝的错误。</h1><figure class="kv kw kx ky fq iv fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/d7f3e95a6b9a0d41e2a865e566d0b678.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*n84iaxztxWaGvonP"/></div></figure><p id="9b6b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我想分享的最后一件事是我在完成开发并提交我的应用程序供批准后所犯的错误。</p><p id="6d82" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">以下是我第一次提交Shoppy后收到的官方错误:</p><blockquote class="lx ly lz"><p id="8b10" class="iy iz ma ja b jb jc jd je jf jg jh ji mb jk jl jm mc jo jp jq md js jt ju jv hn dt translated">1.“Shopify”一词不能出现在应用名称或标语中。关于商标限制，请参考我们的<a class="ae jw" href="http://e.customeriomail.com/e/c/eyJlbWFpbF9pZCI6IlJQSVNBUUFCYUhzenBhYVBoSjhKWG1kZHphN0QiLCJocmVmIjoiaHR0cHM6Ly93d3cuc2hvcGlmeS5jYS9wYXJ0bmVycy90ZXJtcyIsInBvc2l0aW9uIjoyfQ/b8c7b67f71aac811cd000a949bd403e3f709fa493170aba0a6c90574d5b75970" rel="noopener ugc nofollow" target="_blank">合作伙伴计划协议</a>。</p><p id="08e9" class="iy iz ma ja b jb jc jd je jf jg jh ji mb jk jl jm mc jo jp jq md js jt ju jv hn dt translated">2.你的应用列表中不应包含任何定价信息。更多详情，请参考我们的<a class="ae jw" href="http://e.customeriomail.com/e/c/eyJlbWFpbF9pZCI6IlJQSVNBUUFCYUhzenBhYVBoSjhKWG1kZHphN0QiLCJocmVmIjoiaHR0cHM6Ly9oZWxwLnNob3BpZnkuY29tL2VuL2FwaS9hcHAtc3RvcmUvbGlzdGluZy1pbi10aGUtYXBwLXN0b3JlL2FwcC1saXN0aW5nI3ByaWNpbmctc2VjdGlvbiIsInBvc2l0aW9uIjozfQ/e5f97f7343b03376470f6c0dd8bf61ce84a30c0d9d8fad1807e6540163716e84" rel="noopener ugc nofollow" target="_blank">定价部分要求</a>。</p><p id="3ce0" class="iy iz ma ja b jb jc jd je jf jg jh ji mb jk jl jm mc jo jp jq md js jt ju jv hn dt translated">3.您的合作伙伴帐户中的应用程序名称与Shopify应用程序商店列表中的名称不同。这些字段必须相同。您可以在合作伙伴仪表盘的应用设置部分更改应用名称。</p></blockquote><p id="362e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这些都是超级容易修复的错误，但是因为我犯了这些错误，它们被标记了，所以我必须在编辑后重新提交我的应用程序。从那时起，这个应用程序又花了10天的时间才从待审批变成被批准。如果我避免了这些错误，我可以将我的总审批时间从30天减少到20天。</p><p id="abd3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">那么，我们在提交app审核时，如何不犯这些文案错误呢？</strong></p><p id="1c01" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">解决:</strong>很多事情:</p><ol class=""><li id="986c" class="me mf hu ja b jb jc jf jg jj mg jn mh jr mi jv mj mk ml mm dt translated">请勿在您的应用名称或标语中提及“Shopify”。不过你也可以提到其他应用程序(例如，我的应用程序使用Slack，所以我引用Slack)。</li><li id="e650" class="me mf hu ja b jb mn jf mo jj mp jn mq jr mr jv mj mk ml mm dt translated">如果你正在开发一个免费增值应用，不要在一般描述文本框中提及你的其他定价等级。看起来你可以把这些包括在你的截图中，或者你可以把它们包括在你的应用程序描述的定价部分。</li><li id="d2a0" class="me mf hu ja b jb mn jf mo jj mp jn mq jr mr jv mj mk ml mm dt translated">App store中应用程序的名称必须与安装时的名称相匹配。我以为我可以在安装应用程序后做一个更重的营销，但显然，我错了。只要确保应用程序名称相同，就不会有任何问题。</li></ol><p id="c74c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我希望这篇文章能帮助你开发和发布自己的Shopify应用程序，如果你有任何问题，请随时给我发电子邮件，地址是chris@emerald.io！</p><p id="519d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt">—</p><p id="9ac6" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">Chris是一名自学成才的程序员，也是Threadbase的联合创始人:这是一个允许非开发人员只需点击几下就可以<a class="ae jw" href="https://threadbase.io/?utm_source=social&amp;utm_medium=medium&amp;utm_campaign=181102_make_hacker_news" rel="noopener ugc nofollow" target="_blank">建立自己的Reddit风格社区的平台，该平台于2019年3月被收购。他还刚刚完成了Shoppy的开发，这是一款免费的应用程序，可以从你的Shopify商店向Slack发送订单通知和总结报告。</a></p><p id="5371" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在Threadbase和Shoppy之前，Chris在包括Quidsi和ComiXology(均被亚马逊收购)和Bonobos(被沃尔玛收购)在内的初创公司从事营销工作。</p></div></div>    
</body>
</html>