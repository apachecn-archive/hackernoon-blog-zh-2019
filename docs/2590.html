<html>
<head>
<title>Delays in App Delivery to Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向Kubernetes交付应用的延迟</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/delays-in-app-delivery-to-kubernetes-5d0511094f38?source=collection_archive---------12-----------------------#2019-04-23">https://medium.com/hackernoon/delays-in-app-delivery-to-kubernetes-5d0511094f38?source=collection_archive---------12-----------------------#2019-04-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/f67dbdb112385073b5fb5e35c18de9a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vG0NCnyQXVdQpBVxOLLv4w.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Delivering enterprise applications to Kubernetes</figcaption></figure><p id="d025" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">世界各地的企业开始意识到集装箱和Kubernetes的趋势。将应用程序作为容器包交付给Kubernetes有很多好处，但同时，应用程序容器化的过程以及随后应用程序部署到Kubernetes会遇到许多障碍。由于使用Kubernetes和containers进行应用交付的想法是最近才出现的，从传统交付系统到这些现代交付系统的过渡是一个颠簸的过程。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kf"><img src="../Images/6387bd13018ab3c70abb3b10bb94ac99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RFx5cUqojRJ3a4e7Nv0VbA.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Major roadblocks while achieving continuous delivery</figcaption></figure><p id="acbe" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">要实现现代化，将大型应用程序分解成较小的微服务只是一个开始。主要的挑战是将这些微服务作为容器持续地交付给Kubernetes。大多数企业团队在这方面投入了大量的时间和精力，并以延迟的交付过程而告终。</p><p id="01fe" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">那么，到底是什么故障导致了<strong class="ji hv">的延迟呢？</strong></p><h1 id="dcb4" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated"><strong class="ak">app交付延迟原因</strong></h1><h2 id="9aad" class="li kl hu bd km lj lk ll kq lm ln lo ku jr lp lq ky jv lr ls lc jz lt lu lg lv dt translated">→ <strong class="ak">集装箱化</strong></h2><p id="44d0" class="pw-post-body-paragraph jg jh hu ji b jj lw jl jm jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd hn dt translated">随着容器技术成为企业软件栈中的新手，没有多少团队能够找到一种方法来简化它带来的复杂性。容器化过程从创建Docker文件开始。这个Docker文件应该由Docker读取，并获得一系列关于如何构建Docker映像的指令。接下来创建一个构建命令，该命令使用docker文件来生成Docker映像。当这个docker映像运行时，您会得到一个Docker容器。如果必须对大量容器重复同样的操作，这一过程有点复杂且耗时。对于只有几个服务的小规模应用程序，容器化很容易。但是，对于可能有数百个微服务的大型企业应用程序来说，创建和维护容器会变得非常困难。</p><p id="6e48" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">将容器编排添加到流程中，您会看到更高层次的复杂性，包括设置编排器和部署到Kubernetes。</p><h2 id="4c0c" class="li kl hu bd km lj lk ll kq lm ln lo ku jr lp lq ky jv lr ls lc jz lt lu lg lv dt translated">→交付给Kubernetes</h2><ul class=""><li id="508e" class="mb mc hu ji b jj lw jn lx jr md jv me jz mf kd mg mh mi mj dt translated"><strong class="ji hv">手动大规模部署容器<br/></strong>Kubernetes中几乎所有面向用户的组件都是在YAML文件中设计的。因此，对于任何具有大量互连服务的企业应用程序，都可能有多个YAML文件，这要求用户非常习惯空白语法，否则，结果可能会令人沮丧地容易出错，并且没有关于何时何地出错的反馈。<br/>如果你把这部分都想好了，那么在Kubernetes应用程序中有几个<a class="ae ke" href="https://kubernetes.io/docs/concepts/cluster-administration/manage-deployment/" rel="noopener ugc nofollow" target="_blank">不同的资源类型</a>需要处理。其中一些可能需要升级，根据您正在使用的应用程序的类型，知道更新什么可能会使Kubernetes的部署更加复杂。对于一次性交付来说这样做仍然是可行的，但是管理大量容器到Kubernetes的交付并不时地更新它们是完全不同的场景。随着迭代次数的增加，应用交付往往会变得容易出错。还有一些任务，比如跟踪差异历史记录和管理新旧部署的回滚，这又增加了一层复杂性。</li><li id="14ec" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated"><strong class="ji hv">备选方案太多，无法部署<br/> </strong>当然，有一些自动化工具可以减少将应用程序部署到Kubernetes所需的工作。有许多选项可以将Kubernetes作为托管或托管平台来运行。这又有几个复杂性。首先，将您的更新或新特性部署到您正在运行的集群并不像看起来那么简单。由于没有普遍认可的方法来做到这一点，因此很难从几种方法中选择一种方法来确保它适合手头的团队。如果您考虑在过程中引入部署自动化工具来加速它，团队将面临几个选择。由于有大量的工具来自动化部署，广泛的选项使企业陷入分析瘫痪，最终导致延迟实现向Kubernetes交付应用的标准化方法。这首先否定了使用部署自动化工具的目的。即使在自动化工具设置到位之后，仍然存在一个主要问题，即弄清楚CD管道的一些参数，以使工具启动并运行，如版本控制系统、CI系统、Docker registry和Kubernetes集群。<br/>一旦这些组件到位，企业就准备好了Kubernetes的持续交付渠道。</li><li id="9840" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated"><strong class="ji hv">开发人员在实现平稳交付的同时需要进行上下文切换<br/> </strong>容器为IT运营团队和开发人员带来了很多复杂性。由于这项技术相对较新，人们对Kubernetes和Docker容器缺乏足够的了解。为了确保顺利的应用交付过程，<a class="ae ke" href="https://www.informationweek.com/devops/measure-devops-for-efficiency-not-just-speed-/a/d-id/1330916" rel="noopener ugc nofollow" target="_blank"> DevOps团队</a>必须高效。否则，简化流程的斗争将会持续下去。当开发人员需要参与容器管理和交付过程时，他们需要时间来习惯容器交付。如果将这些时间用于应用程序服务的编码，效率会更高。网飞的工程总监Sangeetha Narayanan说，“任何花在对抗系统或工具上的时间都不是花在为企业提供价值上的时间。”同时谈论<a class="ae ke" href="https://www.infoq.com/podcasts/improving-developer-experience-netflix?useSponsorshipSuggestions=true&amp;itm_source=podcasts_about_cloud-computing&amp;itm_medium=link&amp;itm_campaign=cloud-computing" rel="noopener ugc nofollow" target="_blank">改善开发者体验</a>以实现流畅的应用部署流程。这适用于大多数企业应用程序开发团队，他们在拥抱现代化的过程中尝试向Kubernetes交付应用程序。</li><li id="db90" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated"><strong class="ji hv">微服务架构被认为是使用Kubernetes <br/> </strong>的一个硬性先决条件，因为微服务可以很好地处理容器，所以假设Kubernetes也是如此。许多企业不断推迟向Kubernetes部署应用程序，因为他们的应用程序仍然是一个遗留应用程序，并且错过了获得Kubernetes必须提供的好处，如可移植性、IT成本节约和可扩展性。虽然在大多数情况下，基于微服务的应用是Kubernetes的理想选择，但并不是所有应用都是如此。将一块巨石包裹在一个容器中，并通过Kubernetes展开，也能创造奇迹。对于那些由于成本超过收益而无法重构为微服务的整体，这种方法可以快速启动应用程序现代化工作，同时加快应用程序部署。</li></ul><h1 id="0ed2" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">解决方法是什么？</h1><p id="e43c" class="pw-post-body-paragraph jg jh hu ji b jj lw jl jm jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd hn dt translated">将企业应用部署到Kubernetes的<a class="ae ke" href="https://www.infoworld.com/article/3173266/4-reasons-you-should-use-kubernetes.html" rel="noopener ugc nofollow" target="_blank">优势取代了你的团队面临的缺点，让你别无选择，只能想办法克服这些缺点。关键是自动化您的完整CI/CD渠道。但是，仅仅说你需要一个自动化的CI/CD管道，并不能让你所有的应用交付延迟消失。为了更顺利、更快速地交付给Kubernetes，您需要一种能够简化流程的方法，记住这些具体的考虑事项。</a></p><h2 id="4b7f" class="li kl hu bd km lj lk ll kq lm ln lo ku jr lp lq ky jv lr ls lc jz lt lu lg lv dt translated"><strong class="ak">解决方案注意事项:</strong></h2><ol class=""><li id="df2f" class="mb mc hu ji b jj lw jn lx jr md jv me jz mf kd mp mh mi mj dt translated"><strong class="ji hv">自动化:</strong>容器化过程的自动化是顺利交付应用的第一步。应该不再需要为每个应用服务手动创建Docker映像。</li><li id="1ca2" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mp mh mi mj dt translated"><strong class="ji hv">流程的标准化:</strong>为了减少在尝试适应每个定制流程和工具时所造成的延迟，需要有一个跨团队的标准化流程，用于向Kubernetes交付应用程序。</li><li id="0cfb" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mp mh mi mj dt translated"><strong class="ji hv">开发人员的自助服务交付体验:</strong>如果通过让开发人员自己处理DevOps配置来实现以服务为中心的交付，则可以消除由于DevOps摩擦而导致的所有延迟。</li></ol><p id="798a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">满足所有这些考虑将提供大多数企业希望实现的应用交付自动化水平。</p><p id="92e2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">企业可以拥有一个非常高效的DevOps团队来实现这种程度的自动化，或者寻求一个专门构建的应用交付平台的帮助，以提供这些<a class="ae ke" href="https://www.hyscale.io/platform-overview/" rel="noopener ugc nofollow" target="_blank">功能</a>来实现向Kubernetes的平稳交付流程。有几个应用交付平台就是为此而设计的。像HyScale、Codefresh和OpenShift这样的平台是一些值得探索的选择。</p><p id="7f24" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">根据企业应用程序的前景和团队的能力，您需要快速行动，决定如何顺利地将容器化的应用程序交付给Kubernetes。</p><figure class="kg kh ki kj fq iv"><div class="bz el l di"><div class="mq mr l"/></div></figure></div></div>    
</body>
</html>