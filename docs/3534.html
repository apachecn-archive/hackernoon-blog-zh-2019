<html>
<head>
<title>Building a job board with Gatsby.js, a case study</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Gatsby.js 构建求职板，案例研究</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/building-a-jobs-board-with-gatsby-js-a-case-study-94eeb6bc9bd4#2019-06-08">https://medium.com/hackernoon/building-a-jobs-board-with-gatsby-js-a-case-study-94eeb6bc9bd4#2019-06-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="128c" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">了解我们如何利用 Gatsby.js 为寻找远程角色的软件工程师构建工作板。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/3a7045d69a1f9ed2d50cee9d111e746a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GktUTPLcZOqzFtQLHDKLLw.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">“Fast in every way that matters. Gatsby is a free and open source framework based on React that helps developers build blazing fast websites and apps” — Homepage of Gatsby.js.</figcaption></figure><p id="cea0" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">今天我们将讨论我们是如何与 G <a class="ae kv" href="https://gatsbyjs.org" rel="noopener ugc nofollow" target="_blank"> atsby </a>一起构建<a class="ae kv" href="https://remotefordays.com" rel="noopener ugc nofollow" target="_blank"> Remotefordays </a>的，一个面向远程软件工程师角色的工作平台。首先，我们将讨论我们是如何获得我们的技术堆栈的，然后我们将讨论我们在这一过程中遇到的陷阱和失败。</p><h1 id="3913" class="kw kx hu bd ky kz la lb lc ld le lf lg ja lh jb li jd lj je lk jg ll jh lm ln dt translated">技术堆栈的组件</h1><p id="08ff" class="pw-post-body-paragraph jz ka hu kb b kc lo iv ke kf lp iy kh ki lq kk kl km lr ko kp kq ls ks kt ku hn dt translated">Gatsby 是一个在前端快速构建高性能网站的神奇工具。由于非凡的开发者体验，我们可以毫不费力地开始一个新项目。因此，选择盖茨比作为我们的前端关注点是很容易的。接下来，我们需要决定如何构建和存储工作列表。</p><p id="de87" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">因为我们使用的是 Gatsby，所以我们倾向于将招聘板构建为一个静态站点。毕竟，在最初的工作发布之后，内容是不会改变的。但是在求职公告板上有一个微妙的要求，要求网站设计为动态动作。</p><p id="15ef" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">当顾客购买一个列表时，他们应该马上在首页看到他们的帖子。如果您选择使用 CMS 作为静态站点提供此功能，为了在主页上显示职务列表，您需要为每个新的职务列表重新构建和重新部署站点。我们的系统设计对前十个列表产生了合理的折衷。</p><p id="8163" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">在当前的系统设计中，当网站增长到几百个或几千个列表时，网站的构建时间会跳到几分钟，因为我们每次都是从零开始重建，而不是从网站上一个版本以来的变化开始。此外，如果我们使用 CI/CD 系统，我们现在增加了一个 CI 分钟来建立一个没有可测试内容更改的网站，这增加了成本，并增加了客户查看其工作列表的时间。</p><p id="e4c5" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">相反，我们需要用一个在运行时查询 API (NodeJS)端点的前端客户端来构建我们的作业站点，然后 API 将查询一个数据库(为了灵活起见，使用 MongoDB)来创建或列出一个作业。通过这种设置，我们可以发布一个作业，并在处理完事务后异步更新主首页，以包含最新的列表。</p><p id="2b79" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">现在我们有了一个满意的系统设计，我们可以谈谈激发当前设计的错误开端，因为你知道，事后诸葛亮。</p><h1 id="3bef" class="kw kx hu bd ky kz la lb lc ld le lf lg ja lh jb li jd lj je lk jg ll jh lm ln dt translated">一路上有陷阱和错误的开始</h1><p id="182e" class="pw-post-body-paragraph jz ka hu kb b kc lo iv ke kf lp iy kh ki lq kk kl km lr ko kp kq ls ks kt ku hn dt translated">最大的问题集中在职位列表 SEO 和职位详细信息页面的服务器端呈现上。详细页面被设计为基于从首页传递的唯一 ID 来获取特定职位发布的数据。我们使用客户端专用路径实现了这一特性，因为我们认为这种方法是使用应用程序的“Gatsby 方式”，这是基于一篇关注于<a class="ae kv" href="https://www.gatsbyjs.org/docs/building-apps-with-gatsby/" rel="noopener ugc nofollow" target="_blank">构建混合应用程序</a>的文章。</p><p id="83ed" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">然而，我们发现这些页面不能使用 React 头盔来添加社交媒体共享的元标签。这个问题的罪魁祸首在于 Gatsby 页面是使用 React 提供的。这是 Gatsby 生成服务器渲染页面的方式，在构建时用 ExpressJS 处理。通过 React 呈现的页面。前端两次加载水合物。在第一次调用时，React 生命周期方法不可用，而生命周期方法可用于进行 API 调用。由于这种渲染过程，我们无法在“componentDidMount”中进行 API 调用，以便在使用 React Helmet 添加 SEO 标签之前显示数据。嘘！</p><p id="6261" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">为了解决这个问题，我们在 CDN 级别添加了请求转发，并将细节渲染逻辑移到了我们的后端 ExpressJS 应用程序。当用户请求一个职位详细信息时，该请求被发送到后端应用程序，我们生成一个带有适当 SEO 元标签的职位，返回一个带有适当数据的响应，然后缓存该响应以备将来的请求。在我们做出这些调整后，我们能够共享工作岗位。耶！</p><h1 id="ee09" class="kw kx hu bd ky kz la lb lc ld le lf lg ja lh jb li jd lj je lk jg ll jh lm ln dt translated">最后的想法</h1><p id="71e6" class="pw-post-body-paragraph jz ka hu kb b kc lo iv ke kf lp iy kh ki lq kk kl km lr ko kp kq ls ks kt ku hn dt translated">概括地说，我们用 G <a class="ae kv" href="https://gatsbyjs.org" rel="noopener ugc nofollow" target="_blank"> atsby </a>构建了一个远程就业委员会作为我们的前端客户端，因为我们从一开始就想要性能。我们在<a class="ae kv" href="https://netlify.com" rel="noopener ugc nofollow" target="_blank"> Netlify </a>上部署了我们的站点，用 Netlify 配置了 CDN 请求转发，使用了部署在<a class="ae kv" href="https://cloud.google.com/appengine/" rel="noopener ugc nofollow" target="_blank"> Google Cloud Appengine </a>上的后端 ExpressJS 应用，来处理工作细节页面的服务。我们遇到了一个令人沮丧的屏蔽程序，导致我们放弃核心的 Gatsby 逻辑，并在后端重新实现该逻辑。根据我们现在了解的情况，我们还会选择盖茨比吗？绝对的！虽然我们无法充分利用 Gatsby 的潜力，但我们相信会有更多的机会。想了解更多关于我的信息，你可以在 Twitter 上关注我。谢谢！</p></div><div class="ab cl lt lu hc lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hn ho hp hq hr"><h2 id="50cb" class="ma kx hu bd ky mb mc md lc me mf mg lg ki mh mi li km mj mk lk kq ml mm lm mn dt translated">盖茨比庄园</h2><p id="9b32" class="pw-post-body-paragraph jz ka hu kb b kc lo iv ke kf lp iy kh ki lq kk kl km lr ko kp kq ls ks kt ku hn dt translated"><a class="ae kv" href="https://gatsbymanor.com" rel="noopener ugc nofollow" target="_blank">盖茨比庄园</a>打造专业设计盖茨比主题。我们制作主题来满足您的项目需求，并经常添加新的启动程序。找不到喜欢的主题？给我们<a class="ae kv" href="https://twitter.com/thegatsbymanor" rel="noopener ugc nofollow" target="_blank">@ thegatsbymonar</a>发消息，我们会为你建立一个主题！</p></div></div>    
</body>
</html>