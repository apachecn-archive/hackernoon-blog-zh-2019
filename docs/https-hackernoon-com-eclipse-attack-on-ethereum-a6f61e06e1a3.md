# 在以太网上成功实施日食攻击需要什么？

> 原文：<https://medium.com/hackernoon/https-hackernoon-com-eclipse-attack-on-ethereum-a6f61e06e1a3>

![](img/cde53fefab6e35f341f5db7b4b4dcd92.png)

Photo by [Constantin Popp](https://unsplash.com/@constantinp?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/search/photos/lunar-eclipse-mountain?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

## 什么是日食攻击？

eclipse 攻击是一种发生在[对等](https://en.wikipedia.org/wiki/Peer-to-peer)网络级别的攻击:攻击者通过从整个对等网络中屏蔽某个节点来获得对该节点访问信息的完全控制。

在流行的对等网络中，如[比特币](https://en.wikipedia.org/wiki/Bitcoin)和[以太网](https://eth.wiki/ethereum-introduction#about-ethereum)，攻击者可以通过确保受害节点不再从网络的其他部分接收正确的信息，而是只接收攻击者操纵的信息来执行 eclipse 攻击。

换句话说，当网络上的大多数对等体都是恶意的并且正在获得对特定节点的连接的控制时，就发生了攻击。控制此类连接的攻击者可以确保此特定节点被恶意节点包围。

此外，在 eclipse 攻击中，攻击者不是像 [Sybil 攻击](https://en.wikipedia.org/wiki/Sybil_attack)那样攻击整个网络，而是专注于隔离和锁定特定节点。这种攻击通常会导致受害节点接收到一个经过操纵的区块链的假视图。

> 恶意节点用他们的冒名顶替者区块链挡住了受害者节点对真实区块链的视线。因此，区块链的主要安全威胁之一 Eclipse 攻击应运而生。

根据海尔曼等人 2015 年的[报告](https://eprint.iacr.org/2015/263.pdf)，eclipse 攻击的一个关键含义是，eclipse 攻击可能是其他攻击的有用构建块。例如，一旦攻击位置得到保护，攻击者可以做的一件坏事是，攻击者可以发动挖掘攻击，例如 [51%攻击](https://en.bitcoinwiki.org/wiki/51%25_attack)的挖掘能力远低于 51%。

这可能会导致受害者看到的网络交易历史发生变化，从而导致受害者遭受经济损失。

## 在以太网上成功实施 Eclipse 攻击需要什么？

值得注意的是，一个恶意的参与者并不需要太多就能成功地实施 eclipse 攻击。Heilman 等人 2018 年的[论文](https://eprint.iacr.org/2018/236.pdf)表明，在 Ethereum 网络上执行 eclipse 攻击只需要几台机器。

研究人员指出，要在以太坊上实施 eclipse 攻击，对手只需要“控制两台机器，每台机器只有一个 IP 地址”，就可以垄断进出受害者节点的连接，并最终将受害者节点与网络中的其他对等节点隔离开来。

尽管如此，在大多数情况下，eclipse 攻击仍然很难发起，因为攻击者必须选择一个目标节点或一组节点，拥有一个已建立的主机节点僵尸网络，断开目标与它们所连接的每个节点的连接，并通过反复试验找出目标的相邻节点，以便使它们连接到攻击者的节点。然后，攻击者将不得不等待下一次受害节点注销并重新加入网络。

在重置过程中，攻击者会强制将连接重定向到一组新的节点，从而完全控制受害者的所有连接。这不是一个简单的任务，但它是可行的。到目前为止，我们还没有看到任何 eclipse 攻击的例子；然而，最近的研究结果表明，这是一件不应该被忽视的事情。

## 物联网设备上的 Eclipse 攻击

物联网(IoT)环境中的 eclipse 攻击怎么办？物联网设备带来的风险显著增加。在数据中心挖掘节点的常见场景中，攻击者需要几台机器来成功执行 eclipse 攻击。在数据中心场景中，eclipse 攻击很难进行，因为它通常涉及攻击多个独立的上行链路。

另一方面，在物联网环境场景中，攻击者执行 eclipse 攻击变得容易多了。物联网设备很容易成为攻击者的目标，这主要是因为对物联网设备的 eclipse 攻击只涉及攻击一个单点故障，例如，攻击蜂窝 3G 上行链路。

如果攻击者想要对物联网设备发起 eclipse 攻击，攻击者可以做的就是首先通过针对物联网设备的网关发起[中间人攻击](https://en.wikipedia.org/wiki/Man-in-the-middle_attack)。一旦网关遭到破坏，攻击者就可以完全控制受害者物联网设备的数据，如块同步请求，因此可以强制连接到恶意节点。

> 物联网设备变得与对等网络的其余部分隔离，从而变得不可能查看真实的区块链网络。从此，对物联网设备的 eclipse 攻击就完成了。

## 那么如何减轻 Eclipse 攻击呢？

在基于工作证明(PoW)的网络中的 eclipse 攻击场景中，攻击者利用该攻击来迫使节点接受总难度低于主链的更长的链。因为攻击者广告了比诚实节点更高的总难度，所以当受害节点重新加入网络时，它将接收到比有效链更长但总难度更低的链。

> 因此，所发生的是牺牲节点不能再与有效链同步。那么，有什么办法可以缓解这个问题呢？

幸运的是，重要的提议正在迅速涌现。就在上个月，台北的德国区块链研究员 Dominic Letz 提出了第一个解决 eclipse 攻击问题的超轻客户端协议。

正如莱兹在[的论文](https://eprint.iacr.org/2019/579.pdf)“BlockQuick:用于受限设备上区块链验证的超轻客户端协议”中所写的那样，block quick 能够防止 eclipse 攻击，因为它不仅仅依赖于在验证区块时选择工作证明(PoW)网络上难度最高的最长链。

最长的链和最高难度的功能在区块链协议中至关重要，对流行的轻型客户端如[以太坊 Geth](https://geth.ethereum.org/) 也是如此，但是如果没有适当的保护，可能会被攻击者滥用。为了提供安全的轻型客户端协议，安全策略在验证块时必须采用共识信誉表。

正如他在论文中解释的那样:“在每个新块中，设备验证矿工的加密签名，并将这些签名与其共识信誉表中的已知矿工身份进行比较。只有当一个区块的共识分数大于 50%时，它才会被客户接受。收到总分较低的链会导致中止。

客户端将查看设备如何迭代块，并将运行缓慢更新机制。其想法是，BlockQuick 将运行信誉检查，而不是遵守最长链规则，以确保客户端只接受信誉分数> 50%的块。

## 结论

在本文中，我们描述了什么是 eclipse 攻击，讨论了 eclipse 攻击的一些含义，并探索了超轻客户端协议如何解决这个问题。随着区块链技术的不断发展，了解当前和未来可能的发展对社区领导者来说至关重要。所以保持联系！在推特上关注我:[https://twitter.com/YahsinHuang](https://twitter.com/YahsinHuang)