<html>
<head>
<title>Let’s Get Started with Webpack 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们从Webpack 4开始吧</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/lets-start-with-webpack-4-91a0f1dba02e?source=collection_archive---------0-----------------------#2019-02-24">https://medium.com/hackernoon/lets-start-with-webpack-4-91a0f1dba02e?source=collection_archive---------0-----------------------#2019-02-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/6232e1627c1de8752044f965a6dcc2ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0V9PsiedHEzXJRlouOazZA.gif"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Gif explaining use of Webpack</figcaption></figure><p id="a5bd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">几天前，我想建立一个简单的SCSS和ES6的静态网站，我可以在某个地方主办。所以我决定设置一个简单的项目，可以将我的SCSS转换成CSS，将ES6+代码转换成ES5。我决定用Webpack 4。本文就是基于这样的学习。本文的代码库可以在我的<a class="ae ke" href="https://github.com/thejsdeveloper/webpack4-setup" rel="noopener ugc nofollow" target="_blank"> Github </a>中找到。</p><p id="3cf7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">议程</strong></p><ol class=""><li id="354b" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated">Webpack 4简介</li><li id="ad12" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">Webpack的核心术语</li><li id="40d6" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">先决条件</li><li id="9da3" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">为Webpack做准备</li><li id="4441" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">从头开始设置配置文件</li><li id="0b67" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">使用HTML</li><li id="a811" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">Webpack开发服务器</li><li id="0c20" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">使用ES6+和Typescript</li><li id="c459" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">使用SCSS和CSS</li><li id="a1db" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">加载静态资源</li><li id="a66d" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">使用不同的环境</li></ol></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="699b" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated"><strong class="ak">web pack 4简介</strong></h1><p id="85ab" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">根据官方网站</p><blockquote class="md"><p id="d146" class="me mf hu bd mg mh mi mj mk ml mm kd ek translated"><em class="mn"/><strong class="ak"><em class="mn">web pack</em></strong><em class="mn">的核心是一个面向现代JavaScript应用的静态模块捆绑器。当webpack处理您的应用程序时，它会在内部构建一个依赖图，映射您的项目需要的每个模块，并生成一个或多个包。</em></p></blockquote><p id="37cb" class="pw-post-body-paragraph jg jh hu ji b jj mo jl jm jn mp jp jq jr mq jt ju jv mr jx jy jz ms kb kc kd hn dt translated">我们现代的JavaScript应用程序可以有不同的模块，这些模块可以相互依赖。Webpack利用依赖关系获取这些模块，并从中生成包。</p><p id="2a4b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">默认情况下，Webpack 4是零配置的(当我们开始使用project时，我们会看到这一点)。零配置并不意味着您不能在Webpack中配置任何东西。它是高度可配置的，以满足您的需要。</p></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="e5b3" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated"><strong class="ak">web pack 4的核心术语</strong></h1><p id="4be4" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">在开始实际安装之前，我们需要了解一些Webpack中涉及的基本术语。</p><ol class=""><li id="07c3" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated"><strong class="ji hv">条目</strong></li></ol><p id="181c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了构建依赖图，Webpack需要知道它应该从哪里开始。从那里开始，它开始寻找你的根模块所依赖的其他模块。默认条目为<code class="eh mt mu mv mw b">./src/index.js </code>，但您也可以将其设置为不同的模块:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="940e" class="nf lb hu mw b fv ng nh l ni nj">module.exports = {<br/>  entry: './path/to/my/entry/file.js'<br/>};</span></pre><p id="d686" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">多个入口点也是可能的:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="0549" class="nf lb hu mw b fv ng nh l ni nj">module.exports = {<br/>  entry: {<br/>    main: './src/index.js',<br/>    vendor: './src/vendor.js'<br/>  }<br/>};</span></pre><p id="3b0b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">2.<strong class="ji hv">输出</strong></p><p id="a4d7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">输出配置告诉webpack在哪里写最终文件。通常这是<code class="eh mt mu mv mw b">dist/</code>或<code class="eh mt mu mv mw b">builds/</code>文件夹。你想怎么命名都行。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="7ccb" class="nf lb hu mw b fv ng nh l ni nj">const path = require('path');<br/><br/>module.exports = {<br/>  entry: './src/index.js',<br/>  output: {<br/>    path: path.resolve(__dirname, 'dist'),<br/>    filename: 'main.bundle.js' <br/>  }<br/>}</span></pre><p id="56b0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果有多个入口点，我们需要稍微不同配置:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="af2b" class="nf lb hu mw b fv ng nh l ni nj">const path = require('path');</span><span id="831c" class="nf lb hu mw b fv nk nh l ni nj">module.exports = {<br/>  entry: {<br/>    main: './src/index.js',<br/>    vendor: './src/vendor.js'<br/>  },<br/>  output: {<br/>    filename: '[name].bundle.js',<br/>    path: __dirname + '/dist'<br/>  }<br/>};</span></pre><p id="7f00" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">上述输出配置将在<code class="eh mt mu mv mw b">dist</code>文件夹中产生两个文件，分别命名为<code class="eh mt mu mv mw b">main.bundle.js</code>和<code class="eh mt mu mv mw b">vendor.bundle.js</code></p><p id="bc08" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">3.<strong class="ji hv">装载机</strong></p><p id="a54c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">加载器允许我们转换文件，例如:将<code class="eh mt mu mv mw b">.ts</code>文件转换成<code class="eh mt mu mv mw b">.js</code>或者将<code class="eh mt mu mv mw b">.scss</code>转换成<code class="eh mt mu mv mw b">css</code>。Webpack生态系统中有各种各样的装载机，如<code class="eh mt mu mv mw b">file-loader, url-loader</code>等。</p><p id="3199" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv"> 4。插件</strong></p><p id="c480" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">插件在Webpack配置中起着非常重要的作用。加载器仅限于将模块从一种形式转换成另一种形式，而插件负责构建优化和资产管理。我们将在本文后面更详细地研究它。</p><p id="466c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在我们开始实际配置之前，这只是一些基本术语。如果你想了解更多核心概念，你可以参考<strong class="ji hv"/><a class="ae ke" href="https://webpack.js.org/concepts" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">Webpack</strong></a>的官方页面。</p></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="52aa" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated"><strong class="ak"> 3。先决条件</strong></h1><p id="45ac" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">在开始之前，我们需要在机器上安装节点。检查它是否安装在您的机器上。奔跑</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="ac2d" class="nf lb hu mw b fv ng nh l ni nj">node -v </span></pre><p id="01c2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果它没有显示任何版本，这意味着节点没有安装。<br/>要安装节点，请转到<a class="ae ke" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">节点JS </a>并下载安装。</p></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="53ac" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated"><strong class="ak"> 4。为Webpack做好准备</strong></h1><p id="c481" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">让我们创建一个名为<code class="eh mt mu mv mw b">webpack-starter</code>的文件夹</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="a92e" class="nf lb hu mw b fv ng nh l ni nj">mkdir webpack-starter<br/>cd webpack-starter</span></pre><p id="b67f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在初始化npm</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="4928" class="nf lb hu mw b fv ng nh l ni nj">npm init</span></pre><p id="c7ff" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">成功运行后，您可以在您的<code class="eh mt mu mv mw b">webpack-starter</code>根文件夹中看到一个<code class="eh mt mu mv mw b">package.json</code>文件。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nl"><img src="../Images/32b975bf108d86e62abc22d9df0490e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ta0ptQ-ilitvYU-lqMYj6w.png"/></div></div></figure><p id="4f6b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们将从npm资源库下载<code class="eh mt mu mv mw b">webpack</code>和<code class="eh mt mu mv mw b">webpack-cli</code>来运行它。对于这次运行</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="6652" class="nf lb hu mw b fv ng nh l ni nj">npm install webpack webpack-cli -D</span></pre><p id="54b2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">它将在<code class="eh mt mu mv mw b">package.json </code>文件中添加这两个依赖项。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nm"><img src="../Images/dddcf66edb21a2a17849518db9b147be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vk2zd8YKCG9yYGah4Lm9cw.png"/></div></div></figure><p id="4b5a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们将在其中创建一个<code class="eh mt mu mv mw b">src</code>目录和<code class="eh mt mu mv mw b">index.js</code>文件。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="a67c" class="nf lb hu mw b fv ng nh l ni nj">mkdir src</span></pre><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nn"><img src="../Images/20de73575faaf25b12741e4301d9fae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i2p9UuOXEHesE3lVgKssPg.png"/></div></div></figure><p id="9be6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们修改<code class="eh mt mu mv mw b">package.json</code>中的<code class="eh mt mu mv mw b">npm</code>脚本</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="902e" class="nf lb hu mw b fv ng nh l ni nj">"scripts": {</span><span id="95e6" class="nf lb hu mw b fv nk nh l ni nj">"dev": "webpack"</span><span id="3b06" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="097a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在从根文件夹中运行以下命令</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="17c5" class="nf lb hu mw b fv ng nh l ni nj">npm run dev</span></pre><p id="5248" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您将看到一个在根文件夹中用<code class="eh mt mu mv mw b">main.js </code>文件创建的dist文件夹。</p><p id="04da" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您将会看到一个在您的根文件夹中使用<code class="eh mt mu mv mw b">main.js </code>文件创建的dist文件夹。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/4bbd4b71dc079c0871623caa1866f19d.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*0F2i0jMQ18lApAZkUYN3KQ.png"/></div></figure><p id="b923" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但是控制台中有一个警告。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="d8fa" class="nf lb hu mw b fv ng nh l ni nj">WARNING in configuration<br/>The 'mode' option has not been set, webpack will fallback to 'production' for this value. Set 'mode' option to 'development' or 'production' to enable defaults for each environment.<br/>You can also set it to 'none' to disable any default behavior. Learn more: <a class="ae ke" href="https://webpack.js.org/concepts/mode/" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/concepts/mode/</a></span></pre><p id="a296" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这个警告是因为我们需要设置一个模式。让我们这样做，并点击<code class="eh mt mu mv mw b">npm run dev</code></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="3923" class="nf lb hu mw b fv ng nh l ni nj">"scripts": {</span><span id="9ead" class="nf lb hu mw b fv nk nh l ni nj">"dev": "webpack --mode development"</span><span id="22ee" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="c952" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在您可以看到没有警告，并且生成了块。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff np"><img src="../Images/96e7e17649b380a7dd9f441da4a47f10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pGm-Wos9PHs16w0CUk2e0w.png"/></div></div></figure><p id="4bc5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但是等等！！！webpack是如何做到的？我没有配置任何东西。还记得一开始我告诉你Webpack 4是零配置的吗？实际上，它带有默认配置，在<code class="eh mt mu mv mw b">src</code>文件夹中搜索<code class="eh mt mu mv mw b">index.js</code>文件，并假设它是构建依赖图的入口点。它还假设输出文件夹是<code class="eh mt mu mv mw b">dist</code>，并在那里发出转换后的文件。</p></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="07dd" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated"><strong class="ak"> 5。从scratc设置配置文件</strong> h</h1><p id="7199" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">我们现在将研究如何编写我们自己的配置，以便我们可以更好地控制webpack应该做什么。</p><p id="9ee2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们在根目录下创建<code class="eh mt mu mv mw b">webpack.config.js</code>文件。我还创建了<code class="eh mt mu mv mw b">src/app/</code>目录和<code class="eh mt mu mv mw b">src/index.html</code>。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div class="fe ff nq"><img src="../Images/26a4067a2bf33acd16c8ac3810cdc538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*Y2R6a0JUTV27UPOiDeWoLg.png"/></div></figure><p id="1ea6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在打开<code class="eh mt mu mv mw b">webpack.config.js</code>，输入并输出以下代码。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="ec16" class="nf lb hu mw b fv ng nh l ni nj">const path = require('path');</span><span id="e74f" class="nf lb hu mw b fv nk nh l ni nj">module.exports = {<br/>  entry: './src/index.js',<br/>  output: {<br/>    filename: 'main.js',<br/>    path: path.resolve(__dirname, 'dist')<br/>  }<br/>};</span></pre><p id="8f55" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">从根目录删除dist文件夹并点击<code class="eh mt mu mv mw b">npm run dev</code>命令。你会发现同样的结果。</p></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="f7fa" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated">6。使用HTML </h1><p id="255b" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">你已经注意到一件事，当我们运行<code class="eh mt mu mv mw b">npm run dev</code>时，它只是把<code class="eh mt mu mv mw b">main.js</code>文件放到dist文件夹中。Wepack没有复制我们的<code class="eh mt mu mv mw b">index.html</code>文件。为此我们需要使用一个插件<a class="ae ke" href="https://www.npmjs.com/package/html-webpack-plugin" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">html-web pack-plugin</strong></a><strong class="ji hv">。<br/> </strong>如此安装<code class="eh mt mu mv mw b">html-webpack-plugin</code></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="4d01" class="nf lb hu mw b fv ng nh l ni nj">npm i html-webpack-plugin -D</span></pre><p id="5e00" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在module.exports中的<code class="eh mt mu mv mw b">webpack.config.js</code>文件中的插件部分(不要删除条目和输出:P):</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="33a7" class="nf lb hu mw b fv ng nh l ni nj">const path = require('path');<br/><strong class="mw hv">const HtmlWebpackPlugin = require('html-webpack-plugin');</strong></span><span id="afce" class="nf lb hu mw b fv nk nh l ni nj">module.exports = {<br/>   ....<br/>plugins: [<br/>        new HtmlWebpackPlugin({<br/>            title: 'Webpack 4 Starter',<br/>            template: './src/index.html',<br/>            inject: true,<br/>            minify: {<br/>                removeComments: true,<br/>                collapseWhitespace: false<br/>            }<br/>        })<br/>    ]<br/>}</span></pre><p id="6688" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">改变<code class="eh mt mu mv mw b">index.html</code></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="e654" class="nf lb hu mw b fv ng nh l ni nj">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;<br/>    <strong class="mw hv">&lt;title&gt; &lt;%= htmlWebpackPlugin.options.title %&gt; &lt;/title&gt;</strong><br/>    &lt;meta name="viewport" content="width=device-width,initial- scale=1"&gt; <br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>&lt;h3&gt;Welcome to Webpack 4 starter &lt;/h3&gt;<br/>&lt;/html&gt;</span></pre><p id="cae6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们使用<code class="eh mt mu mv mw b">htmlWebpackPlugin.options.title</code>来添加标题，我们已经在配置文件中声明了。还要在您的<code class="eh mt mu mv mw b">index.js</code>文件中放一个日志</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="a261" class="nf lb hu mw b fv ng nh l ni nj">console.log('This is index JS')</span></pre><p id="64e4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在删除你的<code class="eh mt mu mv mw b">dist </code>文件夹，点击<code class="eh mt mu mv mw b">npm run dev</code>命令。</p><p id="005d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你会在<code class="eh mt mu mv mw b">dist</code>中看到<code class="eh mt mu mv mw b">index.html</code>文件，标题被我们的配置文件标题所取代。您还会注意到webpack已经添加了一个包含生成脚本<code class="eh mt mu mv mw b">main.js</code>的脚本标签。您不需要手动添加脚本文件。是不是很酷！！！</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nr"><img src="../Images/3b9a85d395c048c0331bf8e3d959c3e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xFvFaYnHJvI2vFn6fS3O9w.png"/></div></div></figure><p id="733d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果您在浏览器中打开<code class="eh mt mu mv mw b">dist/index.html</code>文件并打开检查器，您将看到以下结果。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ns"><img src="../Images/294402d091a06b53a96082381a5bfa89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dN2oAd7Nfep4W1LFqhG-CQ.png"/></div></div></figure></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="f8c1" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated"><strong class="ak"> 6。Webpack开发服务器</strong></h1><p id="71fe" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">在开发过程中，您需要一种机制来从本地服务器提供您的文件，并自动重新加载更改，以避免在您做出任何更改后反复刷新浏览器。</p><p id="d2c1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了解决这个问题，Webpack有<code class="eh mt mu mv mw b"><a class="ae ke" href="https://www.npmjs.com/package/webpack-dev-server" rel="noopener ugc nofollow" target="_blank">webpack-dev-server</a></code>。因此，让我们设置我们的开发服务器。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="12bd" class="nf lb hu mw b fv ng nh l ni nj">npm i webpack-dev-server -D</span></pre><p id="e47f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">转到您的<code class="eh mt mu mv mw b">package.json</code>，将以下内容添加到您的脚本中:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="2242" class="nf lb hu mw b fv ng nh l ni nj">"scripts": {</span><span id="b303" class="nf lb hu mw b fv nk nh l ni nj">"start": "webpack-dev-server --mode development",</span><span id="b714" class="nf lb hu mw b fv nk nh l ni nj">"dev": "webpack --mode development"</span><span id="12fc" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="5518" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在这之后，进入终端的根目录并运行<code class="eh mt mu mv mw b">npm start</code>。你可以在你的终端上看到这个</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nt"><img src="../Images/13f57363765e1347b94af990a1e7c4f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VST4WUIINmavnKWE0O54sg.png"/></div></div></figure><p id="ee34" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你去<code class="eh mt mu mv mw b">http://localhost:8080/. </code>，你可以看到你的欢迎页面。现在尝试在<code class="eh mt mu mv mw b">/src/index.html</code>中改变一些东西，点击保存，你可以在浏览器中看到你的改变，而不用点击刷新。:)更多信息请参考<a class="ae ke" href="https://github.com/webpack/webpack-dev-server#readme" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">web pack-dev-server</strong></a><strong class="ji hv">。</strong></p><p id="5430" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">解析公共扩展</strong></p><p id="3776" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">有时我们不喜欢在导入模块时编写扩展。如果我们不写扩展，我们实际上可以告诉webpack解析它们。为此，在您的<code class="eh mt mu mv mw b">webpack.config.js</code>中添加以下代码</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="9f2c" class="nf lb hu mw b fv ng nh l ni nj">module.exports {<br/>.....<br/>resolve: {</span><span id="ebf0" class="nf lb hu mw b fv nk nh l ni nj">extensions: ['.js', '.ts']</span><span id="f87b" class="nf lb hu mw b fv nk nh l ni nj">},</span><span id="b316" class="nf lb hu mw b fv nk nh l ni nj">.....<br/>}</span></pre></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="ebb8" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated"><strong class="ak"> 7。使用ES6+和类型脚本</strong></h1><p id="8abd" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">因此，随着我们的开发服务器的运行，我们将把我们的ES6+代码和类型脚本转移到ES5，因为大多数浏览器只能理解ES5。</p><p id="a8bc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv"> a .将ES6+转到ES5 </strong></p><p id="44af" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为此，我们需要一台装载机。是啊！终于！！！一些装载机。所以我们需要<br/> <code class="eh mt mu mv mw b">babel-loader @babel/core @babel/preset-env</code></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="9635" class="nf lb hu mw b fv ng nh l ni nj">npm i babel-loader @babel/core @babel/preset-env -D</span></pre><p id="be68" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">因此，更新您的配置文件如下</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="041b" class="nf lb hu mw b fv ng nh l ni nj">...<br/>module.exports = {<br/>......</span><span id="684e" class="nf lb hu mw b fv nk nh l ni nj">module: {<br/>        rules: [<br/>            {<br/>                test: [/.js$/],<br/>                exclude: /(node_modules)/,<br/>                use: {<br/>                    loader: 'babel-loader',<br/>                    options: {<br/>                        presets: [<br/>                            '<a class="ae ke" href="http://twitter.com/babel/preset-env" rel="noopener ugc nofollow" target="_blank">@babel/preset-env</a>'<br/>                        ]<br/>                    }<br/>                }<br/>            }<br/>        ]<br/>},<br/>......</span><span id="76e0" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="7aaf" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">那么这基本上意味着什么呢？我们可以编写不同的规则来加载<code class="eh mt mu mv mw b">module</code>内部的模块。<code class="eh mt mu mv mw b">test</code>基本上是正则表达式。<code class="eh mt mu mv mw b">test: [/.js$/]</code>这里我们说的是匹配所有以<code class="eh mt mu mv mw b">.js</code>结尾的文件，排除<code class="eh mt mu mv mw b">node_modules</code>。<code class="eh mt mu mv mw b">babel-loader</code>将使用<code class="eh mt mu mv mw b">preset-env.</code>将这些模块/文件传输到ES 5</p><p id="3a13" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">所以是时候检验这个规则是否真的有所作为了。为此，我们将在<code class="eh mt mu mv mw b">src/app</code>文件夹中添加<code class="eh mt mu mv mw b">header.js</code>并添加一个<code class="eh mt mu mv mw b">ES 6</code>代码。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="d705" class="nf lb hu mw b fv ng nh l ni nj">export class Header {</span><span id="9fe7" class="nf lb hu mw b fv nk nh l ni nj">  constructor() {</span><span id="5132" class="nf lb hu mw b fv nk nh l ni nj">    console.log(`This is header constructor`);</span><span id="7303" class="nf lb hu mw b fv nk nh l ni nj">  }</span><span id="0846" class="nf lb hu mw b fv nk nh l ni nj">  getFirstHeading() {<br/>    return `Webpack Starter page`;<br/>  }</span><span id="56fa" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nu"><img src="../Images/b612c103d3d389f13cc56f3a807b5583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YnxTXmGKZ9M1Qbgwml7Euw.png"/></div></div></figure><p id="e385" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们需要将它导入到我们的<code class="eh mt mu mv mw b">index.js</code>文件中。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="a075" class="nf lb hu mw b fv ng nh l ni nj">import { Header } from './app/header';</span><span id="9261" class="nf lb hu mw b fv nk nh l ni nj">let header = new Header();</span><span id="5500" class="nf lb hu mw b fv nk nh l ni nj">let firstHeading = header.getFirstHeading();</span><span id="bd44" class="nf lb hu mw b fv nk nh l ni nj">console.log(firstHeading);</span></pre><p id="c5a0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们只是简单地导入<code class="eh mt mu mv mw b">header</code>并生成一个对象，然后调用它的<code class="eh mt mu mv mw b">getFistHeading</code>方法。</p><p id="d4d7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">运行<code class="eh mt mu mv mw b">npm start</code>，在浏览器中打开<code class="eh mt mu mv mw b"><a class="ae ke" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a></code>。您可以看到以下结果:</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nu"><img src="../Images/7828becf863cb65fbc293adfbdab0ada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ssxy1mIRrvCdQ-iUyTd1Ag.png"/></div></div></figure><p id="940a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv"> b .将类型脚本编译成ES 5 </strong></p><p id="94cf" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">所以一切都在按预期运行。让我们开始编译我们的<code class="eh mt mu mv mw b">typescript</code>到<code class="eh mt mu mv mw b">ES5</code>。为此，我们只需要安装依赖关系，并改变现有的规则。首先，安装依赖项</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="b108" class="nf lb hu mw b fv ng nh l ni nj">npm i @babel/preset-typescript typescript -D</span></pre><p id="e3b7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们更改了刚刚为ES 6转换编写的规则:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="0751" class="nf lb hu mw b fv ng nh l ni nj">module: {</span><span id="143c" class="nf lb hu mw b fv nk nh l ni nj">rules: [</span><span id="660e" class="nf lb hu mw b fv nk nh l ni nj"> {</span><span id="4b0f" class="nf lb hu mw b fv nk nh l ni nj">   test: [/.js$|.ts$/],</span><span id="882e" class="nf lb hu mw b fv nk nh l ni nj">   exclude: /(node_modules)/,</span><span id="09e8" class="nf lb hu mw b fv nk nh l ni nj">   use: {</span><span id="175b" class="nf lb hu mw b fv nk nh l ni nj">     loader: 'babel-loader',</span><span id="a247" class="nf lb hu mw b fv nk nh l ni nj">     options: {</span><span id="d06b" class="nf lb hu mw b fv nk nh l ni nj">      presets: [</span><span id="92d1" class="nf lb hu mw b fv nk nh l ni nj">       '@babel/preset-env',</span><span id="53d5" class="nf lb hu mw b fv nk nh l ni nj">       '@babel/typescript'</span><span id="490a" class="nf lb hu mw b fv nk nh l ni nj">      ]<br/>    }<br/>   }<br/>  }<br/> ]<br/>}</span></pre><p id="376f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们还需要在<code class="eh mt mu mv mw b">root</code>目录中添加一个<code class="eh mt mu mv mw b">tsconfig.json</code>文件。点击了解更多关于<code class="eh mt mu mv mw b">tsconfig.json</code>和<a class="ae ke" href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="3c6a" class="nf lb hu mw b fv ng nh l ni nj">{</span><span id="3f5b" class="nf lb hu mw b fv nk nh l ni nj">"compilerOptions": {</span><span id="2e68" class="nf lb hu mw b fv nk nh l ni nj">  "target": "esnext",</span><span id="5a5e" class="nf lb hu mw b fv nk nh l ni nj">  "moduleResolution": "node",</span><span id="7d8b" class="nf lb hu mw b fv nk nh l ni nj">  "allowJs": true,</span><span id="0e39" class="nf lb hu mw b fv nk nh l ni nj">  "noEmit": true,</span><span id="e44d" class="nf lb hu mw b fv nk nh l ni nj">  "strict": true,</span><span id="c431" class="nf lb hu mw b fv nk nh l ni nj">  "isolatedModules": true,</span><span id="dc32" class="nf lb hu mw b fv nk nh l ni nj">  "esModuleInterop": true,</span><span id="2a06" class="nf lb hu mw b fv nk nh l ni nj">  "baseUrl": ".",</span><span id="a4c8" class="nf lb hu mw b fv nk nh l ni nj"> },</span><span id="aa0e" class="nf lb hu mw b fv nk nh l ni nj">"include": [</span><span id="53a3" class="nf lb hu mw b fv nk nh l ni nj">  "src/**/*"</span><span id="5d43" class="nf lb hu mw b fv nk nh l ni nj"> ],</span><span id="d011" class="nf lb hu mw b fv nk nh l ni nj">"exclude": [</span><span id="ac47" class="nf lb hu mw b fv nk nh l ni nj">  "node_modules",</span><span id="58ae" class="nf lb hu mw b fv nk nh l ni nj">  "**/*.spec.ts"</span><span id="0e58" class="nf lb hu mw b fv nk nh l ni nj"> ]</span><span id="deda" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="a8f3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">仅此而已。它准备好测试了。我们将用测试标题的同样方法来测试它。</p><p id="a513" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们将在<code class="eh mt mu mv mw b">src/app/</code>中创建一个文件<code class="eh mt mu mv mw b">footer.ts</code>并添加以下内容。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="496c" class="nf lb hu mw b fv ng nh l ni nj">export class Footer {<br/>  footertext: string;</span><span id="862c" class="nf lb hu mw b fv nk nh l ni nj">  constructor() {<br/>   console.log(`This is Footer constructor`);<br/>   this.footertext = `Demo for webpack 4 set up`;<br/>  }</span><span id="a0a6" class="nf lb hu mw b fv nk nh l ni nj">  getFooterText(): string {<br/>   return this.footertext<br/>  }<br/>}</span></pre><p id="cd53" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们需要在<code class="eh mt mu mv mw b">index.js</code>中导入它，就像我们在<code class="eh mt mu mv mw b">header.js</code>模块中做的那样。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="19df" class="nf lb hu mw b fv ng nh l ni nj">import { Footer } from './app/footer';</span><span id="38b9" class="nf lb hu mw b fv nk nh l ni nj">......</span><span id="51fa" class="nf lb hu mw b fv nk nh l ni nj">let footer = new Footer();</span><span id="036f" class="nf lb hu mw b fv nk nh l ni nj">let footerText = footer.getFooterText();</span><span id="23d0" class="nf lb hu mw b fv nk nh l ni nj">console.log(footerText);</span><span id="a217" class="nf lb hu mw b fv nk nh l ni nj">.......</span></pre><p id="7b03" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们运行它。<code class="eh mt mu mv mw b">npm start</code>并导航至<code class="eh mt mu mv mw b">http://localhost:8080.</code></p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nu"><img src="../Images/f31e4227c1c3893f97747449a45b30c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dUbL83ojHEY85K88nzUBlA.png"/></div></div></figure></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="1343" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated"><strong class="ak"> 8。与CSS和SCSS合作</strong></h1><p id="6b44" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">为了加载CSS样式，我们需要两个加载器<code class="eh mt mu mv mw b">css-loader</code>和<code class="eh mt mu mv mw b">style-loader</code>。</p><p id="5768" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh mt mu mv mw b">css-loader</code>获取我们的应用程序中引用的所有样式，并将其转换为字符串。<code class="eh mt mu mv mw b">style-loader</code>将该字符串作为输入，放入<code class="eh mt mu mv mw b">index.html</code>的<code class="eh mt mu mv mw b">style</code>标签中。要安装依赖项:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="ecc4" class="nf lb hu mw b fv ng nh l ni nj">npm i css-loader style-loader -D </span></pre><p id="07f8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们需要编写一个匹配所有<code class="eh mt mu mv mw b">.css</code>扩展的规则，并使用这些加载器将它们加载到<code class="eh mt mu mv mw b">index.html</code>文件中。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="2232" class="nf lb hu mw b fv ng nh l ni nj">module: {</span><span id="2a8b" class="nf lb hu mw b fv nk nh l ni nj">......</span><span id="6f2a" class="nf lb hu mw b fv nk nh l ni nj">rules: [</span><span id="1412" class="nf lb hu mw b fv nk nh l ni nj">.....<br/>{                <br/>  test: [/.css$/],                <br/>  use:[                    <br/>   'style-loader',                  <br/>   'css-loader'<br/>  ]            <br/>}</span><span id="71f8" class="nf lb hu mw b fv nk nh l ni nj">]</span><span id="6cc0" class="nf lb hu mw b fv nk nh l ni nj">......<br/>}</span></pre><p id="3a58" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们在<code class="eh mt mu mv mw b">src</code>文件夹中创建一个<code class="eh mt mu mv mw b">style.css</code>文件，并将一些样式放入其中。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nv"><img src="../Images/b4d9b38f42c2c1fccaa58bd8331d2eb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e6fXma-8tk9eC6XeI5OrIQ.png"/></div></div></figure><p id="3ba3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们需要将<code class="eh mt mu mv mw b">style.css</code>导入到<code class="eh mt mu mv mw b">index.js</code>中。将以下代码放入<code class="eh mt mu mv mw b">index.js</code></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="33cb" class="nf lb hu mw b fv ng nh l ni nj">import '../src/style.css';</span></pre><p id="c67a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在停止开发服务器并再次运行它<code class="eh mt mu mv mw b">npm start</code>。导航至<code class="eh mt mu mv mw b">http://localhost:8080</code>。你可以看到你的<code class="eh mt mu mv mw b">h3</code>是红色的，如果你检查DOM，你会发现添加了一个样式标签，里面有你的样式。:)</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nw"><img src="../Images/f2589d4ae4e2045b051d1264e705a9be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DdXw11QXBUXqeCZvGkkcgQ.png"/></div></div></figure><p id="3e62" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">将SCSS转换为CSS </strong></p><p id="8a30" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为此，我们需要添加两个依赖项，即<code class="eh mt mu mv mw b">node-sass</code>和<code class="eh mt mu mv mw b">sass-loader</code>。<code class="eh mt mu mv mw b">sass-loader</code>只需使用<code class="eh mt mu mv mw b">node-sass</code>绑定将<code class="eh mt mu mv mw b">.scss</code>文件转换为<code class="eh mt mu mv mw b">.css</code>。如果你愿意，你可以在这里更深入地了解node-sass。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="47ac" class="nf lb hu mw b fv ng nh l ni nj">npm i node-sass sass-loader -D</span></pre><p id="5afb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们需要改变我们的规则来匹配一个<code class="eh mt mu mv mw b">.scss</code>文件。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="3dc2" class="nf lb hu mw b fv ng nh l ni nj">module: {</span><span id="f3c6" class="nf lb hu mw b fv nk nh l ni nj">......</span><span id="bc5d" class="nf lb hu mw b fv nk nh l ni nj">rules: [</span><span id="ca50" class="nf lb hu mw b fv nk nh l ni nj">.....<br/>{                <br/>  test: [/.css$|.scss$/],                <br/>  use:[                    <br/>   'style-loader',                  <br/>   'css-loader',<br/>   'sass-loader'<br/>  ]            <br/>}</span><span id="233d" class="nf lb hu mw b fv nk nh l ni nj">]</span><span id="d3dd" class="nf lb hu mw b fv nk nh l ni nj">......<br/>}</span></pre><p id="bb94" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">始终记住装载机的装载顺序很重要。所以不要改变顺序。让我们为scss文件创建文件夹结构。所以用截图中的代码创建<code class="eh mt mu mv mw b">src/styles/scss</code>目录和<code class="eh mt mu mv mw b">main.scss</code>文件。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/671b0f8383d1964bac5c42e5a2e782ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g_mHVQE6SDlEhnrNLut3_g.png"/></div></div></figure><p id="f129" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在导入到<code class="eh mt mu mv mw b">index.js</code></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="37e6" class="nf lb hu mw b fv ng nh l ni nj">import './styles/scss/main.scss';</span></pre><p id="b693" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在是运行代码的时候了。<code class="eh mt mu mv mw b">npm start</code>并转到<code class="eh mt mu mv mw b"><a class="ae ke" href="http://localhost:8080." rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a></code>和<a class="ae ke" href="http://localhost:8080." rel="noopener ugc nofollow" target="_blank">。你可以看到结果。</a></p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nw"><img src="../Images/6fb930e46baeb815ba34bf6256742a98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kIK6o7Rlfu9iIZX3k3thUg.png"/></div></div></figure><p id="643b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">将所有样式提取到一个文件中</strong></p><p id="aa63" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">有时我们不想在内联样式标签中添加样式，而是想把它放在一个单独的样式文件中。为此我们有一个插件叫做<a class="ae ke" href="https://www.npmjs.com/package/mini-css-extract-plugin" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">迷你css-extract-plugin </strong> </a>。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="0500" class="nf lb hu mw b fv ng nh l ni nj">npm i mini-css-extract-plugin -D</span></pre><p id="f8fe" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们需要像往常一样更新我们的<code class="eh mt mu mv mw b">webpack.config.js</code>文件。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="55e3" class="nf lb hu mw b fv ng nh l ni nj">....<br/>const MiniCssExtractPlugin = require('mini-css-extract-plugin');</span><span id="ad0a" class="nf lb hu mw b fv nk nh l ni nj">....</span><span id="e291" class="nf lb hu mw b fv nk nh l ni nj">module.exports = {</span><span id="c73e" class="nf lb hu mw b fv nk nh l ni nj">.......</span><span id="67f4" class="nf lb hu mw b fv nk nh l ni nj">module: {</span><span id="5c92" class="nf lb hu mw b fv nk nh l ni nj">rules: [</span><span id="1683" class="nf lb hu mw b fv nk nh l ni nj">......</span><span id="1163" class="nf lb hu mw b fv nk nh l ni nj"> {</span><span id="0dbb" class="nf lb hu mw b fv nk nh l ni nj">   test: [/.css$|.scss$/],</span><span id="a4a1" class="nf lb hu mw b fv nk nh l ni nj">   use: [</span><span id="4026" class="nf lb hu mw b fv nk nh l ni nj">    MiniCssExtractPlugin.loader,</span><span id="52b4" class="nf lb hu mw b fv nk nh l ni nj">    'css-loader',</span><span id="5f75" class="nf lb hu mw b fv nk nh l ni nj">   'sass-loader'</span><span id="56fc" class="nf lb hu mw b fv nk nh l ni nj">  ]</span><span id="f63b" class="nf lb hu mw b fv nk nh l ni nj"> }</span><span id="7ec8" class="nf lb hu mw b fv nk nh l ni nj">]</span><span id="03b3" class="nf lb hu mw b fv nk nh l ni nj">},</span><span id="7a28" class="nf lb hu mw b fv nk nh l ni nj">plugins: [</span><span id="d7df" class="nf lb hu mw b fv nk nh l ni nj">.........</span><span id="0ce2" class="nf lb hu mw b fv nk nh l ni nj">new MiniCssExtractPlugin({<br/> filename: 'style.css'<br/>})</span><span id="65e0" class="nf lb hu mw b fv nk nh l ni nj">]</span><span id="2114" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="49d1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，如果您运行<code class="eh mt mu mv mw b">npm start</code>并导航至<code class="eh mt mu mv mw b">http://localhost:8080</code>。您可以看到以下结果:</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nw"><img src="../Images/3f5f39b7917c3d719197b98c28163358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g8SwyUCG8wRPpK2EVhD-Iw.png"/></div></div></figure><p id="a547" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">正如你在inspector窗口中看到的，添加了一个指向外部css文件的链接，而不是内联样式标签。</p><p id="6e4b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">添加后置css </strong></p><p id="e8fd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><a class="ae ke" href="https://github.com/postcss/postcss" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">Post css</strong></a><strong class="ji hv"/>是帮助我们用js插件转化CSS。<a class="ae ke" href="https://github.com/postcss/autoprefixer" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">自动前缀器</strong> </a>是流行的post css插件，帮助我们添加浏览器前缀。要安装两者的依赖关系:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="4cd6" class="nf lb hu mw b fv ng nh l ni nj">npm i postcss-loader autoprefixer -D</span></pre><p id="5ebc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在根目录下创建一个<code class="eh mt mu mv mw b">postcss.config.js</code>并跟随代码。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="0131" class="nf lb hu mw b fv ng nh l ni nj">module.exports = {  <br/> plugins: [    <br/>    require('autoprefixer')  <br/>  ]<br/>}</span></pre><p id="4714" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在去<code class="eh mt mu mv mw b">src/styles/scss/main.scss</code>更新<code class="eh mt mu mv mw b">h3</code>风格。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="65bc" class="nf lb hu mw b fv ng nh l ni nj">h3 {</span><span id="1b0e" class="nf lb hu mw b fv nk nh l ni nj">background-color: $h3-bg-color;</span><span id="0286" class="nf lb hu mw b fv nk nh l ni nj"><strong class="mw hv">user-select: none;</strong></span><span id="3842" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="9f6e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh mt mu mv mw b">user-select</code>阻止文本选择，此属性需要浏览器前缀。现在，如果你去终端运行<code class="eh mt mu mv mw b">npm run dev</code>并去生成的<code class="eh mt mu mv mw b">dist/main.css</code>，你会看到<code class="eh mt mu mv mw b">user-select</code>是自动前缀。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ny"><img src="../Images/d079ada124d349c3ae170aafc4f11f07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aPEVHeADRKO9JhTMPH2ayg.png"/></div></div></figure></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="e32f" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated"><strong class="ak"> 10。加载静态资源</strong></h1><p id="2c99" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">为了加载静态内容，我们需要一个名为<code class="eh mt mu mv mw b">file-loader</code>的加载器。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="5eba" class="nf lb hu mw b fv ng nh l ni nj">npm i file-loader -D</span></pre><p id="7dd3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们需要修改配置文件中的规则。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="201b" class="nf lb hu mw b fv ng nh l ni nj">rules: {<br/>....<br/>    {<br/>        test: /\.(png|jpg|gif|svg)$/,<br/>        use: [<br/>          {<br/>            loader: 'file-loader',<br/>            options: {<br/>              name: '[name].[ext]',<br/>              outputPath: 'assets/images'<br/>            }<br/>          }<br/>        ]<br/>      }<br/>.....<br/>}</span></pre><p id="7961" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了测试，创建一个目录<code class="eh mt mu mv mw b">src/assets/images</code>并放一些图片。我正在放一个webpack的<code class="eh mt mu mv mw b">.gif</code>。你可以从<a class="ae ke" href="https://github.com/thejsdeveloper/webpack4-setup/blob/master/src/assets/images/webpack.gif" rel="noopener ugc nofollow" target="_blank">这里</a>下载。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nz"><img src="../Images/839fd54814e52bfe23905b203ed463e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YcwBudhqDOtK8vsMZMOBhg.png"/></div></div></figure><p id="ae63" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们需要将它导入到我们的<code class="eh mt mu mv mw b">index.js</code>中。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="9b0d" class="nf lb hu mw b fv ng nh l ni nj">import webpackgif from './assets/images/webpack.gif';</span></pre><p id="1d1c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们在<code class="eh mt mu mv mw b">index.html</code>中创建一个<code class="eh mt mu mv mw b">img</code>标签。我们将从<code class="eh mt mu mv mw b">javascript</code>文件中设置<code class="eh mt mu mv mw b">src</code>属性。将以下代码添加到<code class="eh mt mu mv mw b">index.html</code> body标签中。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="c365" class="nf lb hu mw b fv ng nh l ni nj">&lt;img id="webpack-gif" alt="webpack-gif"&gt;</span></pre><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff oa"><img src="../Images/0522ce5513fb3424ac10079eff0eb0d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n92PHlKaoS69Yac-XJDZLw.png"/></div></div></figure><p id="8516" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">将以下代码添加到<code class="eh mt mu mv mw b">index.js</code>。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="471e" class="nf lb hu mw b fv ng nh l ni nj">.....<br/>import webpackgif from './assets/images/webpack.gif';<br/>.......</span><span id="ee88" class="nf lb hu mw b fv nk nh l ni nj">// setting the source of img</span><span id="338b" class="nf lb hu mw b fv nk nh l ni nj">document.getElementById('webpack-gif').setAttribute('src', webpackgif);</span></pre><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ob"><img src="../Images/ed6498d472602dabc0fe7960c1b67159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G9rJCdVTdeqX7yAPB1XP-g.png"/></div></div></figure><p id="67bb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在如果你运行<code class="eh mt mu mv mw b">npm start</code>并导航到<code class="eh mt mu mv mw b"><a class="ae ke" href="http://localhost:8080.You" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a></code>T36。您可以看到以下结果:</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/83c2215548afe8e59be9bba96789a25c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Bo8hL-EIadvS85W7UhSlg.png"/></div></div></figure><p id="12fb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你可能想知道为什么我没有把<code class="eh mt mu mv mw b">img</code>的<code class="eh mt mu mv mw b">src</code>直接添加到html中？我为什么要通过JavaSript添加？实际上<code class="eh mt mu mv mw b">file-loader</code>只加载那些被我们的模块引用的资产(在JavaScript或Typescript文件中)。</p><p id="6af4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果我直接添加到html中，删除图片导入。我们将得到以下结果:</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/fb18134aaeeba319e4532d5ba0554760.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ru2XSeMQ6igKaWTHnulgxg.png"/></div></div></figure><p id="a86a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">所以为了克服这个问题，我们需要一个插件叫做<a class="ae ke" href="https://github.com/webpack-contrib/copy-webpack-plugin" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">copy-web pack-plugin</strong></a><strong class="ji hv">。</strong>这会将我们的静态资产复制到我们指定的文件夹中。</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="8064" class="nf lb hu mw b fv ng nh l ni nj">npm i copy-webpack-plugin -D</span></pre><p id="8e0c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">更新配置文件:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="b7ec" class="nf lb hu mw b fv ng nh l ni nj">....</span><span id="67d7" class="nf lb hu mw b fv nk nh l ni nj">const CopyWebpackPlugin = require('copy-webpack-plugin');</span><span id="ab2a" class="nf lb hu mw b fv nk nh l ni nj">......</span><span id="e949" class="nf lb hu mw b fv nk nh l ni nj">module.exports = {<br/>.....<br/>plugins:[<br/>{<br/>  new CopyWebpackPlugin([{</span><span id="3a38" class="nf lb hu mw b fv nk nh l ni nj">     from:'./src/assets/images',</span><span id="65e2" class="nf lb hu mw b fv nk nh l ni nj">      to:'assets/images'</span><span id="f439" class="nf lb hu mw b fv nk nh l ni nj">   }])<br/>}<br/>.....</span><span id="9c66" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="69ef" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，如果您运行<code class="eh mt mu mv mw b">npm start</code>并导航到<code class="eh mt mu mv mw b">http://localhost:8080</code>。您可以看到以下结果:</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ob"><img src="../Images/a699aae2245c56761710a82bc9774ea3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nmfUwChFPSMo6meVLQOYQg.png"/></div></div></figure></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="e5a8" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated">11。在不同的环境中工作</h1><p id="897d" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">当我们为最终部署准备资产和文件时，我们需要尽可能地减少捆绑包的大小。出于这个原因，我们需要缩小我们的css和Javascript文件。我们可以用一个单一配置来实现，但是将配置文件分成不同的文件是一个很好的实践，这样就有了清晰的责任划分。由于这个原因，通常会有以下文件:</p><p id="8f76" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">a.webpack.common.config.js</p><p id="41ca" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">b.webpack.dev .配置. js</p><p id="e7a6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">c.webpack.prod.config.js</p><p id="e95c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">顾名思义，公共文件将包含所有的公共配置。我们将使用<a class="ae ke" href="https://github.com/survivejs/webpack-merge" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">web pack-merge</strong></a><strong class="ji hv"/>库将通用配置合并到开发和生产配置中。所以让我们安装<strong class="ji hv"> webpack-merge </strong></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="6b5c" class="nf lb hu mw b fv ng nh l ni nj">npm i webpack-merge -D</span></pre><p id="7cf6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们将在我们的根文件夹中创建一个<code class="eh mt mu mv mw b">config</code>目录，并在其中创建上述文件。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div class="fe ff oc"><img src="../Images/782fd76106e181b910cd8841b1c732a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*k_QrMG6qVZtqcbK4OKgtfg.png"/></div></figure><p id="20d3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们将把<code class="eh mt mu mv mw b">webpack.config.js</code>文件的所有内容复制到<code class="eh mt mu mv mw b">webpack.common.config.js</code>文件中。</p><p id="d3fb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">更新<code class="eh mt mu mv mw b">webpack.common.config.js</code>文件的输出如下:(dist改为../距离)</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="7776" class="nf lb hu mw b fv ng nh l ni nj">output: {</span><span id="42d1" class="nf lb hu mw b fv nk nh l ni nj"><strong class="mw hv">path: path.resolve(__dirname, '../dist'),</strong></span><span id="cd17" class="nf lb hu mw b fv nk nh l ni nj">filename: '[name].js'</span><span id="8825" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="8fea" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们将把下面的代码放到<code class="eh mt mu mv mw b">webpack.dev.config.js</code></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="e88e" class="nf lb hu mw b fv ng nh l ni nj">const merge = require('webpack-merge')</span><span id="4ff8" class="nf lb hu mw b fv nk nh l ni nj">const webpackBaseConfig = require('./webpack.common.config.js')</span><span id="11fc" class="nf lb hu mw b fv nk nh l ni nj">module.exports = merge(webpackBaseConfig, {})</span></pre><p id="13d2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">删除<code class="eh mt mu mv mw b">webpack.config.js</code>的内容，放入以下代码</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="d804" class="nf lb hu mw b fv ng nh l ni nj">const environment = (process.env.NODE_ENV || 'development').trim();</span><span id="748b" class="nf lb hu mw b fv nk nh l ni nj">if (environment === 'development') {</span><span id="052e" class="nf lb hu mw b fv nk nh l ni nj">module.exports = require('./config/webpack.dev.config.js');</span><span id="faa6" class="nf lb hu mw b fv nk nh l ni nj">} else {</span><span id="f175" class="nf lb hu mw b fv nk nh l ni nj">module.exports = require('./config/webpack.prod.config.js');</span><span id="aced" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="4d88" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这段代码基本上是说，如果NODE_ENV是development，那么默认情况下使用<code class="eh mt mu mv mw b">webpack.dev.config.js</code> else <code class="eh mt mu mv mw b">webpack.prod.config.js</code>，它将使用<code class="eh mt mu mv mw b">development</code>。</p><p id="0778" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">设置环境变量</strong></p><p id="eeea" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了设置<code class="eh mt mu mv mw b">dev</code>和<code class="eh mt mu mv mw b">prod</code>的环境变量，我们需要一个名为<code class="eh mt mu mv mw b">cross-env</code>的npm包。这个npm包确保环境变量在每个平台上都设置正确。你可以在这里阅读更多关于这个<a class="ae ke" href="https://www.npmjs.com/package/cross-env" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="6dc0" class="nf lb hu mw b fv ng nh l ni nj">npm i cross-env -D</span></pre><p id="8e5a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在更改npm脚本:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="3865" class="nf lb hu mw b fv ng nh l ni nj">"scripts": {</span><span id="41d7" class="nf lb hu mw b fv nk nh l ni nj">"build:dev": "cross-env NODE_ENV=development webpack --mode development",</span><span id="ac77" class="nf lb hu mw b fv nk nh l ni nj">"build:prod": "cross-env NODE_ENV=production webpack --mode production",</span><span id="1e01" class="nf lb hu mw b fv nk nh l ni nj">"start": "webpack-dev-server --mode development"</span><span id="cb74" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="d5da" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">通过插件清除分发文件夹</strong></p><p id="455f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您可能已经注意到，每当我运行构建命令时，我都会要求您手动删除<code class="eh mt mu mv mw b">dist</code>文件夹。我们可以通过使用另一个名为<a class="ae ke" href="https://www.npmjs.com/package/clean-webpack-plugin" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">clean-web pack-plugin</strong></a><strong class="ji hv">的插件来克服这个问题。</strong></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="e110" class="nf lb hu mw b fv ng nh l ni nj">npm i clean-webpack-plugin -D</span></pre><p id="1d2a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们需要修改我们的公共配置:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="c353" class="nf lb hu mw b fv ng nh l ni nj">const { CleanWebpackPlugin }   = require('clean-webpack-plugin');</span><span id="27bb" class="nf lb hu mw b fv nk nh l ni nj">module.exports = {</span><span id="97b3" class="nf lb hu mw b fv nk nh l ni nj">....<br/>plugins: [<br/>....<br/> new CleanWebpackPlugin()</span><span id="76e6" class="nf lb hu mw b fv nk nh l ni nj">.....<br/>]</span><span id="ef91" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="2236" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们稍后将继续生产配置。让我们先测试开发配置。</p><p id="d867" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在运行<code class="eh mt mu mv mw b">npm run build:dev</code>。你可以看到<code class="eh mt mu mv mw b">dist</code>文件夹生成了所有需要的资产。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div class="fe ff oc"><img src="../Images/b0c1e63084a16b7b90503514f5119d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*FXYl33xYesguKF1ovLIZnw.png"/></div></figure><p id="4220" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">准备生产资源</strong></p><p id="a986" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了简化Javascript，我们需要一个名为<a class="ae ke" href="https://github.com/webpack-contrib/uglifyjs-webpack-plugin" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">的插件</strong></a></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="12a6" class="nf lb hu mw b fv ng nh l ni nj">npm i uglifyjs-webpack-plugin -D</span></pre><p id="4edf" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于css优化，我们需要另一个插件叫做<a class="ae ke" href="https://github.com/NMFR/optimize-css-assets-webpack-plugin" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">优化-CSS-资产-网络包-插件</strong> </a></p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="d575" class="nf lb hu mw b fv ng nh l ni nj">npm i optimize-css-assets-webpack-plugin -D</span></pre><p id="0ff7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">安装此更新后<code class="eh mt mu mv mw b">webpack.prod.config.js</code>:</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="8cd8" class="nf lb hu mw b fv ng nh l ni nj">const merge = require('webpack-merge');</span><span id="500b" class="nf lb hu mw b fv nk nh l ni nj">const UglifyJsPlugin = require('uglifyjs-webpack-plugin');</span><span id="ad54" class="nf lb hu mw b fv nk nh l ni nj">const OptimizeCSSAssetsPlugin = require('optimize-css-assets-webpack-plugin');</span><span id="f73d" class="nf lb hu mw b fv nk nh l ni nj">const webpackBaseConfig = require('./webpack.common.config.js');</span><span id="39ce" class="nf lb hu mw b fv nk nh l ni nj">module.exports = merge(webpackBaseConfig, {</span><span id="1c8e" class="nf lb hu mw b fv nk nh l ni nj"> optimization: {</span><span id="795e" class="nf lb hu mw b fv nk nh l ni nj">   minimizer: [</span><span id="af23" class="nf lb hu mw b fv nk nh l ni nj">     new UglifyJsPlugin(),</span><span id="95cc" class="nf lb hu mw b fv nk nh l ni nj">     new OptimizeCSSAssetsPlugin()</span><span id="0fab" class="nf lb hu mw b fv nk nh l ni nj">   ]</span><span id="1204" class="nf lb hu mw b fv nk nh l ni nj"> }</span><span id="e600" class="nf lb hu mw b fv nk nh l ni nj">});</span></pre><p id="8ee8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在一切都完成了，你可以通过<code class="eh mt mu mv mw b">npm run build:prod</code>生成产品的构建</p><p id="0cec" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您可以看到生产和开发版本中生成的文件大小的差异</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff od"><img src="../Images/e2db5cd3919fa16f035b6fdbce5aea6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HfMO0msZWf0s8kJCrJtP0Q.png"/></div></div></figure><figure class="mx my mz na fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff od"><img src="../Images/9a1968199b601a0ce3d15d5b6ea945ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TikMhWYxiSpwBoXCWpy5_g.png"/></div></div></figure><p id="864b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">大小差异非常小，因为我们没有更大的代码库。</p><p id="392d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们可以做最后一件事，我们可以在生成构建时实现散列。这非常简单，我们只需要在输出文件和迷你css-extract插件中添加[chunkhash]。</p><p id="0ed5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">将通用配置更新为</p><pre class="mx my mz na fq nb mw nc nd aw ne dt"><span id="84e3" class="nf lb hu mw b fv ng nh l ni nj">....<br/>module.exports = {<br/>...<br/> output: {</span><span id="5bfd" class="nf lb hu mw b fv nk nh l ni nj">    path: path.resolve(__dirname, '../dist'),</span><span id="ad72" class="nf lb hu mw b fv nk nh l ni nj">   <strong class="mw hv"> filename: '[name].[chunkhash].js'</strong></span><span id="c0ec" class="nf lb hu mw b fv nk nh l ni nj"> }</span><span id="3156" class="nf lb hu mw b fv nk nh l ni nj">.....</span><span id="899d" class="nf lb hu mw b fv nk nh l ni nj">plugins: [<br/>....<br/> new MiniCssExtractPlugin({</span><span id="0c86" class="nf lb hu mw b fv nk nh l ni nj">   <strong class="mw hv">filename: 'style.[chunkhash].css'</strong></span><span id="82e0" class="nf lb hu mw b fv nk nh l ni nj"> }),</span><span id="abbc" class="nf lb hu mw b fv nk nh l ni nj">...<br/>]</span><span id="d7f3" class="nf lb hu mw b fv nk nh l ni nj">}</span></pre><p id="e585" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，如果您通过<code class="eh mt mu mv mw b">npm run build:prod</code>生成构建，您将看到一个散列附加在文件的末尾。</p><figure class="mx my mz na fq iv fe ff paragraph-image"><div class="fe ff oe"><img src="../Images/8ee008a2f075db9da238bf19414a83ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*_3AsIt33hflrvnPSYLGQow.png"/></div></figure><p id="4349" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">请提出任何改进建议，并分享、订阅和鼓掌。谢谢:)</p></div></div>    
</body>
</html>