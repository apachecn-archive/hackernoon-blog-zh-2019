<html>
<head>
<title>Installing Elixir and Phoenix</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">安装仙丹和凤凰</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/installing-elixir-and-phoenix-1a35e82c58bf#2019-02-02">https://medium.com/hackernoon/installing-elixir-and-phoenix-1a35e82c58bf#2019-02-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="a2ff" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">今晚有一点空闲，我想我应该去看看长生不老药和凤凰。Elixir 是一种相对较新的语言，运行在 Erlang VM 上，Phoenix 是它的 web 框架。</p><p id="f60b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在过去的几年里，黑客新闻上有很多关于<a class="ae jp" href="https://hackernoon.com/tagged/elixir" rel="noopener ugc nofollow" target="_blank">长生不老药</a>的讨论。众所周知，WhatsApp 在其后端运行 Erlang，这是它如此出色地扩展的关键因素。这是我对它感兴趣的主要原因。</p><p id="a92d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不久前，我看了凯文·彼得写的<a class="ae jp" href="https://inquisitivedeveloper.com/tag/lwm-elixir/" rel="noopener ugc nofollow" target="_blank">跟我学:长生不老药</a>博客系列，了解了更多关于长生不老药的知识。我推荐这个系列——我只看了前几章，它已经给了我关于长生不老药的很好的背景知识。</p><p id="931e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以我想我应该安装长生不老药来尝试一下。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff jq"><img src="../Images/6a4a6b4f6b10ef78ff906d77f243d975.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/0*jDqR56j_4VFoEpcA.png"/></div></figure><h2 id="8413" class="jy jz hu bd ka kb kc kd ke kf kg kh ki jc kj kk kl jg km kn ko jk kp kq kr ks dt translated">Elixir 安装—使用版本管理器</h2><p id="e2ce" class="pw-post-body-paragraph ir is hu it b iu kt iw ix iy ku ja jb jc kv je jf jg kw ji jj jk kx jm jn jo hn dt translated">所以我的目标是安装 Elixir(和 Erlang VM)。过去几年我一直在使用 nodejs，我非常喜欢<code class="eh ky kz la lb b">nvm</code>在您的环境中处理 node 的安装和版本切换的方式。从之前的 PHP 世界来看，这是一个巨大的改进，因为 PHP 是在系统级安装的，很难调整。</p><p id="c427" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正因为如此，我避开了用操作系统的包管理器安装的默认指令(<code class="eh ky kz la lb b">brew</code>/<code class="eh ky kz la lb b">pacman</code>/<code class="eh ky kz la lb b">yum</code>/<code class="eh ky kz la lb b">apt-get</code>/等等)。)，又找了类似<code class="eh ky kz la lb b">nvm</code>的东西。</p><p id="30c7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://elixir-lang.org/install.html" rel="noopener ugc nofollow" target="_blank"> Elixir 的安装页面</a>提到了几个版本管理器。在阅读了他们的简历后，我决定选择克尔和基克斯。<code class="eh ky kz la lb b">kerl</code>是一个 Erlang 版本管理器，而<code class="eh ky kz la lb b">kiex</code>的构建类似于 kerl。两者在概念和用法上都和<code class="eh ky kz la lb b">nvm</code>相当相似，这是我想要的。</p><p id="cf29" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了远离系统的包管理器，我简单地下载了<code class="eh ky kz la lb b">kerl</code>并把它移动到我家的一个目录下进行安装:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="ae4c" class="jy jz hu lb b fv lg lh l li lj">curl -O <a class="ae jp" href="https://raw.githubusercontent.com/kerl/kerl/master/kerl" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/kerl/kerl/master/kerl</a><br/>chmod a+x kerl<br/>mkdir ~/.kerl<br/>mv kerl ~/.kerl</span></pre><p id="3d55" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后我编辑我的<code class="eh ky kz la lb b">.bashrc</code>文件来添加这一行:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="900c" class="jy jz hu lb b fv lg lh l li lj">export PATH=$HOME/.kerl:$PATH</span></pre><p id="354f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在<code class="eh ky kz la lb b">kerl</code>在我的 bash 上可用了。</p><p id="1ad2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，安装<code class="eh ky kz la lb b">kiex</code>也很容易，类似于<code class="eh ky kz la lb b">nvm</code>如何从他们的 repo 运行脚本:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="b563" class="jy jz hu lb b fv lg lh l li lj">curl -sSL <a class="ae jp" href="https://raw.githubusercontent.com/taylor/kiex/master/install" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/taylor/kiex/master/install</a> | bash -s</span></pre><p id="c71b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在<code class="eh ky kz la lb b">kerl</code>和<code class="eh ky kz la lb b">kiex</code>都准备好了！</p><h2 id="08e6" class="jy jz hu bd ka kb kc kd ke kf kg kh ki jc kj kk kl jg km kn ko jk kp kq kr ks dt translated">安装一个版本的 Erlang VM 和 Elixir</h2><p id="83aa" class="pw-post-body-paragraph ir is hu it b iu kt iw ix iy ku ja jb jc kv je jf jg kw ji jj jk kx jm jn jo hn dt translated">关于安装 Erlang VM，需要注意的是您必须构建它。如果你运行<code class="eh ky kz la lb b">kerl list releases</code>,然后简单地运行<code class="eh ky kz la lb b">kerl install 21.2</code>,你会遇到一个错误，说它没有建立。所以你会想跑:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="142e" class="jy jz hu lb b fv lg lh l li lj">kerl build 21.2</span></pre><p id="3983" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将开始下载 Erlang 源代码并编译它。这需要一段时间。(在我的笔记本电脑上花了 25 分钟。下载 80+mb，花了几分钟，剩下的就是编译了。)在编译过程中，没有进度条可能是个问题，所以如果您想知道它是否在做任何事情，您可以在一个单独的终端中跟踪构建日志，看看它在做什么:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="1b39" class="jy jz hu lb b fv lg lh l li lj">tail -f ~/.kerl/builds/21.2/otp_build_21.2.log</span></pre><p id="969a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们现在设置的好处是，由于我们将<code class="eh ky kz la lb b">kerl</code>脚本放在了<code class="eh ky kz la lb b">~/.kerl</code>中，它的构建位置自动位于目录中，类似于<code class="eh ky kz la lb b">nvm</code>的操作方式。</p><p id="fb2e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">构建完成后，我们可以进行 kerl 安装:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="cce5" class="jy jz hu lb b fv lg lh l li lj">kerl install 21.2 ~/.kerl/installs/21.2</span></pre><p id="9883" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">安装后，您必须激活它:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="3f05" class="jy jz hu lb b fv lg lh l li lj">. ~/.kerl/installs/21.2/activate</span></pre><p id="2172" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后两步都应该非常快。</p><p id="f460" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">注:使用<code class="eh ky kz la lb b">kerl_deactivate</code>随时取消安装。使用<code class="eh ky kz la lb b">kerl active</code>随时验证激活的安装。</p><p id="23d5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们准备用<code class="eh ky kz la lb b">kiex</code>安装仙丹。我们可以使用<code class="eh ky kz la lb b">kiex list known</code>来查看版本列表，并安装最新版本，如下所示:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="b578" class="jy jz hu lb b fv lg lh l li lj">kiex install 1.8.1</span></pre><p id="871d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，在您当前的环境中安装了一个特定的 Elixir 版本。最后，切换到它来使用它:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="22db" class="jy jz hu lb b fv lg lh l li lj">kiex use 1.8.1</span></pre><p id="cc40" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样！像<code class="eh ky kz la lb b">elixir</code>、<code class="eh ky kz la lb b">iex</code>和<code class="eh ky kz la lb b">mix</code>这样的命令现在应该可以在您的终端上使用了。</p><h2 id="4853" class="jy jz hu bd ka kb kc kd ke kf kg kh ki jc kj kk kl jg km kn ko jk kp kq kr ks dt translated">phoenix——让服务器运行的最快、最少依赖的方式(感受一下)</h2><p id="b264" class="pw-post-body-paragraph ir is hu it b iu kt iw ix iy ku ja jb jc kv je jf jg kw ji jj jk kx jm jn jo hn dt translated">Phoenix framework 真的是功能齐全，所以很自然地，它会默认使用 Postgres，并希望你建立一个数据库等等。要出发了。</p><p id="c0ef" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您想以最快的方式启动并运行 Phoenix 服务器，您可以首先安装 Phoenix:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="c22c" class="jy jz hu lb b fv lg lh l li lj"># install hex, the package manager of elixir<br/>mix local.hex</span><span id="2cce" class="jy jz hu lb b fv lk lh l li lj"># install phoenix<br/>mix archive.install hex phx_new 1.4.0</span></pre><p id="63bb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后创建一个新的 Phoenix 项目，使依赖性最小化:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="f991" class="jy jz hu lb b fv lg lh l li lj">mix phx.new --no-ecto --no-html ~/phoenixtest</span></pre><p id="0f36" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，只需使用<code class="eh ky kz la lb b">cd ~/phoenixtest</code>启动服务器:</p><pre class="jr js jt ju fq lc lb ld le aw lf dt"><span id="7235" class="jy jz hu lb b fv lg lh l li lj">mix phx.server</span></pre><p id="3ed4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您的服务器将启动并运行在 localhost:4000 上！</p><p id="c9a6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">注:<code class="eh ky kz la lb b">GET /</code>的路线会返回错误:)</p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="ll lm l"/></div></figure></div></div>    
</body>
</html>