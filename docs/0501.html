<html>
<head>
<title>How to make a Machine Learning Android Game from scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从零开始制作一款机器学习安卓游戏</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-make-a-machine-learning-android-game-from-scratch-82d9406a7635?source=collection_archive---------9-----------------------#2019-01-20">https://medium.com/hackernoon/how-to-make-a-machine-learning-android-game-from-scratch-82d9406a7635?source=collection_archive---------9-----------------------#2019-01-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="8a7a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们从零开始做一个<strong class="it hv">安卓机器学习游戏</strong>🌟。</p><p id="2af0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你对<strong class="it hv">机器学习</strong>着迷吗？你喜欢<strong class="it hv"> Java还是安卓</strong>？要不要用安卓和机器学习做一个<strong class="it hv">酷的项目？</strong></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/21f08747bac331db0ace5f6e166c2732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jj8HA6hcXWfiRbMk1Swarg.jpeg"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">machine learning</figcaption></figure><p id="afbd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果是，那么你肯定是来对地方了。在这里，我们将制作一个使用机器学习来击败用户的android应用程序。</p><p id="7bf7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">是的，失败！！这意味着当你玩下去的时候，游戏和你的技术会变得越来越专业，所以你最好做好失败的准备。</p><p id="7e2f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但即使输了，你也一定会骄傲。你会问为什么？</p><p id="a01a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">嗯，<strong class="it hv">你让它</strong>学会了，你让它在游戏里专业了。那么，谁是老板？</p><p id="bd40" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">出于开始的目的，让我们从一个简单的游戏开始，可能性较小。我认为像石头、布、剪刀这样的东西就可以了。</p><p id="380b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这篇帖子将帮助你了解如何用<strong class="it hv">机器学习和android </strong>制作一个游戏，这样你就可以制作一个自己的令人惊叹的项目游戏，在这之后！</p><p id="a204" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们通过一个简单的流程图来深入了解我们的应用程序将如何发展。</p><p id="cf5e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Android应用程序→给出石头/布/剪刀的选项→用户选择其中一个→如果是第一次，则由计算机随机选择→否则，计算机分析用户输入，并使用统计选择获胜概率更大的一个→游戏继续，计算机变得更专业。</p><p id="2799" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是我们的应用程序流程图，当我们陷入困境时，它会给我们指引方向。</p><p id="a159" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="kf">简单开发者提示:</em> </strong> <em class="kf">在制作一个app之前，一定要做一个简单的流程图，在制作的过程中指导你的旅程。</em></p><blockquote class="kg kh ki"><p id="e571" class="ir is kf it b iu iv iw ix iy iz ja jb kj jd je jf kk jh ji jj kl jl jm jn jo hn dt translated">现在让我们深入一些代码。</p></blockquote><p id="fc2e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在Android Studio或你选择的IDE上开始一个新项目。头朝着<strong class="it hv">MainActivity.java的文件</strong>。我们将首先从Java代码开始。</p><p id="edfe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们首先初始化一些变量和标志。因此，在您的<strong class="it hv"> MainActivity </strong>中添加以下代码。</p><pre class="jq jr js jt fq km kn ko kp aw kq dt"><span id="799e" class="kr ks hu kn b fv kt ku l kv kw">/*first two are for previous result second two are for recent result<br/> *results[0][x][0][x] 0 at index 0 or 2 is a win<br/> *results[1][x][1][x] 1 at index 0 or 2 is a tie<br/> *results[2][x][2][x] 2 at index 0 or 2 is a loss<br/> *results[x][0][x][0] 0 at index 1 or 3 is for rock<br/> *results[x][1][x][1] 1 at index 1 or 3 is for scissors<br/> *results[x][2][x][2] 2 at index 1 or 3 is for paper*/<br/><br/>private int[][][][][][] results6D = new int[3][3][3][3][3][3];<br/>private int[][][][] results4D = new int[3][3][3][3];<br/>private int[][] results2D = new int [3][3];<br/><br/>private int lastResult =- 1;<br/>private int lastCompMove =- 1;<br/><br/>private int secondResult =- 1;<br/>private int secondCompMove =- 1;<br/><br/>private int status = 0;</span></pre><p id="530d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了更好的理解，我在代码中做了注释。我们将使用用户最近的选择来训练我们的<strong class="it hv">机器学习模型</strong>。</p><p id="1b2e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们应该添加代码，让用户选择<strong class="it hv">从石头、布、剪刀</strong>中选择。还有显示计算机画了什么和游戏结果的代码。</p><p id="80ee" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">像这样的代码将为我们游戏的上述方面做些什么，这也是我们代码的<code class="eh kx ky kz kn b">userMove(view)</code>方法中的代码。</p><pre class="jq jr js jt fq km kn ko kp aw kq dt"><span id="41f5" class="kr ks hu kn b fv kt ku l kv kw">int userMoveInt;<br/><br/>Button b = (Button) v;<br/>String name = b.getText().toString();<br/><br/>switch (name) {<br/>    case ("Rock"): {<br/>        userMoveInt = 0;<br/>        break;<br/>    }<br/>    case ("Paper"): {<br/>        userMoveInt = 1;<br/>        break;<br/>    }<br/>    default:<br/>        userMoveInt = 2;<br/>}<br/><br/>int compMoveInt;<br/>String compMoveStr;<br/>int resultStatus;<br/>compMoveInt = nextCompMove();<br/><br/>if (compMoveInt == 0)<br/>    compMoveStr = "rock";<br/><br/>else if (compMoveInt == 1)<br/>    compMoveStr = "paper";<br/><br/>else if (compMoveInt == 2)<br/>    compMoveStr = "scissors";<br/><br/>else<br/>    compMoveStr = "nothing";<br/><br/>String text = "I drew "+compMoveStr+", ";<br/>resultStatus = checkResult(compMoveInt,userMoveInt);<br/><br/>if (resultStatus == 0)<br/>    text+="You Win!";<br/><br/>else if (resultStatus == 1)<br/>    text += "It's a Tie.";<br/><br/>else if (resultStatus == 2)<br/>    text += "You Lose!";<br/><br/>TextView output = findViewById(R.id.<em class="kf">output</em>);<br/>output.setText(text);<br/>trainModel(resultStatus,compMoveInt);<br/><br/>float[] percentages = analyzeResults();<br/>int[] changes = changes(percentages);<br/>int rockChance = changes[0];<br/>int paperChance = changes[1];<br/><br/>text = "Rock: "+String.<em class="kf">valueOf</em>(rockChance)+"%";</span><span id="c836" class="kr ks hu kn b fv la ku l kv kw">((TextView) findViewById(R.id.<em class="kf">rPer</em>)).setText(text);<br/>text = "Paper: "+String.<em class="kf">valueOf</em>(paperChance)+"%";</span><span id="9cc0" class="kr ks hu kn b fv la ku l kv kw">((TextView) findViewById(R.id.<em class="kf">pPer</em>)).setText(text);<br/>text = "Scissors: "+String.<em class="kf">valueOf</em>(100-rockChance-paperChance)+"%";</span><span id="e2c3" class="kr ks hu kn b fv la ku l kv kw">((TextView) findViewById(R.id.<em class="kf">sPer</em>)).setText(text);<br/><br/>int top = Math.<em class="kf">max</em>(rockChance,Math.<em class="kf">max</em>(paperChance,100-rockChance-paperChance));<br/>text = "Confidence\n"+String.<em class="kf">valueOf</em>(Math.<em class="kf">round</em>(2*(top-50)))+"%";</span><span id="b773" class="kr ks hu kn b fv la ku l kv kw">((TextView) findViewById(R.id.<em class="kf">confidence</em>)).setText(text);</span></pre><p id="67fe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此外，我们使用整数0代表石头，1代表布，2代表剪刀。</p><p id="617a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在让我们写一些代码让<strong class="it hv">计算机选择</strong>和<strong class="it hv">向用户</strong>学习。此外，这段代码位于我们代码的方法<code class="eh kx ky kz kn b">nextCompMove()</code>中。</p><pre class="jq jr js jt fq km kn ko kp aw kq dt"><span id="66a9" class="kr ks hu kn b fv kt ku l kv kw">if (lastResult == -1) // that's default for the paper<br/>    return 1;<br/><br/>int chanceOneHundred = (int)(Math.<em class="kf">random</em>()*99)+1;<br/>float[] percentages = analyzeResults();<br/>int[] changes = changes(percentages);<br/>int rockChance = changes[0];<br/>int paperChance = changes[1];<br/>int compMove;<br/><br/>if (chanceOneHundred &lt; rockChance)<br/>    compMove = 0;<br/><br/>else if (chanceOneHundred&lt;rockChance+paperChance)<br/>    compMove = 1;<br/><br/>else<br/>    compMove = 2;<br/><br/>return compMove;</span></pre><p id="e6e5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你懂一点概率，那么你知道，随机选择石头、布、剪刀中的任何一个，都有概率<strong class="it hv"> 1/3或者~33% </strong>。</p><p id="cb5d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以，我们把每个选择的默认几率设为33%。<strong class="it hv">的代码改变了</strong>的选择，因为方法<code class="eh kx ky kz kn b">changes(percentage)</code>看起来像这样:</p><pre class="jq jr js jt fq km kn ko kp aw kq dt"><span id="3e2a" class="kr ks hu kn b fv kt ku l kv kw">int totalPercentages = (int) (percentages[0]+percentages[1]+percentages[2]);<br/>int rockChance = 33;<br/>int paperChance = 33;<br/><br/>if (totalPercentages != 0) {<br/>    rockChance= (int) (100*percentages[0]/totalPercentages);<br/>    paperChance= (int) (100*percentages[1]/totalPercentages);<br/>}<br/><br/>return new int[]{rockChance, paperChance};</span></pre><p id="2c60" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在让我们<strong class="it hv">帮助计算机分析用户</strong>的移动，并为计算机选择最有可能赢得游戏的东西。</p><p id="cdb5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将是我们对方法<code class="eh kx ky kz kn b">analyzeResults()</code>的代码:</p><pre class="jq jr js jt fq km kn ko kp aw kq dt"><span id="f9c4" class="kr ks hu kn b fv kt ku l kv kw">float[] percentages=new float[3];<br/>        if (lastResult == -1)<br/>            return percentages;<br/><br/>        int[][] relevantResults;<br/>        //noinspection ConstantConditions<br/>        <br/>            if (lastResult!=-1) {<br/><br/>            int[][] resultsTo2D;<br/>            int[][] results4DTo2D = results4D[lastResult][lastCompMove];<br/>            if (secondResult!=-1) {<br/>                int[][] results6DTo2D=results6D[secondResult][secondCompMove][lastResult][lastCompMove];<br/>                resultsTo2D = <em class="kf">totalAmount</em>(results6DTo2D)&lt;<em class="kf">totalAmount</em>(results4DTo2D)&amp;&amp;<em class="kf">totalAmount</em>(results6DTo2D)&lt;9?results4DTo2D:results6DTo2D;<br/>            }<br/><br/>            else<br/>                resultsTo2D = results4DTo2D;<br/><br/>            relevantResults = <em class="kf">totalAmount</em>(resultsTo2D)&lt;<em class="kf">totalAmount</em>(results2D)&amp;&amp;<em class="kf">totalAmount</em>(resultsTo2D)&lt;1?results2D:resultsTo2D;<br/>        }<br/>        else<br/>            relevantResults = results2D;<br/>        for (int i=0;i&lt;percentages.length;i++) {<br/><br/>//       percentages[i]=1+(relevantResults[2][i]*4+relevantResults[1][i]-relevantResults[0][1]*2);<br/>            percentages[i]=1+(relevantResults[2][i]+relevantResults[0][i==2?0:i+1])*4-(relevantResults[0][i]+relevantResults[2][i==0?2:i-1])*4;<br/>            if (percentages[i] &lt; 0)<br/>                percentages[i]=0;<br/>        }<br/>        return percentages;</span></pre><p id="aeab" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">花些时间理解这段代码，它几乎是<strong class="it hv">不言自明的</strong>。如果你理解了这一点，你就几乎理解了游戏的全部代码。</p><p id="f397" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们也完成<code class="eh kx ky kz kn b">trainModel(resultStatus, compMove)</code>代码，这样我们就完成了游戏的<strong class="it hv">机器学习关键部分</strong>。</p><pre class="jq jr js jt fq km kn ko kp aw kq dt"><span id="d912" class="kr ks hu kn b fv kt ku l kv kw">if (lastResult != -1) {<br/>    results4D[lastResult][lastCompMove][resultStatus][compMoveInt]++;<br/><br/>    if (secondResult != -1)<br/>        results6D[secondResult][secondCompMove][lastResult][lastCompMove][resultStatus][compMoveInt]++;<br/><br/>    secondResult=lastResult;<br/>    secondCompMove=lastCompMove;<br/>}<br/><br/>results2D[resultStatus][compMoveInt]++;<br/>lastResult=resultStatus;<br/>lastCompMove=compMoveInt;</span></pre><p id="e6fa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你就完事了。你给自己做了一个机器学习的安卓游戏，几乎<strong class="it hv">当然赢了</strong>对用户。</p><p id="1c2d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是，等等！<strong class="it hv">获胜的部分在哪里？我们当然不想让用户对谁赢了游戏一无所知，不是吗？</strong></p><p id="4fda" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以，让我们为<code class="eh kx ky kz kn b">checkResult(compMove, userMove)</code>写代码，告诉用户游戏的输赢。</p><pre class="jq jr js jt fq km kn ko kp aw kq dt"><span id="1a12" class="kr ks hu kn b fv kt ku l kv kw">/*Status 0 is a win<br/> *Status 1 is a tie<br/> *Status 2 is a loss*/<br/>int resultStatus;<br/>if (compMoveInt == 0 &amp;&amp; userMoveInt == 1 || compMoveInt == 1 &amp;&amp; userMoveInt == 2 || compMoveInt == 2 &amp;&amp; userMoveInt == 0) {<br/>    resultStatus = 0;<br/>    TextView wins= findViewById(R.id.<em class="kf">wins</em>);<br/>    int winAmount=Integer.<em class="kf">parseInt</em>(wins.getText().toString());<br/>    wins.setText(String.<em class="kf">valueOf</em>(winAmount+1));<br/>}<br/>else if (compMoveInt == userMoveInt) {<br/>    resultStatus = 1;<br/>    TextView ties = findViewById(R.id.<em class="kf">ties</em>);<br/>    int tieAmount = Integer.<em class="kf">parseInt</em>(ties.getText().toString());<br/>    ties.setText(String.<em class="kf">valueOf</em>(tieAmount+1));<br/>}<br/>else {<br/>    resultStatus = 2;<br/>    TextView losses = findViewById(R.id.<em class="kf">losses</em>);<br/>    int lossAmount = Integer.<em class="kf">parseInt</em>(losses.getText().toString());<br/>    losses.setText(String.<em class="kf">valueOf</em>(lossAmount+1));<br/>}<br/><br/>return resultStatus;</span></pre><p id="3512" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">是的，现在你已经为你的机器学习机器人游戏编写了你需要的所有代码，并打败了任何人。</p><p id="29f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">UI和代码中的一些其他微调，可以在我的<strong class="it hv"> GitHub库</strong>中找到。</p><p id="ef13" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae lb" href="https://github.com/Pradyuman7/MachineLearning-Game" rel="noopener ugc nofollow" target="_blank"><strong class="it hv">app</strong></a>的完整源代码。</p><p id="c9fb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">毫无疑问，你现在已经完成了。</p><p id="3161" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你还在等什么？去给你的朋友们展示一下<strong class="it hv"> <em class="kf">他们如何可怜地输给你的安卓游戏</em> </strong>。</p><p id="b72c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">去炫耀吧！</strong></p></div><div class="ab cl lc ld hc le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="hn ho hp hq hr"><p id="596d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae lb" href="https://hackernoon.com/how-to-make-a-cool-introduction-webpage-for-yourself-easily-177f0b7fe1e3" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv">阅读我之前关于轻松制作一个简单的动画和干净的网站的帖子。</strong> </a></p></div></div>    
</body>
</html>